(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var oe,x,ot,Q,Ne,at,it,st,De,we,xe,ct,le={},dt=[],Tt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ae=Array.isArray;function H(e,t){for(var n in t)e[n]=t[n];return e}function Be(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ut(e,t,n){var l,a,o,s={};for(o in t)o=="key"?l=t[o]:o=="ref"?a=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?oe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]===void 0&&(s[o]=e.defaultProps[o]);return re(e,s,l,a,null)}function re(e,t,n,l,a){var o={type:e,props:t,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++ot,__i:-1,__u:0};return a==null&&x.vnode!=null&&x.vnode(o),o}function j(e){return e.children}function ne(e,t){this.props=e,this.context=t}function X(e,t){if(t==null)return e.__?X(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?X(e):null}function ht(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ht(e)}}function ke(e){(!e.__d&&(e.__d=!0)&&Q.push(e)&&!he.__r++||Ne!=x.debounceRendering)&&((Ne=x.debounceRendering)||at)(he)}function he(){for(var e,t,n,l,a,o,s,u=1;Q.length;)Q.length>u&&Q.sort(it),e=Q.shift(),u=Q.length,e.__d&&(n=void 0,l=void 0,a=(l=(t=e).__v).__e,o=[],s=[],t.__P&&((n=H({},l)).__v=l.__v+1,x.vnode&&x.vnode(n),Pe(t.__P,n,l,t.__n,t.__P.namespaceURI,32&l.__u?[a]:null,o,a??X(l),!!(32&l.__u),s),n.__v=l.__v,n.__.__k[n.__i]=n,_t(o,n,s),l.__e=l.__=null,n.__e!=a&&ht(n)));he.__r=0}function pt(e,t,n,l,a,o,s,u,d,c,p){var i,_,f,b,S,y,v,m=l&&l.__k||dt,I=t.length;for(d=Dt(n,t,m,d,I),i=0;i<I;i++)(f=n.__k[i])!=null&&(_=f.__i==-1?le:m[f.__i]||le,f.__i=i,y=Pe(e,f,_,a,o,s,u,d,c,p),b=f.__e,f.ref&&_.ref!=f.ref&&(_.ref&&Fe(_.ref,null,f),p.push(f.ref,f.__c||b,f)),S==null&&b!=null&&(S=b),(v=!!(4&f.__u))||_.__k===f.__k?d=ft(f,d,e,v):typeof f.type=="function"&&y!==void 0?d=y:b&&(d=b.nextSibling),f.__u&=-7);return n.__e=S,d}function Dt(e,t,n,l,a){var o,s,u,d,c,p=n.length,i=p,_=0;for(e.__k=new Array(a),o=0;o<a;o++)(s=t[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[o]=re(null,s,null,null,null):ae(s)?s=e.__k[o]=re(j,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[o]=re(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[o]=s,d=o+_,s.__=e,s.__b=e.__b+1,u=null,(c=s.__i=Bt(s,n,d,i))!=-1&&(i--,(u=n[c])&&(u.__u|=2)),u==null||u.__v==null?(c==-1&&(a>p?_--:a<p&&_++),typeof s.type!="function"&&(s.__u|=4)):c!=d&&(c==d-1?_--:c==d+1?_++:(c>d?_--:_++,s.__u|=4))):e.__k[o]=null;if(i)for(o=0;o<p;o++)(u=n[o])!=null&&!(2&u.__u)&&(u.__e==l&&(l=X(u)),vt(u,u));return l}function ft(e,t,n,l){var a,o;if(typeof e.type=="function"){for(a=e.__k,o=0;a&&o<a.length;o++)a[o]&&(a[o].__=e,t=ft(a[o],t,n,l));return t}e.__e!=t&&(l&&(t&&e.type&&!t.parentNode&&(t=X(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ce(e,t){return t=t||[],e==null||typeof e=="boolean"||(ae(e)?e.some(function(n){Ce(n,t)}):t.push(e)),t}function Bt(e,t,n,l){var a,o,s,u=e.key,d=e.type,c=t[n],p=c!=null&&(2&c.__u)==0;if(c===null&&u==null||p&&u==c.key&&d==c.type)return n;if(l>(p?1:0)){for(a=n-1,o=n+1;a>=0||o<t.length;)if((c=t[s=a>=0?a--:o++])!=null&&!(2&c.__u)&&u==c.key&&d==c.type)return s}return-1}function Oe(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Tt.test(t)?n:n+"px"}function se(e,t,n,l,a){var o,s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof l=="string"&&(e.style.cssText=l=""),l)for(t in l)n&&t in n||Oe(e.style,t,"");if(n)for(t in n)l&&n[t]==l[t]||Oe(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(st,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?l?n.u=l.u:(n.u=De,e.addEventListener(t,o?xe:we,o)):e.removeEventListener(t,o?xe:we,o);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Ue(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=De++;else if(t.t<n.u)return;return n(x.event?x.event(t):t)}}}function Pe(e,t,n,l,a,o,s,u,d,c){var p,i,_,f,b,S,y,v,m,I,P,F,O,U,R,E,W,A=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(d=!!(32&n.__u),o=[u=t.__e=n.__e]),(p=x.__b)&&p(t);e:if(typeof A=="function")try{if(v=t.props,m="prototype"in A&&A.prototype.render,I=(p=A.contextType)&&l[p.__c],P=p?I?I.props.value:p.__:l,n.__c?y=(i=t.__c=n.__c).__=i.__E:(m?t.__c=i=new A(v,P):(t.__c=i=new ne(v,P),i.constructor=A,i.render=Ft),I&&I.sub(i),i.state||(i.state={}),i.__n=l,_=i.__d=!0,i.__h=[],i._sb=[]),m&&i.__s==null&&(i.__s=i.state),m&&A.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=H({},i.__s)),H(i.__s,A.getDerivedStateFromProps(v,i.__s))),f=i.props,b=i.state,i.__v=t,_)m&&A.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),m&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(m&&A.getDerivedStateFromProps==null&&v!==f&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(v,P),t.__v==n.__v||!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(v,i.__s,P)===!1){for(t.__v!=n.__v&&(i.props=v,i.state=i.__s,i.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(N){N&&(N.__=t)}),F=0;F<i._sb.length;F++)i.__h.push(i._sb[F]);i._sb=[],i.__h.length&&s.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(v,i.__s,P),m&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(f,b,S)})}if(i.context=P,i.props=v,i.__P=e,i.__e=!1,O=x.__r,U=0,m){for(i.state=i.__s,i.__d=!1,O&&O(t),p=i.render(i.props,i.state,i.context),R=0;R<i._sb.length;R++)i.__h.push(i._sb[R]);i._sb=[]}else do i.__d=!1,O&&O(t),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++U<25);i.state=i.__s,i.getChildContext!=null&&(l=H(H({},l),i.getChildContext())),m&&!_&&i.getSnapshotBeforeUpdate!=null&&(S=i.getSnapshotBeforeUpdate(f,b)),E=p,p!=null&&p.type===j&&p.key==null&&(E=gt(p.props.children)),u=pt(e,ae(E)?E:[E],t,n,l,a,o,s,u,d,c),i.base=t.__e,t.__u&=-161,i.__h.length&&s.push(i),y&&(i.__E=i.__=null)}catch(N){if(t.__v=null,d||o!=null)if(N.then){for(t.__u|=d?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;o[o.indexOf(u)]=null,t.__e=u}else{for(W=o.length;W--;)Be(o[W]);Se(t)}else t.__e=n.__e,t.__k=n.__k,N.then||Se(t);x.__e(N,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):u=t.__e=Pt(n.__e,t,n,l,a,o,s,d,c);return(p=x.diffed)&&p(t),128&t.__u?void 0:u}function Se(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Se)}function _t(e,t,n){for(var l=0;l<n.length;l++)Fe(n[l],n[++l],n[++l]);x.__c&&x.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(o){o.call(a)})}catch(o){x.__e(o,a.__v)}})}function gt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ae(e)?e.map(gt):H({},e)}function Pt(e,t,n,l,a,o,s,u,d){var c,p,i,_,f,b,S,y=n.props||le,v=t.props,m=t.type;if(m=="svg"?a="http://www.w3.org/2000/svg":m=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((f=o[c])&&"setAttribute"in f==!!m&&(m?f.localName==m:f.nodeType==3)){e=f,o[c]=null;break}}if(e==null){if(m==null)return document.createTextNode(v);e=document.createElementNS(a,m,v.is&&v),u&&(x.__m&&x.__m(t,o),u=!1),o=null}if(m==null)y===v||u&&e.data==v||(e.data=v);else{if(o=o&&oe.call(e.childNodes),!u&&o!=null)for(y={},c=0;c<e.attributes.length;c++)y[(f=e.attributes[c]).name]=f.value;for(c in y)if(f=y[c],c!="children"){if(c=="dangerouslySetInnerHTML")i=f;else if(!(c in v)){if(c=="value"&&"defaultValue"in v||c=="checked"&&"defaultChecked"in v)continue;se(e,c,null,f,a)}}for(c in v)f=v[c],c=="children"?_=f:c=="dangerouslySetInnerHTML"?p=f:c=="value"?b=f:c=="checked"?S=f:u&&typeof f!="function"||y[c]===f||se(e,c,f,y[c],a);if(p)u||i&&(p.__html==i.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(i&&(e.innerHTML=""),pt(t.type=="template"?e.content:e,ae(_)?_:[_],t,n,l,m=="foreignObject"?"http://www.w3.org/1999/xhtml":a,o,s,o?o[0]:n.__k&&X(n,0),u,d),o!=null)for(c=o.length;c--;)Be(o[c]);u||(c="value",m=="progress"&&b==null?e.removeAttribute("value"):b!=null&&(b!==e[c]||m=="progress"&&!b||m=="option"&&b!=y[c])&&se(e,c,b,y[c],a),c="checked",S!=null&&S!=e[c]&&se(e,c,S,y[c],a))}return e}function Fe(e,t,n){try{if(typeof e=="function"){var l=typeof e.__u=="function";l&&e.__u(),l&&t==null||(e.__u=e(t))}else e.current=t}catch(a){x.__e(a,n)}}function vt(e,t,n){var l,a;if(x.unmount&&x.unmount(e),(l=e.ref)&&(l.current&&l.current!=e.__e||Fe(l,null,t)),(l=e.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(o){x.__e(o,t)}l.base=l.__P=null}if(l=e.__k)for(a=0;a<l.length;a++)l[a]&&vt(l[a],t,n||typeof e.type!="function");n||Be(e.__e),e.__c=e.__=e.__e=void 0}function Ft(e,t,n){return this.constructor(e,n)}function Et(e,t,n){var l,a,o,s;t==document&&(t=document.documentElement),x.__&&x.__(e,t),a=(l=!1)?null:t.__k,o=[],s=[],Pe(t,e=t.__k=ut(j,null,[e]),a||le,le,t.namespaceURI,a?null:t.firstChild?oe.call(t.childNodes):null,o,a?a.__e:t.firstChild,l,s),_t(o,e,s)}function Lt(e,t,n){var l,a,o,s,u=H({},e.props);for(o in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)o=="key"?l=t[o]:o=="ref"?a=t[o]:u[o]=t[o]===void 0&&s!=null?s[o]:t[o];return arguments.length>2&&(u.children=arguments.length>3?oe.call(arguments,2):n),re(e.type,u,l||e.key,a||e.ref,null)}function mt(e){function t(n){var l,a;return this.getChildContext||(l=new Set,(a={})[t.__c]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){l=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&l.forEach(function(s){s.__e=!0,ke(s)})},this.sub=function(o){l.add(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){l&&l.delete(o),s&&s.call(o)}}),n.children}return t.__c="__cC"+ct++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,l){return n.children(l)}).contextType=t,t}oe=dt.slice,x={__e:function(e,t,n,l){for(var a,o,s;t=t.__;)if((a=t.__c)&&!a.__)try{if((o=a.constructor)&&o.getDerivedStateFromError!=null&&(a.setState(o.getDerivedStateFromError(e)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,l||{}),s=a.__d),s)return a.__E=a}catch(u){e=u}throw e}},ot=0,ne.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=H({},this.state),typeof e=="function"&&(e=e(H({},n),this.props)),e&&H(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ke(this))},ne.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ke(this))},ne.prototype.render=j,Q=[],at=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,it=function(e,t){return e.__v.__b-t.__v.__b},he.__r=0,st=/(PointerCapture)$|Capture$/i,De=0,we=Ue(!1),xe=Ue(!0),ct=0;var Mt=0;function r(e,t,n,l,a,o){t||(t={});var s,u,d=t;if("ref"in d)for(u in d={},t)u=="ref"?s=t[u]:d[u]=t[u];var c={type:e,props:d,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Mt,__i:-1,__u:0,__source:a,__self:o};if(typeof e=="function"&&(s=e.defaultProps))for(u in s)d[u]===void 0&&(d[u]=s[u]);return x.vnode&&x.vnode(c),c}var ee,C,ve,Re,pe=0,yt=[],$=x,He=$.__b,We=$.__r,qe=$.diffed,ze=$.__c,Ve=$.unmount,Ge=$.__;function fe(e,t){$.__h&&$.__h(C,e,pe||t),pe=0;var n=C.__H||(C.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function w(e){return pe=1,Nt(wt,e)}function Nt(e,t,n){var l=fe(ee++,2);if(l.t=e,!l.__c&&(l.__=[wt(void 0,t),function(u){var d=l.__N?l.__N[0]:l.__[0],c=l.t(d,u);d!==c&&(l.__N=[c,l.__[1]],l.__c.setState({}))}],l.__c=C,!C.__f)){var a=function(u,d,c){if(!l.__c.__H)return!0;var p=l.__c.__H.__.filter(function(_){return!!_.__c});if(p.every(function(_){return!_.__N}))return!o||o.call(this,u,d,c);var i=l.__c.props!==u;return p.forEach(function(_){if(_.__N){var f=_.__[0];_.__=_.__N,_.__N=void 0,f!==_.__[0]&&(i=!0)}}),o&&o.call(this,u,d,c)||i};C.__f=!0;var o=C.shouldComponentUpdate,s=C.componentWillUpdate;C.componentWillUpdate=function(u,d,c){if(this.__e){var p=o;o=void 0,a(u,d,c),o=p}s&&s.call(this,u,d,c)},C.shouldComponentUpdate=a}return l.__N||l.__}function Ee(e,t){var n=fe(ee++,3);!$.__s&&bt(n.__H,t)&&(n.__=e,n.u=t,C.__H.__h.push(n))}function $e(e,t){var n=fe(ee++,7);return bt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function je(e,t){return pe=8,$e(function(){return e},t)}function Ot(e){var t=C.context[e.__c],n=fe(ee++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(C)),t.props.value):e.__}function Ut(){for(var e;e=yt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(de),e.__H.__h.forEach(Ie),e.__H.__h=[]}catch(t){e.__H.__h=[],$.__e(t,e.__v)}}$.__b=function(e){C=null,He&&He(e)},$.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ge&&Ge(e,t)},$.__r=function(e){We&&We(e),ee=0;var t=(C=e.__c).__H;t&&(ve===C?(t.__h=[],C.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(de),t.__h.forEach(Ie),t.__h=[],ee=0)),ve=C},$.diffed=function(e){qe&&qe(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(yt.push(t)!==1&&Re===$.requestAnimationFrame||((Re=$.requestAnimationFrame)||Rt)(Ut)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ve=C=null},$.__c=function(e,t){t.some(function(n){try{n.__h.forEach(de),n.__h=n.__h.filter(function(l){return!l.__||Ie(l)})}catch(l){t.some(function(a){a.__h&&(a.__h=[])}),t=[],$.__e(l,n.__v)}}),ze&&ze(e,t)},$.unmount=function(e){Ve&&Ve(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(l){try{de(l)}catch(a){t=a}}),n.__H=void 0,t&&$.__e(t,n.__v))};var Qe=typeof requestAnimationFrame=="function";function Rt(e){var t,n=function(){clearTimeout(l),Qe&&cancelAnimationFrame(t),setTimeout(e)},l=setTimeout(n,35);Qe&&(t=requestAnimationFrame(n))}function de(e){var t=C,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),C=t}function Ie(e){var t=C;e.__c=e.__(),C=t}function bt(e,t){return!e||e.length!==t.length||t.some(function(n,l){return n!==e[l]})}function wt(e,t){return typeof t=="function"?t(e):t}var Ht={};function ce(e,t){for(var n in t)e[n]=t[n];return e}function Wt(e,t,n){var l,a=/(?:\?([^#]*))?(#.*)?$/,o=e.match(a),s={};if(o&&o[1])for(var u=o[1].split("&"),d=0;d<u.length;d++){var c=u[d].split("=");s[decodeURIComponent(c[0])]=decodeURIComponent(c.slice(1).join("="))}e=Ae(e.replace(a,"")),t=Ae(t||"");for(var p=Math.max(e.length,t.length),i=0;i<p;i++)if(t[i]&&t[i].charAt(0)===":"){var _=t[i].replace(/(^:|[+*?]+$)/g,""),f=(t[i].match(/[+*?]+$/)||Ht)[0]||"",b=~f.indexOf("+"),S=~f.indexOf("*"),y=e[i]||"";if(!y&&!S&&(f.indexOf("?")<0||b)){l=!1;break}if(s[_]=decodeURIComponent(y),b||S){s[_]=e.slice(i).map(decodeURIComponent).join("/");break}}else if(t[i]!==e[i]){l=!1;break}return(n.default===!0||l!==!1)&&s}function qt(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function zt(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:Ae(n.props.path).map(Vt).join("")}(e),e.props}function Ae(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Vt(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Gt={},K=[],Ke=[],M=null,xt={url:Le()},jt=mt(xt);function Le(){var e;return""+((e=M&&M.location?M.location:M&&M.getCurrentLocation?M.getCurrentLocation():typeof location<"u"?location:Gt).pathname||"")+(e.search||"")}function ue(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var l=K.length;l--;)if(K[l].canRoute(n))return!0;return!1}(e)&&function(n,l){l===void 0&&(l="push"),M&&M[l]?M[l](n):typeof history<"u"&&history[l+"State"]&&history[l+"State"](null,null,n)}(e,t?"replace":"push"),kt(e)}function kt(e){for(var t=!1,n=0;n<K.length;n++)K[n].routeTo(e)&&(t=!0);return t}function Qt(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return ue(t)}}function Kt(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Zt(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Qt(t))return Kt(e)}while(t=t.parentNode)}}var Ze=!1;function Ct(e){e.history&&(M=e.history),this.state={url:e.url||Le()}}ce(Ct.prototype=new ne,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=Ce(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Ze||(Ze=!0,M||addEventListener("popstate",function(){kt(Le())}),addEventListener("click",Zt)),K.push(this),M&&(this.u=M.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),K.splice(K.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(zt).sort(qt);for(var n=0;n<e.length;n++){var l=e[n],a=Wt(t,l.props.path,l.props);if(a)return[l,a]}},render:function(e,t){var n,l,a=e.onChange,o=t.url,s=this.c,u=this.g(Ce(e.children),o);if(u&&(l=Lt(u[0],ce(ce({url:o,matches:n=u[1]},n),{key:void 0,ref:void 0}))),o!==(s&&s.url)){ce(xt,s=this.c={url:o,previous:s&&s.url,current:l,path:l?l.props.path:null,matches:n}),s.router=this,s.active=l?[l]:[];for(var d=Ke.length;d--;)Ke[d]({});typeof a=="function"&&a(s)}return ut(jt.Provider,{value:s},l)}});const Jt="v0.5.0",Yt=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.35-4.35"})]}),Xt=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[r("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),r("polyline",{points:"7 10 12 15 17 10"}),r("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),er=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[r("circle",{cx:"12",cy:"12",r:"3"}),r("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),tr=()=>r("svg",{viewBox:"0 0 100 100",width:"28",height:"28",children:[r("rect",{x:"10",y:"70",width:"80",height:"20",fill:"#58a6ff",rx:"4"}),r("rect",{x:"20",y:"45",width:"60",height:"20",fill:"#58a6ff",rx:"4"}),r("rect",{x:"30",y:"20",width:"40",height:"20",fill:"#58a6ff",rx:"4"})]});function rr({children:e,url:t}){const n=[{path:"/",icon:Yt,label:"Search"},{path:"/downloads",icon:Xt,label:"Downloads"},{path:"/settings",icon:er,label:"Settings"}],l=a=>a==="/"?t==="/"||t==="/search"||(t==null?void 0:t.startsWith("/item/")):t==null?void 0:t.startsWith(a);return r("div",{class:"layout",children:[r("aside",{class:"sidebar",children:[r("div",{class:"sidebar-header",children:r("div",{class:"sidebar-logo",children:[r(tr,{}),r("span",{children:"IA Docker"})]})}),r("nav",{class:"sidebar-nav",children:n.map(a=>r("a",{class:`nav-item ${l(a.path)?"active":""}`,href:a.path,children:[r(a.icon,{}),r("span",{children:a.label})]},a.path))}),r("div",{class:"sidebar-footer",children:r("span",{class:"version-badge",children:["IADocker ",Jt]})})]}),r("main",{class:"main-content",children:e})]})}const St=mt();let nr=0;function lr({children:e}){const[t,n]=w([]),l=je((o,s="info",u=5e3)=>{const d=++nr;return n(c=>[...c,{id:d,message:o,type:s}]),u>0&&setTimeout(()=>{n(c=>c.filter(p=>p.id!==d))},u),d},[]),a=je(o=>{n(s=>s.filter(u=>u.id!==o))},[]);return r(St.Provider,{value:{addToast:l,removeToast:a},children:[e,r(or,{toasts:t,onClose:a})]})}function $t(){const e=Ot(St);if(!e)throw new Error("useToast must be used within ToastProvider");return e}function or({toasts:e,onClose:t}){return e.length===0?null:r("div",{class:"toast-container",children:e.map(n=>r("div",{class:`toast toast-${n.type}`,children:[r("span",{class:"toast-message",children:n.message}),r("button",{class:"toast-close",onClick:()=>t(n.id),children:"Ã—"})]},n.id))})}const It="/api";async function z(e,t={}){const n=await fetch(`${It}${e}`,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!n.ok){const l=await n.json().catch(()=>({detail:"Request failed"}));throw new Error(l.detail||"Request failed")}return n.json()}const D={getAuthStatus:()=>z("/auth/status"),configure:(e,t)=>z("/auth/configure",{method:"POST",body:JSON.stringify({email:e,password:t})}),search:(e,t={})=>{const n=new URLSearchParams({q:e,...t});return z(`/search?${n}`)},getItem:e=>z(`/items/${e}`),getItemFiles:e=>z(`/items/${e}/files`),startDownload:(e,t,n,l)=>z("/downloads",{method:"POST",body:JSON.stringify({identifier:e,files:t,glob:n,format:l})}),getDownloads:()=>z("/downloads"),cancelDownload:e=>z(`/downloads/${e}`,{method:"DELETE"}),clearDownloads:()=>z("/downloads",{method:"DELETE"})};function ar(e){const t=new EventSource(`${It}/downloads/events`);return t.addEventListener("progress",n=>{e(JSON.parse(n.data))}),t.onerror=()=>{t.close()},()=>t.close()}const me=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.35-4.35"})]}),ir=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",children:r("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),Je=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",children:[r("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),r("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),sr=({open:e})=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",style:{transform:e?"rotate(180deg)":"none",transition:"transform 0.2s"},children:r("polyline",{points:"6 9 12 15 18 9"})}),cr=[{value:"",label:"All Types"},{value:"texts",label:"ðŸ“š Texts"},{value:"movies",label:"ðŸŽ¬ Movies"},{value:"audio",label:"ðŸŽµ Audio"},{value:"software",label:"ðŸ’¿ Software"},{value:"image",label:"ðŸ–¼ï¸ Images"},{value:"data",label:"ðŸ“Š Data"},{value:"web",label:"ðŸŒ Web Archives"},{value:"etree",label:"ðŸŽ¸ Live Music"},{value:"collection",label:"ðŸ“ Collections"}],Ye=[{value:"",label:"All Collections"},{value:"opensource_movies",label:"Open Source Movies"},{value:"opensource_audio",label:"Open Source Audio"},{value:"prelinger",label:"Prelinger Archives"},{value:"internetarchivebooks",label:"Internet Archive Books"},{value:"oldtimeradio",label:"Old Time Radio"},{value:"computerphotos",label:"Computer Photos"},{value:"librivoxaudio",label:"LibriVox Audiobooks"},{value:"tvnews",label:"TV News Archive"},{value:"softwarelibrary",label:"Software Library"},{value:"classicpcgames",label:"Classic PC Games"},{value:"msdos_games",label:"MS-DOS Games"},{value:"consolelivingroom",label:"Console Living Room"}],dr=[{value:"",label:"Relevance"},{value:"-downloads",label:"Most Downloaded"},{value:"-week",label:"Trending This Week"},{value:"-publicdate",label:"Newest First"},{value:"publicdate",label:"Oldest First"},{value:"titleSorter",label:"Title A-Z"},{value:"-titleSorter",label:"Title Z-A"}];function te(e){const t=e.trim(),n=/archive\.org\/download\/([^\/\?\#\s]+)\/(.+?)(?:\?|#|$)/,l=t.match(n);if(l)return{identifier:l[1],filename:decodeURIComponent(l[2])};const a=[/archive\.org\/details\/([^\/\?\#\s]+)/,/archive\.org\/download\/([^\/\?\#\s]+)\/?$/,/archive\.org\/metadata\/([^\/\?\#\s]+)/,/archive\.org\/embed\/([^\/\?\#\s]+)/];for(const o of a){const s=t.match(o);if(s)return{identifier:s[1],filename:null}}return/^[a-zA-Z0-9_\-\.]+$/.test(t)&&t.length>2&&t.length<200?{identifier:t,filename:null}:null}function Xe(e){const t=e.split(/[\n\r]+/).map(l=>l.trim()).filter(l=>l.length>0),n=[];for(const l of t){const a=te(l);a&&n.push(a)}return n}function et(){const{addToast:e}=$t(),[t,n]=w(""),[l,a]=w([]),[o,s]=w(!1),[u,d]=w(0),[c,p]=w(1),[i,_]=w(!1),[f,b]=w(!1),[S,y]=w(""),[v,m]=w(!1),[I,P]=w(""),[F,O]=w(""),[U,R]=w(""),[E,W]=w(""),[A,N]=w(""),B=Xe(S),L=t.includes(`
`)||t.includes("archive.org")?Xe(t):[],Z=L.length>1,q=async(h,T=1)=>{h==null||h.preventDefault();const V=t.trim();if(Z){await g();return}const Y=te(V);if(Y&&V.includes("archive.org"))if(Y.filename){m(!0);try{await D.startDownload(Y.identifier,[Y.filename]),e(`ðŸ“¥ Added ${Y.filename} to queue`,"success"),m(!1)}catch(G){console.error("Download failed:",G),e("Failed to start download","error"),m(!1)}return}else{ue(`/item/${Y.identifier}`);return}if(!(!V&&!F&&!I&&!A)){s(!0),p(T);try{const G={page:T,rows:24};I&&(G.mediatype=I),F&&(G.collection=F),U&&(G.sort=U);let ge=V||"*";E&&(ge+=` AND year:${E}`),A&&(ge+=` AND creator:"${A}"`);const Me=await D.search(ge,G);a(Me.results),d(Me.total)}catch(G){console.error("Search failed:",G)}finally{s(!1)}}},g=async()=>{if(L.length===0)return;m(!0),setDownloadProgress(`Queuing 0/${L.length}...`);let h=0;for(const T of L)try{T.filename?await D.startDownload(T.identifier,[T.filename]):await D.startDownload(T.identifier),h++,setDownloadProgress(`Queuing ${h}/${L.length}...`)}catch(V){console.error(`Failed to queue ${T.identifier}:`,V)}e(`ðŸ“¥ Added ${L.length} items to queue`,"success"),m(!1)},k=h=>{ue(`/item/${h}`)},_e=async()=>{const h=te(t.trim());if(h)if(h.filename){m(!0);try{await D.startDownload(h.identifier,[h.filename]),e(`ðŸ“¥ Added ${h.filename} to queue`,"success"),m(!1)}catch(T){console.error("Download failed:",T),e("Failed to start download","error"),m(!1)}}else ue(`/item/${h.identifier}`)},At=()=>{P(""),O(""),R(""),W(""),N("")},ie=I||F||U||E||A,J=Math.ceil(u/24);return r("div",{children:[r("div",{class:"page-header",children:[r("h1",{class:"page-title",children:"Search Archive.org"}),r("p",{class:"page-subtitle",children:"Explore millions of items in the Internet Archive"})]}),r("form",{onSubmit:q,class:"search-bar",style:{flexWrap:"wrap",gap:"var(--space-sm)"},children:[r("div",{class:"search-input-wrapper",style:{flex:"1 1 300px"},children:[r(me,{}),r("input",{type:"text",class:"search-input",placeholder:"Search, paste URL, or enter identifier...",value:t,onInput:h=>n(h.target.value)})]}),r("button",{type:"button",class:`btn ${i||ie?"btn-primary":"btn-secondary"}`,onClick:()=>_(!i),style:{display:"flex",alignItems:"center",gap:"6px"},children:[r(ir,{}),"Filters",ie&&r("span",{style:{background:"rgba(255,255,255,0.3)",borderRadius:"50%",width:"18px",height:"18px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center"},children:"!"}),r(sr,{open:i})]}),r("button",{type:"button",class:`btn ${f?"btn-primary":"btn-secondary"}`,onClick:()=>b(!f),style:{display:"flex",alignItems:"center",gap:"6px"},children:"ðŸ“¥ Bulk"}),r("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:o,children:o?"Searching...":"Search"})]}),f&&r("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:[r("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r("strong",{children:"ðŸ“¥ Bulk Download"}),B.length>0&&r("span",{class:"result-badge",children:[B.length," items detected"]})]}),r("div",{class:"card-body",children:[r("div",{class:"form-group",style:{marginBottom:"var(--space-md)"},children:[r("label",{class:"form-label",children:"Paste archive.org URLs (one per line)"}),r("textarea",{class:"form-input",rows:"6",placeholder:`https://archive.org/download/item1/file.zip
https://archive.org/details/item2
https://archive.org/download/item3/folder/file.mp4`,value:S,onInput:h=>y(h.target.value),style:{fontFamily:"var(--font-mono)",fontSize:"0.875rem"}})]}),B.length>0&&r("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)",marginBottom:"var(--space-md)"},children:[B.filter(h=>h.filename).length," specific files, ",B.filter(h=>!h.filename).length," full items"]}),r("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[r("button",{class:"btn btn-primary",onClick:async()=>{if(B.length===0)return;m(!0),setDownloadProgress(`Queuing 0/${B.length}...`);let h=0;for(const T of B)try{T.filename?await D.startDownload(T.identifier,[T.filename]):await D.startDownload(T.identifier),h++,setDownloadProgress(`Queuing ${h}/${B.length}...`)}catch(V){console.error(`Failed to queue ${T.identifier}:`,V)}e(`ðŸ“¥ Added ${B.length} items to queue`,"success"),m(!1),y(""),b(!1)},disabled:v||B.length===0,children:v?"Queuing...":`Download ${B.length} Items`}),r("button",{class:"btn btn-secondary",onClick:()=>y(""),children:"Clear"})]})]})]}),Z&&r("div",{style:{marginTop:"var(--space-sm)",marginBottom:"var(--space-md)",padding:"var(--space-md)",background:"rgba(88, 166, 255, 0.15)",borderRadius:"var(--radius-md)",border:"1px solid rgba(88, 166, 255, 0.3)"},children:[r("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",marginBottom:"var(--space-sm)"},children:[r(Je,{}),r("strong",{children:"Bulk Download Mode"}),r("span",{class:"result-badge",style:{marginLeft:"auto"},children:[L.length," items"]})]}),r("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)",marginBottom:"var(--space-md)"},children:[L.filter(h=>h.filename).length," specific files, ",L.filter(h=>!h.filename).length," full items"]}),r("div",{style:{display:"flex",gap:"var(--space-sm)",flexWrap:"wrap"},children:[r("button",{class:"btn btn-primary",onClick:g,disabled:v,children:v?downloadProgress||"Queuing...":`ðŸ“¥ Download All ${L.length} Items`}),r("button",{class:"btn btn-secondary",onClick:()=>n(""),children:"Clear"})]})]}),!Z&&t.trim()&&te(t.trim())&&(()=>{const h=te(t.trim());return r("div",{style:{marginTop:"var(--space-sm)",marginBottom:"var(--space-md)",padding:"var(--space-sm) var(--space-md)",background:h.filename?"rgba(63, 185, 80, 0.15)":"var(--color-accent-muted)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"var(--space-sm)",border:h.filename?"1px solid rgba(63, 185, 80, 0.3)":"none"},children:[r(Je,{}),r("span",{style:{flex:1},children:h.filename?r(j,{children:["Download file: ",r("strong",{children:h.filename})," from ",r("strong",{children:h.identifier})]}):r(j,{children:["Go directly to item: ",r("strong",{children:h.identifier})]})}),r("button",{class:"btn btn-primary",onClick:_e,disabled:v,children:v?"Starting...":h.filename?"ðŸ“¥ Download":"Open Item"})]})})(),i&&r("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:r("div",{class:"card-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"var(--space-md)"},children:[r("div",{class:"form-group",style:{margin:0},children:[r("label",{class:"form-label",children:"Media Type"}),r("select",{class:"form-input",value:I,onChange:h=>P(h.target.value),children:cr.map(h=>r("option",{value:h.value,children:h.label},h.value))})]}),r("div",{class:"form-group",style:{margin:0},children:[r("label",{class:"form-label",children:"Collection"}),r("select",{class:"form-input",value:F,onChange:h=>O(h.target.value),children:Ye.map(h=>r("option",{value:h.value,children:h.label},h.value))})]}),r("div",{class:"form-group",style:{margin:0},children:[r("label",{class:"form-label",children:"Sort By"}),r("select",{class:"form-input",value:U,onChange:h=>R(h.target.value),children:dr.map(h=>r("option",{value:h.value,children:h.label},h.value))})]}),r("div",{class:"form-group",style:{margin:0},children:[r("label",{class:"form-label",children:"Year"}),r("input",{type:"text",class:"form-input",placeholder:"e.g. 2020 or 1990-2000",value:E,onInput:h=>W(h.target.value)})]}),r("div",{class:"form-group",style:{margin:0},children:[r("label",{class:"form-label",children:"Creator"}),r("input",{type:"text",class:"form-input",placeholder:"Author or creator",value:A,onInput:h=>N(h.target.value)})]}),r("div",{class:"form-group",style:{margin:0,display:"flex",alignItems:"flex-end"},children:r("button",{type:"button",class:"btn btn-secondary",onClick:At,disabled:!ie,children:"Clear Filters"})})]})}),l.length>0&&r("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-md)"},children:[r("p",{class:"text-secondary",children:["Found ",u.toLocaleString()," results",ie&&" (filtered)"]}),J>1&&r("div",{style:{display:"flex",gap:"var(--space-sm)",alignItems:"center"},children:[r("button",{class:"btn btn-secondary",disabled:c<=1,onClick:()=>q(null,c-1),children:"â† Prev"}),r("span",{class:"text-secondary",children:["Page ",c," of ",J]}),r("button",{class:"btn btn-secondary",disabled:c>=J,onClick:()=>q(null,c+1),children:"Next â†’"})]})]}),o?r("div",{class:"loading-container",children:r("div",{class:"loading-spinner"})}):l.length>0?r(j,{children:[r("div",{class:"results-grid",children:l.map(h=>r("div",{class:"result-card",onClick:()=>k(h.identifier),children:[r("img",{class:"result-thumbnail",src:`https://archive.org/services/img/${h.identifier}`,alt:h.title,loading:"lazy",onError:T=>{T.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%2321262d" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%236e7681" font-size="12">No Image</text></svg>'}}),r("div",{class:"result-info",children:[r("h3",{class:"result-title",children:h.title||h.identifier}),r("div",{class:"result-meta",children:[h.mediatype&&r("span",{class:"result-badge",children:h.mediatype}),h.date&&r("span",{children:h.date.substring(0,10)})]}),h.creator&&r("div",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:typeof h.creator=="string"?h.creator:h.creator[0]})]})]},h.identifier))}),J>1&&r("div",{style:{display:"flex",justifyContent:"center",gap:"var(--space-sm)",marginTop:"var(--space-xl)"},children:[r("button",{class:"btn btn-secondary",disabled:c<=1,onClick:()=>q(null,c-1),children:"â† Previous"}),r("span",{class:"text-secondary",style:{padding:"8px 16px"},children:["Page ",c," of ",J]}),r("button",{class:"btn btn-secondary",disabled:c>=J,onClick:()=>q(null,c+1),children:"Next â†’"})]})]}):t&&!o?r("div",{class:"empty-state",children:[r(me,{}),r("h3",{children:"No results found"}),r("p",{children:"Try different keywords or adjust filters"})]}):r("div",{class:"empty-state",children:[r(me,{}),r("h3",{children:"Start Your Search"}),r("p",{children:"Enter a query, paste an archive.org URL, or browse by collection"}),r("div",{style:{marginTop:"var(--space-lg)",display:"flex",flexWrap:"wrap",gap:"var(--space-sm)",justifyContent:"center"},children:Ye.slice(1,7).map(h=>r("button",{class:"btn btn-secondary",onClick:()=>{O(h.value),_(!0),setTimeout(()=>q(null,1),100)},children:h.label},h.value))})]})]})}const ye=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[r("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),r("polyline",{points:"7 10 12 15 17 10"}),r("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),ur=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[r("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),r("polyline",{points:"14 2 14 8 20 8"})]}),tt=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[r("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),r("polyline",{points:"12 19 5 12 12 5"})]}),hr=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.35-4.35"})]}),pr=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[r("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),r("polyline",{points:"15 3 21 3 21 9"}),r("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]});function rt(e){if(!e)return"Unknown size";const t=parseInt(e);if(isNaN(t))return"Unknown size";const n=["B","KB","MB","GB","TB"];let l=0,a=t;for(;a>=1024&&l<n.length-1;)a/=1024,l++;return`${a.toFixed(1)} ${n[l]}`}function be(e){const t=e.split(".");return t.length>1?t.pop().toUpperCase():"?"}const fr={Video:["MP4","WEBM","OGV","AVI","MKV","MOV","MPEG"],Audio:["MP3","OGG","FLAC","WAV","M4A","AAC"],Image:["JPG","JPEG","PNG","GIF","WEBP","BMP","TIFF"],Document:["PDF","TXT","DOC","DOCX","EPUB","MOBI"],Archive:["ZIP","RAR","7Z","TAR","GZ","BZ2"],Data:["XML","JSON","CSV","SQL","SQLITE"]};function nt(e){for(const[t,n]of Object.entries(fr))if(n.includes(e))return t;return"Other"}function _r({identifier:e}){var U,R,E,W,A,N,B,L,Z,q;const{addToast:t}=$t(),[n,l]=w(null),[a,o]=w(!0),[s,u]=w(null),[d,c]=w({}),[p,i]=w(""),[_,f]=w(""),[b,S]=w(!1);Ee(()=>{async function g(){o(!0);try{const k=await D.getItem(e);l(k)}catch(k){u(k.message)}finally{o(!1)}}g()},[e]);const y=$e(()=>n!=null&&n.files?n.files.filter(g=>{if(p&&!g.name.toLowerCase().includes(p.toLowerCase()))return!1;if(_){const k=be(g.name);if(nt(k)!==_)return!1}return!(b&&g.source!=="original")}):[],[n==null?void 0:n.files,p,_,b]),v=$e(()=>{if(!(n!=null&&n.files))return[];const g=new Set;return n.files.forEach(k=>g.add(nt(be(k.name)))),Array.from(g).sort()},[n==null?void 0:n.files]),m=async g=>{c(k=>({...k,[g]:!0}));try{await D.startDownload(e,[g]),t(`ðŸ“¥ Added ${g} to queue`,"success"),c(k=>({...k,[g]:!1}))}catch(k){console.error("Download failed:",k),t("Failed to start download","error"),c(_e=>({..._e,[g]:!1}))}},I=async()=>{c(g=>({...g,__all__:!0}));try{await D.startDownload(e),t(`ðŸ“¥ Added all files from ${e} to queue`,"success"),c(g=>({...g,__all__:!1}))}catch(g){console.error("Download failed:",g),t("Failed to start download","error"),c(k=>({...k,__all__:!1}))}},P=async()=>{c(g=>({...g,__filtered__:!0}));try{const g=y.map(k=>k.name);await D.startDownload(e,g),t(`ðŸ“¥ Added ${g.length} files to queue`,"success"),c(k=>({...k,__filtered__:!1}))}catch(g){console.error("Download failed:",g),t("Failed to start download","error"),c(k=>({...k,__filtered__:!1}))}};if(a)return r("div",{class:"loading-container",children:r("div",{class:"loading-spinner"})});if(s)return r("div",{class:"empty-state",children:[r("h3",{children:"Error loading item"}),r("p",{children:s}),r("a",{href:"/",class:"btn btn-secondary mt-md",children:[r(tt,{})," Back to Search"]})]});const F=p||_||b,O=y.reduce((g,k)=>g+(parseInt(k.size)||0),0);return r("div",{children:[r("div",{style:{display:"flex",gap:"var(--space-md)",marginBottom:"var(--space-lg)"},children:[r("a",{href:"/",class:"btn btn-secondary",children:[r(tt,{})," Back to Search"]}),r("a",{href:`https://archive.org/details/${e}`,target:"_blank",rel:"noopener",class:"btn btn-secondary",children:[r(pr,{})," View on Archive.org"]})]}),r("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:r("div",{class:"card-body",style:{display:"flex",gap:"var(--space-lg)",flexWrap:"wrap"},children:[r("img",{src:`https://archive.org/services/img/${e}`,alt:((U=n==null?void 0:n.metadata)==null?void 0:U.title)||e,style:{width:"200px",height:"150px",objectFit:"cover",borderRadius:"var(--radius-md)",flexShrink:0}}),r("div",{style:{flex:1,minWidth:"250px"},children:[r("h1",{class:"page-title",style:{marginBottom:"var(--space-sm)"},children:((R=n==null?void 0:n.metadata)==null?void 0:R.title)||e}),r("p",{class:"text-secondary",style:{fontFamily:"monospace",fontSize:"0.85rem"},children:e}),((E=n==null?void 0:n.metadata)==null?void 0:E.creator)&&r("p",{style:{marginTop:"var(--space-sm)"},children:["By ",r("strong",{children:n.metadata.creator})]}),((W=n==null?void 0:n.metadata)==null?void 0:W.date)&&r("p",{class:"text-secondary",children:n.metadata.date}),((A=n==null?void 0:n.metadata)==null?void 0:A.description)&&r("p",{style:{marginTop:"var(--space-md)",color:"var(--color-text-secondary)"},children:[n.metadata.description.substring(0,400),n.metadata.description.length>400?"...":""]}),r("div",{style:{marginTop:"var(--space-md)",display:"flex",gap:"var(--space-sm)",flexWrap:"wrap"},children:[((N=n==null?void 0:n.metadata)==null?void 0:N.mediatype)&&r("span",{class:"result-badge",children:n.metadata.mediatype}),((B=n==null?void 0:n.metadata)==null?void 0:B.collection)&&r("span",{class:"result-badge",style:{background:"var(--color-accent-muted)"},children:Array.isArray(n.metadata.collection)?n.metadata.collection[0]:n.metadata.collection})]}),r("div",{style:{marginTop:"var(--space-lg)"},children:r("button",{class:"btn btn-primary btn-lg",onClick:I,disabled:d.__all__,children:[r(ye,{}),d.__all__?"Starting...":"Download All Files"]})})]})]})}),r("div",{class:"card",children:[r("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"var(--space-md)"},children:[r("span",{children:["Files (",((L=n==null?void 0:n.files)==null?void 0:L.length)||0,")"]}),F&&y.length>0&&y.length<(((Z=n==null?void 0:n.files)==null?void 0:Z.length)||0)&&r("button",{class:"btn btn-primary",onClick:P,disabled:d.__filtered__,style:{fontSize:"0.85rem"},children:[r(ye,{}),"Download ",y.length," Filtered (",rt(O),")"]})]}),r("div",{style:{padding:"var(--space-md)",borderBottom:"1px solid var(--color-border)",display:"flex",gap:"var(--space-md)",flexWrap:"wrap",alignItems:"center"},children:[r("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",flex:"1 1 200px"},children:[r(hr,{}),r("input",{type:"text",class:"form-input",placeholder:"Search files...",value:p,onInput:g=>i(g.target.value),style:{margin:0}})]}),r("select",{class:"form-input",value:_,onChange:g=>f(g.target.value),style:{margin:0,width:"auto"},children:[r("option",{value:"",children:"All Types"}),v.map(g=>r("option",{value:g,children:g},g))]}),r("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[r("input",{type:"checkbox",checked:b,onChange:g=>S(g.target.checked)}),"Original files only"]}),F&&r("span",{class:"text-secondary",children:["Showing ",y.length," of ",(q=n==null?void 0:n.files)==null?void 0:q.length]})]}),r("div",{class:"card-body",style:{padding:0},children:r("div",{class:"job-list",children:y.length===0?r("div",{class:"empty-state",style:{padding:"var(--space-xl)"},children:r("p",{children:"No files match your filters"})}):y.map(g=>r("div",{class:"job-item",children:[r("div",{class:"job-icon",children:r(ur,{})}),r("div",{class:"job-info",style:{minWidth:0},children:[r("div",{class:"job-title",style:{wordBreak:"break-all"},children:g.name}),r("div",{class:"job-subtitle",children:[rt(g.size)," â€¢ ",g.format||be(g.name),g.source&&r("span",{style:{marginLeft:"8px",opacity:.7},children:["(",g.source,")"]})]})]}),r("button",{class:"btn btn-secondary btn-icon",onClick:()=>m(g.name),disabled:d[g.name],title:"Download",children:r(ye,{})})]},g.name))})})]})]})}const lt=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[r("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),r("polyline",{points:"7 10 12 15 17 10"}),r("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),gr=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),vr=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:r("polyline",{points:"20 6 9 17 4 12"})});function Te(e){if(!e&&e!==0)return"";const t=["B","KB","MB","GB","TB"];let n=0,l=e;for(;l>=1024&&n<t.length-1;)l/=1024,n++;return`${l.toFixed(1)} ${t[n]}`}function mr(e){return!e||e<=0?"":`${Te(e)}/s`}function yr(){const[e,t]=w([]),[n,l]=w(!0);Ee(()=>{async function d(){try{const p=await D.getDownloads();t(p)}catch(p){console.error("Failed to load downloads:",p)}finally{l(!1)}}return d(),ar(p=>{t(i=>{const _=i.findIndex(f=>f.id===p.id);if(_>=0){const f=[...i];return f[_]=p,f}return[p,...i]})})},[]);const a=async d=>{try{await D.cancelDownload(d)}catch(c){console.error("Failed to cancel:",c)}},o=d=>({pending:"status-pending",running:"status-running",completed:"status-completed",failed:"status-failed",cancelled:"status-failed"})[d]||"status-pending",s=async()=>{try{await D.clearDownloads(),t(d=>d.filter(c=>c.status==="pending"||c.status==="running"))}catch(d){console.error("Failed to clear downloads:",d)}},u=e.some(d=>d.status==="completed"||d.status==="failed"||d.status==="cancelled");return r("div",{children:[r("div",{class:"page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r("div",{children:[r("h1",{class:"page-title",children:"Downloads"}),r("p",{class:"page-subtitle",children:"Manage your download queue"})]}),u&&r("button",{class:"btn btn-secondary",onClick:s,children:"ðŸ—‘ï¸ Clear History"})]}),n?r("div",{class:"loading-container",children:r("div",{class:"loading-spinner"})}):e.length>0?r("div",{class:"job-list",children:e.map(d=>r("div",{class:"job-item",children:[r("div",{class:"job-icon",children:d.status==="completed"?r(vr,{}):r(lt,{})}),r("div",{class:"job-info",style:{flex:1},children:[r("div",{class:"job-title",children:d.filename||"All files"}),r("div",{class:"job-subtitle",children:[d.identifier,d.error&&` â€¢ ${d.error}`]}),d.status==="running"&&r("div",{style:{marginTop:"var(--space-sm)"},children:[r("div",{class:"progress-bar",children:r("div",{class:"progress-fill",style:{width:`${d.progress}%`}})}),r("div",{style:{marginTop:"4px",fontSize:"0.75rem",color:"var(--color-text-secondary)",display:"flex",justifyContent:"space-between",gap:"var(--space-md)"},children:[r("span",{children:[d.progress.toFixed(1),"%",d.downloaded_bytes&&d.total_bytes&&r(j,{children:[" â€¢ ",Te(d.downloaded_bytes)," / ",Te(d.total_bytes)]})]}),d.speed>0&&r("span",{children:mr(d.speed)})]})]})]}),r("div",{class:"job-status",children:[r("span",{class:`status-badge ${o(d.status)}`,children:d.status}),(d.status==="pending"||d.status==="running")&&r("button",{class:"btn btn-secondary btn-icon",onClick:()=>a(d.id),title:"Cancel",children:r(gr,{})})]})]},d.id))}):r("div",{class:"empty-state",children:[r(lt,{}),r("h3",{children:"No Downloads"}),r("p",{children:"Start by searching for items and downloading files"}),r("a",{href:"/",class:"btn btn-primary mt-md",children:"Search Archive"})]})]})}const br=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:r("polyline",{points:"20 6 9 17 4 12"})}),wr=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),xr=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[r("polyline",{points:"23 4 23 10 17 10"}),r("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),kr=()=>r("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:r("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})});function Cr(){const[e,t]=w(null),[n,l]=w(!0),[a,o]=w(""),[s,u]=w(""),[d,c]=w(!1),[p,i]=w(null),[_,f]=w(!1),b=async()=>{l(!0),i(null);try{const v=await D.getAuthStatus();t(v),v.email&&!a&&o(v.email)}catch(v){console.error("Failed to load status:",v),i({type:"error",text:"Failed to check configuration status"})}finally{l(!1)}};Ee(()=>{b()},[]);const S=async v=>{if(v.preventDefault(),!a||!s){i({type:"error",text:"Email and password are required"});return}c(!0),i(null);try{const m=await D.configure(a,s);if(m.success){u(""),i({type:"success",text:"Configuration saved! Verifying..."}),f(!0),await new Promise(P=>setTimeout(P,1e3));const I=await D.getAuthStatus();I.configured?(t(I),i({type:"success",text:"âœ“ Login successful! Configuration verified."})):i({type:"warning",text:"Configuration saved but could not verify. Check credentials."}),f(!1)}else throw new Error(m.message||"Configuration failed")}catch(m){i({type:"error",text:m.message||"Login failed. Check your credentials."}),c(!1),f(!1);return}c(!1)},y=async()=>{f(!0),i(null);try{const v=await D.getAuthStatus();v.configured?(t(v),i({type:"success",text:"âœ“ Configuration is valid!"})):i({type:"error",text:"Not configured or credentials invalid"})}catch{i({type:"error",text:"Failed to verify configuration"})}f(!1)};return n?r("div",{class:"loading-container",children:r("div",{class:"loading-spinner"})}):r("div",{children:[r("div",{class:"page-header",children:[r("h1",{class:"page-title",children:"Settings"}),r("p",{class:"page-subtitle",children:"Configure your Internet Archive account"})]}),r("div",{class:"card",children:[r("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r("span",{children:"Account Configuration"}),r("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[r("button",{class:"btn btn-secondary",onClick:y,disabled:_,style:{padding:"4px 12px",fontSize:"0.85rem"},children:[r(kr,{})," ",_?"Verifying...":"Test Login"]}),r("button",{class:"btn btn-secondary btn-icon",onClick:b,title:"Refresh status",style:{padding:"4px 8px"},children:r(xr,{})})]})]}),r("div",{class:"card-body",children:[r("div",{class:"flex items-center gap-md",style:{marginBottom:"var(--space-lg)",padding:"var(--space-md)",background:e!=null&&e.configured?"rgba(63, 185, 80, 0.1)":"rgba(248, 81, 73, 0.1)",borderRadius:"var(--radius-md)",border:`1px solid ${e!=null&&e.configured?"rgba(63, 185, 80, 0.3)":"rgba(248, 81, 73, 0.3)"}`},children:[r("div",{style:{width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:e!=null&&e.configured?"rgba(63, 185, 80, 0.2)":"rgba(248, 81, 73, 0.2)",color:e!=null&&e.configured?"var(--color-success)":"var(--color-error)"},children:e!=null&&e.configured?r(br,{}):r(wr,{})}),r("div",{style:{flex:1},children:[r("div",{style:{fontWeight:600,fontSize:"1.1rem"},children:e!=null&&e.configured?"âœ“ Connected to Archive.org":"âœ— Not Configured"}),e!=null&&e.email?r("div",{class:"text-secondary",children:["Logged in as: ",e.email]}):e!=null&&e.configured?r("div",{class:"text-secondary",style:{fontStyle:"italic"},children:"API keys saved"}):r("div",{class:"text-secondary",children:"Enter your archive.org credentials below"})]})]}),p&&r("div",{style:{padding:"var(--space-md)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-lg)",background:p.type==="success"?"rgba(63, 185, 80, 0.2)":p.type==="warning"?"rgba(210, 153, 34, 0.2)":"rgba(248, 81, 73, 0.2)",color:p.type==="success"?"var(--color-success)":p.type==="warning"?"var(--color-warning)":"var(--color-error)",border:`1px solid ${p.type==="success"?"rgba(63, 185, 80, 0.3)":p.type==="warning"?"rgba(210, 153, 34, 0.3)":"rgba(248, 81, 73, 0.3)"}`},children:p.text}),r("form",{onSubmit:S,children:[r("div",{class:"form-group",children:[r("label",{class:"form-label",children:"Archive.org Email *"}),r("input",{type:"email",class:"form-input",placeholder:"your@email.com",value:a,onInput:v=>o(v.target.value),required:!0,autoComplete:"email"})]}),r("div",{class:"form-group",children:[r("label",{class:"form-label",children:"Password *"}),r("input",{type:"password",class:"form-input",placeholder:e!=null&&e.configured?"Enter password to update":"Your archive.org password",value:s,onInput:v=>u(v.target.value),required:!0,autoComplete:"current-password"}),r("p",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:"Your password is sent directly to archive.org and stored locally in /config/ia.ini"})]}),r("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:d||_||!a||!s,style:{width:"100%"},children:d?"Saving...":_?"Verifying...":e!=null&&e.configured?"ðŸ”„ Update Configuration":"ðŸ” Login & Save"})]})]})]}),r("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"var(--space-lg)",marginTop:"var(--space-lg)"},children:[r("div",{class:"card",children:[r("div",{class:"card-header",children:"ðŸ“¥ Downloads"}),r("div",{class:"card-body",children:r("p",{class:"text-secondary",children:["Downloads are saved to the ",r("code",{children:"/data"})," volume, which maps to your local ",r("code",{children:"./data"})," directory."]})})]}),r("div",{class:"card",children:[r("div",{class:"card-header",children:"ðŸ” Configuration"}),r("div",{class:"card-body",children:r("p",{class:"text-secondary",children:["Credentials are stored in ",r("code",{children:"/config/ia.ini"}),". This file persists across container restarts."]})})]})]})]})}function Sr(){return r(lr,{children:r(rr,{children:r(Ct,{children:[r(et,{path:"/"}),r(et,{path:"/search"}),r(_r,{path:"/item/:identifier"}),r(yr,{path:"/downloads"}),r(Cr,{path:"/settings"})]})})})}Et(r(Sr,{}),document.getElementById("app"));
