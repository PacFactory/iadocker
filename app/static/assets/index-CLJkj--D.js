(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var re,k,Xe,V,Be,et,tt,nt,Ce,ge,ve,rt,te={},lt=[],yt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function U(e,t){for(var r in t)e[r]=t[r];return e}function Se(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ot(e,t,r){var l,a,o,s={};for(o in t)o=="key"?l=t[o]:o=="ref"?a=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?re.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]===void 0&&(s[o]=e.defaultProps[o]);return X(e,s,l,a,null)}function X(e,t,r,l,a){var o={type:e,props:t,key:r,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++Xe,__i:-1,__u:0};return a==null&&k.vnode!=null&&k.vnode(o),o}function q(e){return e.children}function ee(e,t){this.props=e,this.context=t}function Q(e,t){if(t==null)return e.__?Q(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Q(e):null}function at(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return at(e)}}function me(e){(!e.__d&&(e.__d=!0)&&V.push(e)&&!de.__r++||Be!=k.debounceRendering)&&((Be=k.debounceRendering)||et)(de)}function de(){for(var e,t,r,l,a,o,s,d=1;V.length;)V.length>d&&V.sort(tt),e=V.shift(),d=V.length,e.__d&&(r=void 0,l=void 0,a=(l=(t=e).__v).__e,o=[],s=[],t.__P&&((r=U({},l)).__v=l.__v+1,k.vnode&&k.vnode(r),$e(t.__P,r,l,t.__n,t.__P.namespaceURI,32&l.__u?[a]:null,o,a??Q(l),!!(32&l.__u),s),r.__v=l.__v,r.__.__k[r.__i]=r,ct(o,r,s),l.__e=l.__=null,r.__e!=a&&at(r)));de.__r=0}function it(e,t,r,l,a,o,s,d,u,c,_){var i,f,p,x,b,y,g,m=l&&l.__k||lt,I=t.length;for(u=bt(r,t,m,u,I),i=0;i<I;i++)(p=r.__k[i])!=null&&(f=p.__i==-1?te:m[p.__i]||te,p.__i=i,y=$e(e,p,f,a,o,s,d,u,c,_),x=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Ie(f.ref,null,p),_.push(p.ref,p.__c||x,p)),b==null&&x!=null&&(b=x),(g=!!(4&p.__u))||f.__k===p.__k?u=st(p,u,e,g):typeof p.type=="function"&&y!==void 0?u=y:x&&(u=x.nextSibling),p.__u&=-7);return r.__e=b,u}function bt(e,t,r,l,a){var o,s,d,u,c,_=r.length,i=_,f=0;for(e.__k=new Array(a),o=0;o<a;o++)(s=t[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[o]=X(null,s,null,null,null):le(s)?s=e.__k[o]=X(q,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[o]=X(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[o]=s,u=o+f,s.__=e,s.__b=e.__b+1,d=null,(c=s.__i=wt(s,r,u,i))!=-1&&(i--,(d=r[c])&&(d.__u|=2)),d==null||d.__v==null?(c==-1&&(a>_?f--:a<_&&f++),typeof s.type!="function"&&(s.__u|=4)):c!=u&&(c==u-1?f--:c==u+1?f++:(c>u?f--:f++,s.__u|=4))):e.__k[o]=null;if(i)for(o=0;o<_;o++)(d=r[o])!=null&&!(2&d.__u)&&(d.__e==l&&(l=Q(d)),ut(d,d));return l}function st(e,t,r,l){var a,o;if(typeof e.type=="function"){for(a=e.__k,o=0;a&&o<a.length;o++)a[o]&&(a[o].__=e,t=st(a[o],t,r,l));return t}e.__e!=t&&(l&&(t&&e.type&&!t.parentNode&&(t=Q(e)),r.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function ye(e,t){return t=t||[],e==null||typeof e=="boolean"||(le(e)?e.some(function(r){ye(r,t)}):t.push(e)),t}function wt(e,t,r,l){var a,o,s,d=e.key,u=e.type,c=t[r],_=c!=null&&(2&c.__u)==0;if(c===null&&d==null||_&&d==c.key&&u==c.type)return r;if(l>(_?1:0)){for(a=r-1,o=r+1;a>=0||o<t.length;)if((c=t[s=a>=0?a--:o++])!=null&&!(2&c.__u)&&d==c.key&&u==c.type)return s}return-1}function Ee(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||yt.test(t)?r:r+"px"}function ie(e,t,r,l,a){var o,s;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof l=="string"&&(e.style.cssText=l=""),l)for(t in l)r&&t in r||Ee(e.style,t,"");if(r)for(t in r)l&&r[t]==l[t]||Ee(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(nt,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=r,r?l?r.u=l.u:(r.u=Ce,e.addEventListener(t,o?ve:ge,o)):e.removeEventListener(t,o?ve:ge,o);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function Le(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=Ce++;else if(t.t<r.u)return;return r(k.event?k.event(t):t)}}}function $e(e,t,r,l,a,o,s,d,u,c){var _,i,f,p,x,b,y,g,m,I,A,R,E,H,L,N,T,D=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),o=[d=t.__e=r.__e]),(_=k.__b)&&_(t);e:if(typeof D=="function")try{if(g=t.props,m="prototype"in D&&D.prototype.render,I=(_=D.contextType)&&l[_.__c],A=_?I?I.props.value:_.__:l,r.__c?y=(i=t.__c=r.__c).__=i.__E:(m?t.__c=i=new D(g,A):(t.__c=i=new ee(g,A),i.constructor=D,i.render=kt),I&&I.sub(i),i.state||(i.state={}),i.__n=l,f=i.__d=!0,i.__h=[],i._sb=[]),m&&i.__s==null&&(i.__s=i.state),m&&D.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=U({},i.__s)),U(i.__s,D.getDerivedStateFromProps(g,i.__s))),p=i.props,x=i.state,i.__v=t,f)m&&D.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),m&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(m&&D.getDerivedStateFromProps==null&&g!==p&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(g,A),t.__v==r.__v||!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(g,i.__s,A)===!1){for(t.__v!=r.__v&&(i.props=g,i.state=i.__s,i.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(P){P&&(P.__=t)}),R=0;R<i._sb.length;R++)i.__h.push(i._sb[R]);i._sb=[],i.__h.length&&s.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(g,i.__s,A),m&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(p,x,b)})}if(i.context=A,i.props=g,i.__P=e,i.__e=!1,E=k.__r,H=0,m){for(i.state=i.__s,i.__d=!1,E&&E(t),_=i.render(i.props,i.state,i.context),L=0;L<i._sb.length;L++)i.__h.push(i._sb[L]);i._sb=[]}else do i.__d=!1,E&&E(t),_=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++H<25);i.state=i.__s,i.getChildContext!=null&&(l=U(U({},l),i.getChildContext())),m&&!f&&i.getSnapshotBeforeUpdate!=null&&(b=i.getSnapshotBeforeUpdate(p,x)),N=_,_!=null&&_.type===q&&_.key==null&&(N=dt(_.props.children)),d=it(e,le(N)?N:[N],t,r,l,a,o,s,d,u,c),i.base=t.__e,t.__u&=-161,i.__h.length&&s.push(i),y&&(i.__E=i.__=null)}catch(P){if(t.__v=null,u||o!=null)if(P.then){for(t.__u|=u?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;o[o.indexOf(d)]=null,t.__e=d}else{for(T=o.length;T--;)Se(o[T]);be(t)}else t.__e=r.__e,t.__k=r.__k,P.then||be(t);k.__e(P,t,r)}else o==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):d=t.__e=xt(r.__e,t,r,l,a,o,s,u,c);return(_=k.diffed)&&_(t),128&t.__u?void 0:d}function be(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(be)}function ct(e,t,r){for(var l=0;l<r.length;l++)Ie(r[l],r[++l],r[++l]);k.__c&&k.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(o){o.call(a)})}catch(o){k.__e(o,a.__v)}})}function dt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:le(e)?e.map(dt):U({},e)}function xt(e,t,r,l,a,o,s,d,u){var c,_,i,f,p,x,b,y=r.props||te,g=t.props,m=t.type;if(m=="svg"?a="http://www.w3.org/2000/svg":m=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((p=o[c])&&"setAttribute"in p==!!m&&(m?p.localName==m:p.nodeType==3)){e=p,o[c]=null;break}}if(e==null){if(m==null)return document.createTextNode(g);e=document.createElementNS(a,m,g.is&&g),d&&(k.__m&&k.__m(t,o),d=!1),o=null}if(m==null)y===g||d&&e.data==g||(e.data=g);else{if(o=o&&re.call(e.childNodes),!d&&o!=null)for(y={},c=0;c<e.attributes.length;c++)y[(p=e.attributes[c]).name]=p.value;for(c in y)if(p=y[c],c!="children"){if(c=="dangerouslySetInnerHTML")i=p;else if(!(c in g)){if(c=="value"&&"defaultValue"in g||c=="checked"&&"defaultChecked"in g)continue;ie(e,c,null,p,a)}}for(c in g)p=g[c],c=="children"?f=p:c=="dangerouslySetInnerHTML"?_=p:c=="value"?x=p:c=="checked"?b=p:d&&typeof p!="function"||y[c]===p||ie(e,c,p,y[c],a);if(_)d||i&&(_.__html==i.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(i&&(e.innerHTML=""),it(t.type=="template"?e.content:e,le(f)?f:[f],t,r,l,m=="foreignObject"?"http://www.w3.org/1999/xhtml":a,o,s,o?o[0]:r.__k&&Q(r,0),d,u),o!=null)for(c=o.length;c--;)Se(o[c]);d||(c="value",m=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[c]||m=="progress"&&!x||m=="option"&&x!=y[c])&&ie(e,c,x,y[c],a),c="checked",b!=null&&b!=e[c]&&ie(e,c,b,y[c],a))}return e}function Ie(e,t,r){try{if(typeof e=="function"){var l=typeof e.__u=="function";l&&e.__u(),l&&t==null||(e.__u=e(t))}else e.current=t}catch(a){k.__e(a,r)}}function ut(e,t,r){var l,a;if(k.unmount&&k.unmount(e),(l=e.ref)&&(l.current&&l.current!=e.__e||Ie(l,null,t)),(l=e.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(o){k.__e(o,t)}l.base=l.__P=null}if(l=e.__k)for(a=0;a<l.length;a++)l[a]&&ut(l[a],t,r||typeof e.type!="function");r||Se(e.__e),e.__c=e.__=e.__e=void 0}function kt(e,t,r){return this.constructor(e,r)}function Ct(e,t,r){var l,a,o,s;t==document&&(t=document.documentElement),k.__&&k.__(e,t),a=(l=!1)?null:t.__k,o=[],s=[],$e(t,e=t.__k=ot(q,null,[e]),a||te,te,t.namespaceURI,a?null:t.firstChild?re.call(t.childNodes):null,o,a?a.__e:t.firstChild,l,s),ct(o,e,s)}function St(e,t,r){var l,a,o,s,d=U({},e.props);for(o in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)o=="key"?l=t[o]:o=="ref"?a=t[o]:d[o]=t[o]===void 0&&s!=null?s[o]:t[o];return arguments.length>2&&(d.children=arguments.length>3?re.call(arguments,2):r),X(e.type,d,l||e.key,a||e.ref,null)}function $t(e){function t(r){var l,a;return this.getChildContext||(l=new Set,(a={})[t.__c]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){l=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&l.forEach(function(s){s.__e=!0,me(s)})},this.sub=function(o){l.add(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){l&&l.delete(o),s&&s.call(o)}}),r.children}return t.__c="__cC"+rt++,t.__=e,t.Provider=t.__l=(t.Consumer=function(r,l){return r.children(l)}).contextType=t,t}re=lt.slice,k={__e:function(e,t,r,l){for(var a,o,s;t=t.__;)if((a=t.__c)&&!a.__)try{if((o=a.constructor)&&o.getDerivedStateFromError!=null&&(a.setState(o.getDerivedStateFromError(e)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,l||{}),s=a.__d),s)return a.__E=a}catch(d){e=d}throw e}},Xe=0,ee.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof e=="function"&&(e=e(U({},r),this.props)),e&&U(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),me(this))},ee.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),me(this))},ee.prototype.render=q,V=[],et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tt=function(e,t){return e.__v.__b-t.__v.__b},de.__r=0,nt=/(PointerCapture)$|Capture$/i,Ce=0,ge=Le(!1),ve=Le(!0),rt=0;var It=0;function n(e,t,r,l,a,o){t||(t={});var s,d,u=t;if("ref"in u)for(d in u={},t)d=="ref"?s=t[d]:u[d]=t[d];var c={type:e,props:u,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--It,__i:-1,__u:0,__source:a,__self:o};if(typeof e=="function"&&(s=e.defaultProps))for(d in s)u[d]===void 0&&(u[d]=s[d]);return k.vnode&&k.vnode(c),c}var ne,S,he,Me,we=0,ht=[],$=k,Fe=$.__b,Ne=$.__r,Oe=$.diffed,Ue=$.__c,Re=$.unmount,He=$.__;function Ae(e,t){$.__h&&$.__h(S,e,we||t),we=0;var r=S.__H||(S.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function w(e){return we=1,At(_t,e)}function At(e,t,r){var l=Ae(ne++,2);if(l.t=e,!l.__c&&(l.__=[_t(void 0,t),function(d){var u=l.__N?l.__N[0]:l.__[0],c=l.t(u,d);u!==c&&(l.__N=[c,l.__[1]],l.__c.setState({}))}],l.__c=S,!S.__f)){var a=function(d,u,c){if(!l.__c.__H)return!0;var _=l.__c.__H.__.filter(function(f){return!!f.__c});if(_.every(function(f){return!f.__N}))return!o||o.call(this,d,u,c);var i=l.__c.props!==d;return _.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(i=!0)}}),o&&o.call(this,d,u,c)||i};S.__f=!0;var o=S.shouldComponentUpdate,s=S.componentWillUpdate;S.componentWillUpdate=function(d,u,c){if(this.__e){var _=o;o=void 0,a(d,u,c),o=_}s&&s.call(this,d,u,c)},S.shouldComponentUpdate=a}return l.__N||l.__}function De(e,t){var r=Ae(ne++,3);!$.__s&&pt(r.__H,t)&&(r.__=e,r.u=t,S.__H.__h.push(r))}function We(e,t){var r=Ae(ne++,7);return pt(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function Dt(){for(var e;e=ht.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ce),e.__H.__h.forEach(xe),e.__H.__h=[]}catch(t){e.__H.__h=[],$.__e(t,e.__v)}}$.__b=function(e){S=null,Fe&&Fe(e)},$.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),He&&He(e,t)},$.__r=function(e){Ne&&Ne(e),ne=0;var t=(S=e.__c).__H;t&&(he===S?(t.__h=[],S.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(ce),t.__h.forEach(xe),t.__h=[],ne=0)),he=S},$.diffed=function(e){Oe&&Oe(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ht.push(t)!==1&&Me===$.requestAnimationFrame||((Me=$.requestAnimationFrame)||Tt)(Dt)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),he=S=null},$.__c=function(e,t){t.some(function(r){try{r.__h.forEach(ce),r.__h=r.__h.filter(function(l){return!l.__||xe(l)})}catch(l){t.some(function(a){a.__h&&(a.__h=[])}),t=[],$.__e(l,r.__v)}}),Ue&&Ue(e,t)},$.unmount=function(e){Re&&Re(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(l){try{ce(l)}catch(a){t=a}}),r.__H=void 0,t&&$.__e(t,r.__v))};var je=typeof requestAnimationFrame=="function";function Tt(e){var t,r=function(){clearTimeout(l),je&&cancelAnimationFrame(t),setTimeout(e)},l=setTimeout(r,35);je&&(t=requestAnimationFrame(r))}function ce(e){var t=S,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),S=t}function xe(e){var t=S;e.__c=e.__(),S=t}function pt(e,t){return!e||e.length!==t.length||t.some(function(r,l){return r!==e[l]})}function _t(e,t){return typeof t=="function"?t(e):t}var Pt={};function se(e,t){for(var r in t)e[r]=t[r];return e}function Bt(e,t,r){var l,a=/(?:\?([^#]*))?(#.*)?$/,o=e.match(a),s={};if(o&&o[1])for(var d=o[1].split("&"),u=0;u<d.length;u++){var c=d[u].split("=");s[decodeURIComponent(c[0])]=decodeURIComponent(c.slice(1).join("="))}e=ke(e.replace(a,"")),t=ke(t||"");for(var _=Math.max(e.length,t.length),i=0;i<_;i++)if(t[i]&&t[i].charAt(0)===":"){var f=t[i].replace(/(^:|[+*?]+$)/g,""),p=(t[i].match(/[+*?]+$/)||Pt)[0]||"",x=~p.indexOf("+"),b=~p.indexOf("*"),y=e[i]||"";if(!y&&!b&&(p.indexOf("?")<0||x)){l=!1;break}if(s[f]=decodeURIComponent(y),x||b){s[f]=e.slice(i).map(decodeURIComponent).join("/");break}}else if(t[i]!==e[i]){l=!1;break}return(r.default===!0||l!==!1)&&s}function Et(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function Lt(e,t){return e.index=t,e.rank=function(r){return r.props.default?0:ke(r.props.path).map(Mt).join("")}(e),e.props}function ke(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Mt(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Ft={},G=[],ze=[],M=null,ft={url:Te()},Nt=$t(ft);function Te(){var e;return""+((e=M&&M.location?M.location:M&&M.getCurrentLocation?M.getCurrentLocation():typeof location<"u"?location:Ft).pathname||"")+(e.search||"")}function z(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(r){for(var l=G.length;l--;)if(G[l].canRoute(r))return!0;return!1}(e)&&function(r,l){l===void 0&&(l="push"),M&&M[l]?M[l](r):typeof history<"u"&&history[l+"State"]&&history[l+"State"](null,null,r)}(e,t?"replace":"push"),gt(e)}function gt(e){for(var t=!1,r=0;r<G.length;r++)G[r].routeTo(e)&&(t=!0);return t}function Ot(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),r=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return z(t)}}function Ut(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Rt(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Ot(t))return Ut(e)}while(t=t.parentNode)}}var Ve=!1;function vt(e){e.history&&(M=e.history),this.state={url:e.url||Te()}}se(vt.prototype=new ee,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=ye(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Ve||(Ve=!0,M||addEventListener("popstate",function(){gt(Te())}),addEventListener("click",Rt)),G.push(this),M&&(this.u=M.listen(function(t){var r=t.location||t;e.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),G.splice(G.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(Lt).sort(Et);for(var r=0;r<e.length;r++){var l=e[r],a=Bt(t,l.props.path,l.props);if(a)return[l,a]}},render:function(e,t){var r,l,a=e.onChange,o=t.url,s=this.c,d=this.g(ye(e.children),o);if(d&&(l=St(d[0],se(se({url:o,matches:r=d[1]},r),{key:void 0,ref:void 0}))),o!==(s&&s.url)){se(ft,s=this.c={url:o,previous:s&&s.url,current:l,path:l?l.props.path:null,matches:r}),s.router=this,s.active=l?[l]:[];for(var u=ze.length;u--;)ze[u]({});typeof a=="function"&&a(s)}return ot(Nt.Provider,{value:s},l)}});const Ht="v0.2.2",Wt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})]}),jt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),zt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[n("circle",{cx:"12",cy:"12",r:"3"}),n("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),Vt=()=>n("svg",{viewBox:"0 0 100 100",width:"28",height:"28",children:[n("rect",{x:"10",y:"70",width:"80",height:"20",fill:"#58a6ff",rx:"4"}),n("rect",{x:"20",y:"45",width:"60",height:"20",fill:"#58a6ff",rx:"4"}),n("rect",{x:"30",y:"20",width:"40",height:"20",fill:"#58a6ff",rx:"4"})]});function qt({children:e,url:t}){const r=[{path:"/",icon:Wt,label:"Search"},{path:"/downloads",icon:jt,label:"Downloads"},{path:"/settings",icon:zt,label:"Settings"}],l=a=>a==="/"?t==="/"||t==="/search"||(t==null?void 0:t.startsWith("/item/")):t==null?void 0:t.startsWith(a);return n("div",{class:"layout",children:[n("aside",{class:"sidebar",children:[n("div",{class:"sidebar-header",children:n("div",{class:"sidebar-logo",children:[n(Vt,{}),n("span",{children:"IA Docker"})]})}),n("nav",{class:"sidebar-nav",children:r.map(a=>n("a",{class:`nav-item ${l(a.path)?"active":""}`,href:a.path,children:[n(a.icon,{}),n("span",{children:a.label})]},a.path))}),n("div",{class:"sidebar-footer",children:n("span",{class:"version-badge",children:["IADocker ",Ht]})})]}),n("main",{class:"main-content",children:e})]})}const mt="/api";async function O(e,t={}){const r=await fetch(`${mt}${e}`,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok){const l=await r.json().catch(()=>({detail:"Request failed"}));throw new Error(l.detail||"Request failed")}return r.json()}const B={getAuthStatus:()=>O("/auth/status"),configure:(e,t)=>O("/auth/configure",{method:"POST",body:JSON.stringify({email:e,password:t})}),search:(e,t={})=>{const r=new URLSearchParams({q:e,...t});return O(`/search?${r}`)},getItem:e=>O(`/items/${e}`),getItemFiles:e=>O(`/items/${e}/files`),startDownload:(e,t,r,l)=>O("/downloads",{method:"POST",body:JSON.stringify({identifier:e,files:t,glob:r,format:l})}),getDownloads:()=>O("/downloads"),cancelDownload:e=>O(`/downloads/${e}`,{method:"DELETE"}),getUploads:()=>O("/uploads"),cancelUpload:e=>O(`/uploads/${e}`,{method:"DELETE"})};function Gt(e){const t=new EventSource(`${mt}/downloads/events`);return t.addEventListener("progress",r=>{e(JSON.parse(r.data))}),t.onerror=()=>{t.close()},()=>t.close()}const pe=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})]}),Kt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",children:n("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),qe=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",children:[n("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),n("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),Qt=({open:e})=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",style:{transform:e?"rotate(180deg)":"none",transition:"transform 0.2s"},children:n("polyline",{points:"6 9 12 15 18 9"})}),Zt=[{value:"",label:"All Types"},{value:"texts",label:"üìö Texts"},{value:"movies",label:"üé¨ Movies"},{value:"audio",label:"üéµ Audio"},{value:"software",label:"üíø Software"},{value:"image",label:"üñºÔ∏è Images"},{value:"data",label:"üìä Data"},{value:"web",label:"üåê Web Archives"},{value:"etree",label:"üé∏ Live Music"},{value:"collection",label:"üìÅ Collections"}],Ge=[{value:"",label:"All Collections"},{value:"opensource_movies",label:"Open Source Movies"},{value:"opensource_audio",label:"Open Source Audio"},{value:"prelinger",label:"Prelinger Archives"},{value:"internetarchivebooks",label:"Internet Archive Books"},{value:"oldtimeradio",label:"Old Time Radio"},{value:"computerphotos",label:"Computer Photos"},{value:"librivoxaudio",label:"LibriVox Audiobooks"},{value:"tvnews",label:"TV News Archive"},{value:"softwarelibrary",label:"Software Library"},{value:"classicpcgames",label:"Classic PC Games"},{value:"msdos_games",label:"MS-DOS Games"},{value:"consolelivingroom",label:"Console Living Room"}],Yt=[{value:"",label:"Relevance"},{value:"-downloads",label:"Most Downloaded"},{value:"-week",label:"Trending This Week"},{value:"-publicdate",label:"Newest First"},{value:"publicdate",label:"Oldest First"},{value:"titleSorter",label:"Title A-Z"},{value:"-titleSorter",label:"Title Z-A"}];function J(e){const t=e.trim(),r=/archive\.org\/download\/([^\/\?\#\s]+)\/(.+?)(?:\?|#|$)/,l=t.match(r);if(l)return{identifier:l[1],filename:decodeURIComponent(l[2])};const a=[/archive\.org\/details\/([^\/\?\#\s]+)/,/archive\.org\/download\/([^\/\?\#\s]+)\/?$/,/archive\.org\/metadata\/([^\/\?\#\s]+)/,/archive\.org\/embed\/([^\/\?\#\s]+)/];for(const o of a){const s=t.match(o);if(s)return{identifier:s[1],filename:null}}return/^[a-zA-Z0-9_\-\.]+$/.test(t)&&t.length>2&&t.length<200?{identifier:t,filename:null}:null}function Jt(e){const t=e.split(/[\n\r]+/).map(l=>l.trim()).filter(l=>l.length>0),r=[];for(const l of t){const a=J(l);a&&r.push(a)}return r}function Ke(){const[e,t]=w(""),[r,l]=w([]),[a,o]=w(!1),[s,d]=w(0),[u,c]=w(1),[_,i]=w(!1),[f,p]=w(!1),[x,b]=w(""),[y,g]=w(""),[m,I]=w(""),[A,R]=w(""),[E,H]=w(""),[L,N]=w(""),T=e.includes(`
`)||e.includes("archive.org")?Jt(e):[],D=T.length>1,P=async(h,F=1)=>{h==null||h.preventDefault();const K=e.trim();if(D){await Z();return}const Y=J(K);if(Y&&K.includes("archive.org"))if(Y.filename){p(!0);try{await B.startDownload(Y.identifier,[Y.filename]),z("/downloads")}catch(j){console.error("Download failed:",j),p(!1)}return}else{z(`/item/${Y.identifier}`);return}if(!(!K&&!m&&!y&&!L)){o(!0),c(F);try{const j={page:F,rows:24};y&&(j.mediatype=y),m&&(j.collection=m),A&&(j.sort=A);let ue=K||"*";E&&(ue+=` AND year:${E}`),L&&(ue+=` AND creator:"${L}"`);const Pe=await B.search(ue,j);l(Pe.results),d(Pe.total)}catch(j){console.error("Search failed:",j)}finally{o(!1)}}},Z=async()=>{if(T.length===0)return;p(!0),b(`Queuing 0/${T.length}...`);let h=0;for(const F of T)try{F.filename?await B.startDownload(F.identifier,[F.filename]):await B.startDownload(F.identifier),h++,b(`Queuing ${h}/${T.length}...`)}catch(K){console.error(`Failed to queue ${F.identifier}:`,K)}b(""),p(!1),z("/downloads")},oe=h=>{z(`/item/${h}`)},ae=async()=>{const h=J(e.trim());if(h)if(h.filename){p(!0);try{await B.startDownload(h.identifier,[h.filename]),z("/downloads")}catch(F){console.error("Download failed:",F),p(!1)}}else z(`/item/${h.identifier}`)},v=()=>{g(""),I(""),R(""),H(""),N("")},C=y||m||A||E||L,W=Math.ceil(s/24);return n("div",{children:[n("div",{class:"page-header",children:[n("h1",{class:"page-title",children:"Search Archive.org"}),n("p",{class:"page-subtitle",children:"Explore millions of items in the Internet Archive"})]}),n("form",{onSubmit:P,class:"search-bar",style:{flexWrap:"wrap",gap:"var(--space-sm)"},children:[n("div",{class:"search-input-wrapper",style:{flex:"1 1 300px"},children:[n(pe,{}),n("input",{type:"text",class:"search-input",placeholder:"Search, paste URL, or enter identifier...",value:e,onInput:h=>t(h.target.value)})]}),n("button",{type:"button",class:`btn ${_||C?"btn-primary":"btn-secondary"}`,onClick:()=>i(!_),style:{display:"flex",alignItems:"center",gap:"6px"},children:[n(Kt,{}),"Filters",C&&n("span",{style:{background:"rgba(255,255,255,0.3)",borderRadius:"50%",width:"18px",height:"18px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center"},children:"!"}),n(Qt,{open:_})]}),n("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:a,children:a?"Searching...":"Search"})]}),D&&n("div",{style:{marginTop:"var(--space-sm)",marginBottom:"var(--space-md)",padding:"var(--space-md)",background:"rgba(88, 166, 255, 0.15)",borderRadius:"var(--radius-md)",border:"1px solid rgba(88, 166, 255, 0.3)"},children:[n("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",marginBottom:"var(--space-sm)"},children:[n(qe,{}),n("strong",{children:"Bulk Download Mode"}),n("span",{class:"result-badge",style:{marginLeft:"auto"},children:[T.length," items"]})]}),n("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)",marginBottom:"var(--space-md)"},children:[T.filter(h=>h.filename).length," specific files, ",T.filter(h=>!h.filename).length," full items"]}),n("div",{style:{display:"flex",gap:"var(--space-sm)",flexWrap:"wrap"},children:[n("button",{class:"btn btn-primary",onClick:Z,disabled:f,children:f?x||"Queuing...":`üì• Download All ${T.length} Items`}),n("button",{class:"btn btn-secondary",onClick:()=>t(""),children:"Clear"})]})]}),!D&&e.trim()&&J(e.trim())&&(()=>{const h=J(e.trim());return n("div",{style:{marginTop:"var(--space-sm)",marginBottom:"var(--space-md)",padding:"var(--space-sm) var(--space-md)",background:h.filename?"rgba(63, 185, 80, 0.15)":"var(--color-accent-muted)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"var(--space-sm)",border:h.filename?"1px solid rgba(63, 185, 80, 0.3)":"none"},children:[n(qe,{}),n("span",{style:{flex:1},children:h.filename?n(q,{children:["Download file: ",n("strong",{children:h.filename})," from ",n("strong",{children:h.identifier})]}):n(q,{children:["Go directly to item: ",n("strong",{children:h.identifier})]})}),n("button",{class:"btn btn-primary",onClick:ae,disabled:f,children:f?"Starting...":h.filename?"üì• Download":"Open Item"})]})})(),_&&n("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:n("div",{class:"card-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"var(--space-md)"},children:[n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Media Type"}),n("select",{class:"form-input",value:y,onChange:h=>g(h.target.value),children:Zt.map(h=>n("option",{value:h.value,children:h.label},h.value))})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Collection"}),n("select",{class:"form-input",value:m,onChange:h=>I(h.target.value),children:Ge.map(h=>n("option",{value:h.value,children:h.label},h.value))})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Sort By"}),n("select",{class:"form-input",value:A,onChange:h=>R(h.target.value),children:Yt.map(h=>n("option",{value:h.value,children:h.label},h.value))})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Year"}),n("input",{type:"text",class:"form-input",placeholder:"e.g. 2020 or 1990-2000",value:E,onInput:h=>H(h.target.value)})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Creator"}),n("input",{type:"text",class:"form-input",placeholder:"Author or creator",value:L,onInput:h=>N(h.target.value)})]}),n("div",{class:"form-group",style:{margin:0,display:"flex",alignItems:"flex-end"},children:n("button",{type:"button",class:"btn btn-secondary",onClick:v,disabled:!C,children:"Clear Filters"})})]})}),r.length>0&&n("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-md)"},children:[n("p",{class:"text-secondary",children:["Found ",s.toLocaleString()," results",C&&" (filtered)"]}),W>1&&n("div",{style:{display:"flex",gap:"var(--space-sm)",alignItems:"center"},children:[n("button",{class:"btn btn-secondary",disabled:u<=1,onClick:()=>P(null,u-1),children:"‚Üê Prev"}),n("span",{class:"text-secondary",children:["Page ",u," of ",W]}),n("button",{class:"btn btn-secondary",disabled:u>=W,onClick:()=>P(null,u+1),children:"Next ‚Üí"})]})]}),a?n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})}):r.length>0?n(q,{children:[n("div",{class:"results-grid",children:r.map(h=>n("div",{class:"result-card",onClick:()=>oe(h.identifier),children:[n("img",{class:"result-thumbnail",src:`https://archive.org/services/img/${h.identifier}`,alt:h.title,loading:"lazy",onError:F=>{F.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%2321262d" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%236e7681" font-size="12">No Image</text></svg>'}}),n("div",{class:"result-info",children:[n("h3",{class:"result-title",children:h.title||h.identifier}),n("div",{class:"result-meta",children:[h.mediatype&&n("span",{class:"result-badge",children:h.mediatype}),h.date&&n("span",{children:h.date.substring(0,10)})]}),h.creator&&n("div",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:typeof h.creator=="string"?h.creator:h.creator[0]})]})]},h.identifier))}),W>1&&n("div",{style:{display:"flex",justifyContent:"center",gap:"var(--space-sm)",marginTop:"var(--space-xl)"},children:[n("button",{class:"btn btn-secondary",disabled:u<=1,onClick:()=>P(null,u-1),children:"‚Üê Previous"}),n("span",{class:"text-secondary",style:{padding:"8px 16px"},children:["Page ",u," of ",W]}),n("button",{class:"btn btn-secondary",disabled:u>=W,onClick:()=>P(null,u+1),children:"Next ‚Üí"})]})]}):e&&!a?n("div",{class:"empty-state",children:[n(pe,{}),n("h3",{children:"No results found"}),n("p",{children:"Try different keywords or adjust filters"})]}):n("div",{class:"empty-state",children:[n(pe,{}),n("h3",{children:"Start Your Search"}),n("p",{children:"Enter a query, paste an archive.org URL, or browse by collection"}),n("div",{style:{marginTop:"var(--space-lg)",display:"flex",flexWrap:"wrap",gap:"var(--space-sm)",justifyContent:"center"},children:Ge.slice(1,7).map(h=>n("button",{class:"btn btn-secondary",onClick:()=>{I(h.value),i(!0),setTimeout(()=>P(null,1),100)},children:h.label},h.value))})]})]})}const _e=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Xt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n("polyline",{points:"14 2 14 8 20 8"})]}),Qe=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),n("polyline",{points:"12 19 5 12 12 5"})]}),en=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})]}),tn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[n("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),n("polyline",{points:"15 3 21 3 21 9"}),n("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]});function Ze(e){if(!e)return"Unknown size";const t=parseInt(e);if(isNaN(t))return"Unknown size";const r=["B","KB","MB","GB","TB"];let l=0,a=t;for(;a>=1024&&l<r.length-1;)a/=1024,l++;return`${a.toFixed(1)} ${r[l]}`}function fe(e){const t=e.split(".");return t.length>1?t.pop().toUpperCase():"?"}const nn={Video:["MP4","WEBM","OGV","AVI","MKV","MOV","MPEG"],Audio:["MP3","OGG","FLAC","WAV","M4A","AAC"],Image:["JPG","JPEG","PNG","GIF","WEBP","BMP","TIFF"],Document:["PDF","TXT","DOC","DOCX","EPUB","MOBI"],Archive:["ZIP","RAR","7Z","TAR","GZ","BZ2"],Data:["XML","JSON","CSV","SQL","SQLITE"]};function Ye(e){for(const[t,r]of Object.entries(nn))if(r.includes(e))return t;return"Other"}function rn({identifier:e}){var E,H,L,N,T,D,P,Z,oe,ae;const[t,r]=w(null),[l,a]=w(!0),[o,s]=w(null),[d,u]=w({}),[c,_]=w(""),[i,f]=w(""),[p,x]=w(!1);De(()=>{async function v(){a(!0);try{const C=await B.getItem(e);r(C)}catch(C){s(C.message)}finally{a(!1)}}v()},[e]);const b=We(()=>t!=null&&t.files?t.files.filter(v=>{if(c&&!v.name.toLowerCase().includes(c.toLowerCase()))return!1;if(i){const C=fe(v.name);if(Ye(C)!==i)return!1}return!(p&&v.source!=="original")}):[],[t==null?void 0:t.files,c,i,p]),y=We(()=>{if(!(t!=null&&t.files))return[];const v=new Set;return t.files.forEach(C=>v.add(Ye(fe(C.name)))),Array.from(v).sort()},[t==null?void 0:t.files]),g=async v=>{u(C=>({...C,[v]:!0}));try{await B.startDownload(e,[v]),window.location.href="/downloads"}catch(C){console.error("Download failed:",C),u(W=>({...W,[v]:!1}))}},m=async()=>{u(v=>({...v,__all__:!0}));try{await B.startDownload(e),window.location.href="/downloads"}catch(v){console.error("Download failed:",v),u(C=>({...C,__all__:!1}))}},I=async()=>{u(v=>({...v,__filtered__:!0}));try{const v=b.map(C=>C.name);await B.startDownload(e,v),window.location.href="/downloads"}catch(v){console.error("Download failed:",v),u(C=>({...C,__filtered__:!1}))}};if(l)return n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})});if(o)return n("div",{class:"empty-state",children:[n("h3",{children:"Error loading item"}),n("p",{children:o}),n("a",{href:"/",class:"btn btn-secondary mt-md",children:[n(Qe,{})," Back to Search"]})]});const A=c||i||p,R=b.reduce((v,C)=>v+(parseInt(C.size)||0),0);return n("div",{children:[n("div",{style:{display:"flex",gap:"var(--space-md)",marginBottom:"var(--space-lg)"},children:[n("a",{href:"/",class:"btn btn-secondary",children:[n(Qe,{})," Back to Search"]}),n("a",{href:`https://archive.org/details/${e}`,target:"_blank",rel:"noopener",class:"btn btn-secondary",children:[n(tn,{})," View on Archive.org"]})]}),n("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:n("div",{class:"card-body",style:{display:"flex",gap:"var(--space-lg)",flexWrap:"wrap"},children:[n("img",{src:`https://archive.org/services/img/${e}`,alt:((E=t==null?void 0:t.metadata)==null?void 0:E.title)||e,style:{width:"200px",height:"150px",objectFit:"cover",borderRadius:"var(--radius-md)",flexShrink:0}}),n("div",{style:{flex:1,minWidth:"250px"},children:[n("h1",{class:"page-title",style:{marginBottom:"var(--space-sm)"},children:((H=t==null?void 0:t.metadata)==null?void 0:H.title)||e}),n("p",{class:"text-secondary",style:{fontFamily:"monospace",fontSize:"0.85rem"},children:e}),((L=t==null?void 0:t.metadata)==null?void 0:L.creator)&&n("p",{style:{marginTop:"var(--space-sm)"},children:["By ",n("strong",{children:t.metadata.creator})]}),((N=t==null?void 0:t.metadata)==null?void 0:N.date)&&n("p",{class:"text-secondary",children:t.metadata.date}),((T=t==null?void 0:t.metadata)==null?void 0:T.description)&&n("p",{style:{marginTop:"var(--space-md)",color:"var(--color-text-secondary)"},children:[t.metadata.description.substring(0,400),t.metadata.description.length>400?"...":""]}),n("div",{style:{marginTop:"var(--space-md)",display:"flex",gap:"var(--space-sm)",flexWrap:"wrap"},children:[((D=t==null?void 0:t.metadata)==null?void 0:D.mediatype)&&n("span",{class:"result-badge",children:t.metadata.mediatype}),((P=t==null?void 0:t.metadata)==null?void 0:P.collection)&&n("span",{class:"result-badge",style:{background:"var(--color-accent-muted)"},children:Array.isArray(t.metadata.collection)?t.metadata.collection[0]:t.metadata.collection})]}),n("div",{style:{marginTop:"var(--space-lg)"},children:n("button",{class:"btn btn-primary btn-lg",onClick:m,disabled:d.__all__,children:[n(_e,{}),d.__all__?"Starting...":"Download All Files"]})})]})]})}),n("div",{class:"card",children:[n("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"var(--space-md)"},children:[n("span",{children:["Files (",((Z=t==null?void 0:t.files)==null?void 0:Z.length)||0,")"]}),A&&b.length>0&&b.length<(((oe=t==null?void 0:t.files)==null?void 0:oe.length)||0)&&n("button",{class:"btn btn-primary",onClick:I,disabled:d.__filtered__,style:{fontSize:"0.85rem"},children:[n(_e,{}),"Download ",b.length," Filtered (",Ze(R),")"]})]}),n("div",{style:{padding:"var(--space-md)",borderBottom:"1px solid var(--color-border)",display:"flex",gap:"var(--space-md)",flexWrap:"wrap",alignItems:"center"},children:[n("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",flex:"1 1 200px"},children:[n(en,{}),n("input",{type:"text",class:"form-input",placeholder:"Search files...",value:c,onInput:v=>_(v.target.value),style:{margin:0}})]}),n("select",{class:"form-input",value:i,onChange:v=>f(v.target.value),style:{margin:0,width:"auto"},children:[n("option",{value:"",children:"All Types"}),y.map(v=>n("option",{value:v,children:v},v))]}),n("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:p,onChange:v=>x(v.target.checked)}),"Original files only"]}),A&&n("span",{class:"text-secondary",children:["Showing ",b.length," of ",(ae=t==null?void 0:t.files)==null?void 0:ae.length]})]}),n("div",{class:"card-body",style:{padding:0},children:n("div",{class:"job-list",children:b.length===0?n("div",{class:"empty-state",style:{padding:"var(--space-xl)"},children:n("p",{children:"No files match your filters"})}):b.map(v=>n("div",{class:"job-item",children:[n("div",{class:"job-icon",children:n(Xt,{})}),n("div",{class:"job-info",style:{minWidth:0},children:[n("div",{class:"job-title",style:{wordBreak:"break-all"},children:v.name}),n("div",{class:"job-subtitle",children:[Ze(v.size)," ‚Ä¢ ",v.format||fe(v.name),v.source&&n("span",{style:{marginLeft:"8px",opacity:.7},children:["(",v.source,")"]})]})]}),n("button",{class:"btn btn-secondary btn-icon",onClick:()=>g(v.name),disabled:d[v.name],title:"Download",children:n(_e,{})})]},v.name))})})]})]})}const Je=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),ln=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),on=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:n("polyline",{points:"20 6 9 17 4 12"})});function an(){const[e,t]=w([]),[r,l]=w(!0);De(()=>{async function s(){try{const u=await B.getDownloads();t(u)}catch(u){console.error("Failed to load downloads:",u)}finally{l(!1)}}return s(),Gt(u=>{t(c=>{const _=c.findIndex(i=>i.id===u.id);if(_>=0){const i=[...c];return i[_]=u,i}return[u,...c]})})},[]);const a=async s=>{try{await B.cancelDownload(s)}catch(d){console.error("Failed to cancel:",d)}},o=s=>({pending:"status-pending",running:"status-running",completed:"status-completed",failed:"status-failed",cancelled:"status-failed"})[s]||"status-pending";return n("div",{children:[n("div",{class:"page-header",children:[n("h1",{class:"page-title",children:"Downloads"}),n("p",{class:"page-subtitle",children:"Manage your download queue"})]}),r?n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})}):e.length>0?n("div",{class:"job-list",children:e.map(s=>n("div",{class:"job-item",children:[n("div",{class:"job-icon",children:s.status==="completed"?n(on,{}):n(Je,{})}),n("div",{class:"job-info",style:{flex:1},children:[n("div",{class:"job-title",children:s.identifier}),n("div",{class:"job-subtitle",children:[s.filename||"All files",s.error&&` ‚Ä¢ ${s.error}`]}),s.status==="running"&&n("div",{class:"progress-bar",style:{marginTop:"var(--space-sm)"},children:n("div",{class:"progress-fill",style:{width:`${s.progress}%`}})})]}),n("div",{class:"job-status",children:[n("span",{class:`status-badge ${o(s.status)}`,children:s.status}),(s.status==="pending"||s.status==="running")&&n("button",{class:"btn btn-secondary btn-icon",onClick:()=>a(s.id),title:"Cancel",children:n(ln,{})})]})]},s.id))}):n("div",{class:"empty-state",children:[n(Je,{}),n("h3",{children:"No Downloads"}),n("p",{children:"Start by searching for items and downloading files"}),n("a",{href:"/",class:"btn btn-primary mt-md",children:"Search Archive"})]})]})}const sn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:n("polyline",{points:"20 6 9 17 4 12"})}),cn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),dn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[n("polyline",{points:"23 4 23 10 17 10"}),n("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),un=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:n("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})});function hn(){const[e,t]=w(null),[r,l]=w(!0),[a,o]=w(""),[s,d]=w(""),[u,c]=w(!1),[_,i]=w(null),[f,p]=w(!1),x=async()=>{l(!0),i(null);try{const g=await B.getAuthStatus();t(g),g.email&&!a&&o(g.email)}catch(g){console.error("Failed to load status:",g),i({type:"error",text:"Failed to check configuration status"})}finally{l(!1)}};De(()=>{x()},[]);const b=async g=>{if(g.preventDefault(),!a||!s){i({type:"error",text:"Email and password are required"});return}c(!0),i(null);try{const m=await B.configure(a,s);if(m.success){d(""),i({type:"success",text:"Configuration saved! Verifying..."}),p(!0),await new Promise(A=>setTimeout(A,1e3));const I=await B.getAuthStatus();I.configured?(t(I),i({type:"success",text:"‚úì Login successful! Configuration verified."})):i({type:"warning",text:"Configuration saved but could not verify. Check credentials."}),p(!1)}else throw new Error(m.message||"Configuration failed")}catch(m){i({type:"error",text:m.message||"Login failed. Check your credentials."}),c(!1),p(!1);return}c(!1)},y=async()=>{p(!0),i(null);try{const g=await B.getAuthStatus();g.configured?(t(g),i({type:"success",text:"‚úì Configuration is valid!"})):i({type:"error",text:"Not configured or credentials invalid"})}catch{i({type:"error",text:"Failed to verify configuration"})}p(!1)};return r?n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})}):n("div",{children:[n("div",{class:"page-header",children:[n("h1",{class:"page-title",children:"Settings"}),n("p",{class:"page-subtitle",children:"Configure your Internet Archive account"})]}),n("div",{class:"card",children:[n("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n("span",{children:"Account Configuration"}),n("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[n("button",{class:"btn btn-secondary",onClick:y,disabled:f,style:{padding:"4px 12px",fontSize:"0.85rem"},children:[n(un,{})," ",f?"Verifying...":"Test Login"]}),n("button",{class:"btn btn-secondary btn-icon",onClick:x,title:"Refresh status",style:{padding:"4px 8px"},children:n(dn,{})})]})]}),n("div",{class:"card-body",children:[n("div",{class:"flex items-center gap-md",style:{marginBottom:"var(--space-lg)",padding:"var(--space-md)",background:e!=null&&e.configured?"rgba(63, 185, 80, 0.1)":"rgba(248, 81, 73, 0.1)",borderRadius:"var(--radius-md)",border:`1px solid ${e!=null&&e.configured?"rgba(63, 185, 80, 0.3)":"rgba(248, 81, 73, 0.3)"}`},children:[n("div",{style:{width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:e!=null&&e.configured?"rgba(63, 185, 80, 0.2)":"rgba(248, 81, 73, 0.2)",color:e!=null&&e.configured?"var(--color-success)":"var(--color-error)"},children:e!=null&&e.configured?n(sn,{}):n(cn,{})}),n("div",{style:{flex:1},children:[n("div",{style:{fontWeight:600,fontSize:"1.1rem"},children:e!=null&&e.configured?"‚úì Connected to Archive.org":"‚úó Not Configured"}),e!=null&&e.email?n("div",{class:"text-secondary",children:["Logged in as: ",e.email]}):e!=null&&e.configured?n("div",{class:"text-secondary",style:{fontStyle:"italic"},children:"API keys saved"}):n("div",{class:"text-secondary",children:"Enter your archive.org credentials below"})]})]}),_&&n("div",{style:{padding:"var(--space-md)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-lg)",background:_.type==="success"?"rgba(63, 185, 80, 0.2)":_.type==="warning"?"rgba(210, 153, 34, 0.2)":"rgba(248, 81, 73, 0.2)",color:_.type==="success"?"var(--color-success)":_.type==="warning"?"var(--color-warning)":"var(--color-error)",border:`1px solid ${_.type==="success"?"rgba(63, 185, 80, 0.3)":_.type==="warning"?"rgba(210, 153, 34, 0.3)":"rgba(248, 81, 73, 0.3)"}`},children:_.text}),n("form",{onSubmit:b,children:[n("div",{class:"form-group",children:[n("label",{class:"form-label",children:"Archive.org Email *"}),n("input",{type:"email",class:"form-input",placeholder:"your@email.com",value:a,onInput:g=>o(g.target.value),required:!0,autoComplete:"email"})]}),n("div",{class:"form-group",children:[n("label",{class:"form-label",children:"Password *"}),n("input",{type:"password",class:"form-input",placeholder:e!=null&&e.configured?"Enter password to update":"Your archive.org password",value:s,onInput:g=>d(g.target.value),required:!0,autoComplete:"current-password"}),n("p",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:"Your password is sent directly to archive.org and stored locally in /config/ia.ini"})]}),n("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:u||f||!a||!s,style:{width:"100%"},children:u?"Saving...":f?"Verifying...":e!=null&&e.configured?"üîÑ Update Configuration":"üîê Login & Save"})]})]})]}),n("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"var(--space-lg)",marginTop:"var(--space-lg)"},children:[n("div",{class:"card",children:[n("div",{class:"card-header",children:"üì• Downloads"}),n("div",{class:"card-body",children:n("p",{class:"text-secondary",children:["Downloads are saved to the ",n("code",{children:"/data"})," volume, which maps to your local ",n("code",{children:"./data"})," directory."]})})]}),n("div",{class:"card",children:[n("div",{class:"card-header",children:"üîê Configuration"}),n("div",{class:"card-body",children:n("p",{class:"text-secondary",children:["Credentials are stored in ",n("code",{children:"/config/ia.ini"}),". This file persists across container restarts."]})})]})]})]})}function pn(){return n(qt,{children:n(vt,{children:[n(Ke,{path:"/"}),n(Ke,{path:"/search"}),n(rn,{path:"/item/:identifier"}),n(an,{path:"/downloads"}),n(hn,{path:"/settings"})]})})}Ct(n(pn,{}),document.getElementById("app"));
