(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var ae,k,nt,G,Ee,rt,lt,at,$e,me,ye,ot,re={},it=[],St=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,oe=Array.isArray;function R(e,t){for(var r in t)e[r]=t[r];return e}function Ie(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function st(e,t,r){var l,o,a,s={};for(a in t)a=="key"?l=t[a]:a=="ref"?o=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?ae.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return te(e,s,l,o,null)}function te(e,t,r,l,o){var a={type:e,props:t,key:r,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++nt,__i:-1,__u:0};return o==null&&k.vnode!=null&&k.vnode(a),a}function Q(e){return e.children}function ne(e,t){this.props=e,this.context=t}function J(e,t){if(t==null)return e.__?J(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?J(e):null}function ct(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return ct(e)}}function be(e){(!e.__d&&(e.__d=!0)&&G.push(e)&&!he.__r++||Ee!=k.debounceRendering)&&((Ee=k.debounceRendering)||rt)(he)}function he(){for(var e,t,r,l,o,a,s,u=1;G.length;)G.length>u&&G.sort(lt),e=G.shift(),u=G.length,e.__d&&(r=void 0,l=void 0,o=(l=(t=e).__v).__e,a=[],s=[],t.__P&&((r=R({},l)).__v=l.__v+1,k.vnode&&k.vnode(r),Ae(t.__P,r,l,t.__n,t.__P.namespaceURI,32&l.__u?[o]:null,a,o??J(l),!!(32&l.__u),s),r.__v=l.__v,r.__.__k[r.__i]=r,ht(a,r,s),l.__e=l.__=null,r.__e!=o&&ct(r)));he.__r=0}function dt(e,t,r,l,o,a,s,u,c,d,f){var i,g,p,w,x,y,_,m=l&&l.__k||it,$=t.length;for(c=$t(r,t,m,c,$),i=0;i<$;i++)(p=r.__k[i])!=null&&(g=p.__i==-1?re:m[p.__i]||re,p.__i=i,y=Ae(e,p,g,o,a,s,u,c,d,f),w=p.__e,p.ref&&g.ref!=p.ref&&(g.ref&&De(g.ref,null,p),f.push(p.ref,p.__c||w,p)),x==null&&w!=null&&(x=w),(_=!!(4&p.__u))||g.__k===p.__k?c=ut(p,c,e,_):typeof p.type=="function"&&y!==void 0?c=y:w&&(c=w.nextSibling),p.__u&=-7);return r.__e=x,c}function $t(e,t,r,l,o){var a,s,u,c,d,f=r.length,i=f,g=0;for(e.__k=new Array(o),a=0;a<o;a++)(s=t[a])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[a]=te(null,s,null,null,null):oe(s)?s=e.__k[a]=te(Q,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[a]=te(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[a]=s,c=a+g,s.__=e,s.__b=e.__b+1,u=null,(d=s.__i=It(s,r,c,i))!=-1&&(i--,(u=r[d])&&(u.__u|=2)),u==null||u.__v==null?(d==-1&&(o>f?g--:o<f&&g++),typeof s.type!="function"&&(s.__u|=4)):d!=c&&(d==c-1?g--:d==c+1?g++:(d>c?g--:g++,s.__u|=4))):e.__k[a]=null;if(i)for(a=0;a<f;a++)(u=r[a])!=null&&!(2&u.__u)&&(u.__e==l&&(l=J(u)),ft(u,u));return l}function ut(e,t,r,l){var o,a;if(typeof e.type=="function"){for(o=e.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=e,t=ut(o[a],t,r,l));return t}e.__e!=t&&(l&&(t&&e.type&&!t.parentNode&&(t=J(e)),r.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function we(e,t){return t=t||[],e==null||typeof e=="boolean"||(oe(e)?e.some(function(r){we(r,t)}):t.push(e)),t}function It(e,t,r,l){var o,a,s,u=e.key,c=e.type,d=t[r],f=d!=null&&(2&d.__u)==0;if(d===null&&u==null||f&&u==d.key&&c==d.type)return r;if(l>(f?1:0)){for(o=r-1,a=r+1;o>=0||a<t.length;)if((d=t[s=o>=0?o--:a++])!=null&&!(2&d.__u)&&u==d.key&&c==d.type)return s}return-1}function Fe(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||St.test(t)?r:r+"px"}function ce(e,t,r,l,o){var a,s;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof l=="string"&&(e.style.cssText=l=""),l)for(t in l)r&&t in r||Fe(e.style,t,"");if(r)for(t in r)l&&r[t]==l[t]||Fe(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(at,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?l?r.u=l.u:(r.u=$e,e.addEventListener(t,a?ye:me,a)):e.removeEventListener(t,a?ye:me,a);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function Me(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=$e++;else if(t.t<r.u)return;return r(k.event?k.event(t):t)}}}function Ae(e,t,r,l,o,a,s,u,c,d){var f,i,g,p,w,x,y,_,m,$,A,H,L,W,M,O,U,P=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(c=!!(32&r.__u),a=[u=t.__e=r.__e]),(f=k.__b)&&f(t);e:if(typeof P=="function")try{if(_=t.props,m="prototype"in P&&P.prototype.render,$=(f=P.contextType)&&l[f.__c],A=f?$?$.props.value:f.__:l,r.__c?y=(i=t.__c=r.__c).__=i.__E:(m?t.__c=i=new P(_,A):(t.__c=i=new ne(_,A),i.constructor=P,i.render=Dt),$&&$.sub(i),i.state||(i.state={}),i.__n=l,g=i.__d=!0,i.__h=[],i._sb=[]),m&&i.__s==null&&(i.__s=i.state),m&&P.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=R({},i.__s)),R(i.__s,P.getDerivedStateFromProps(_,i.__s))),p=i.props,w=i.state,i.__v=t,g)m&&P.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),m&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(m&&P.getDerivedStateFromProps==null&&_!==p&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(_,A),t.__v==r.__v||!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(_,i.__s,A)===!1){for(t.__v!=r.__v&&(i.props=_,i.state=i.__s,i.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(B){B&&(B.__=t)}),H=0;H<i._sb.length;H++)i.__h.push(i._sb[H]);i._sb=[],i.__h.length&&s.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(_,i.__s,A),m&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(p,w,x)})}if(i.context=A,i.props=_,i.__P=e,i.__e=!1,L=k.__r,W=0,m){for(i.state=i.__s,i.__d=!1,L&&L(t),f=i.render(i.props,i.state,i.context),M=0;M<i._sb.length;M++)i.__h.push(i._sb[M]);i._sb=[]}else do i.__d=!1,L&&L(t),f=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++W<25);i.state=i.__s,i.getChildContext!=null&&(l=R(R({},l),i.getChildContext())),m&&!g&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(p,w)),O=f,f!=null&&f.type===Q&&f.key==null&&(O=pt(f.props.children)),u=dt(e,oe(O)?O:[O],t,r,l,o,a,s,u,c,d),i.base=t.__e,t.__u&=-161,i.__h.length&&s.push(i),y&&(i.__E=i.__=null)}catch(B){if(t.__v=null,c||a!=null)if(B.then){for(t.__u|=c?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,t.__e=u}else{for(U=a.length;U--;)Ie(a[U]);xe(t)}else t.__e=r.__e,t.__k=r.__k,B.then||xe(t);k.__e(B,t,r)}else a==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):u=t.__e=At(r.__e,t,r,l,o,a,s,c,d);return(f=k.diffed)&&f(t),128&t.__u?void 0:u}function xe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(xe)}function ht(e,t,r){for(var l=0;l<r.length;l++)De(r[l],r[++l],r[++l]);k.__c&&k.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(a){a.call(o)})}catch(a){k.__e(a,o.__v)}})}function pt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:oe(e)?e.map(pt):R({},e)}function At(e,t,r,l,o,a,s,u,c){var d,f,i,g,p,w,x,y=r.props||re,_=t.props,m=t.type;if(m=="svg"?o="http://www.w3.org/2000/svg":m=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(d=0;d<a.length;d++)if((p=a[d])&&"setAttribute"in p==!!m&&(m?p.localName==m:p.nodeType==3)){e=p,a[d]=null;break}}if(e==null){if(m==null)return document.createTextNode(_);e=document.createElementNS(o,m,_.is&&_),u&&(k.__m&&k.__m(t,a),u=!1),a=null}if(m==null)y===_||u&&e.data==_||(e.data=_);else{if(a=a&&ae.call(e.childNodes),!u&&a!=null)for(y={},d=0;d<e.attributes.length;d++)y[(p=e.attributes[d]).name]=p.value;for(d in y)if(p=y[d],d!="children"){if(d=="dangerouslySetInnerHTML")i=p;else if(!(d in _)){if(d=="value"&&"defaultValue"in _||d=="checked"&&"defaultChecked"in _)continue;ce(e,d,null,p,o)}}for(d in _)p=_[d],d=="children"?g=p:d=="dangerouslySetInnerHTML"?f=p:d=="value"?w=p:d=="checked"?x=p:u&&typeof p!="function"||y[d]===p||ce(e,d,p,y[d],o);if(f)u||i&&(f.__html==i.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(i&&(e.innerHTML=""),dt(t.type=="template"?e.content:e,oe(g)?g:[g],t,r,l,m=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,s,a?a[0]:r.__k&&J(r,0),u,c),a!=null)for(d=a.length;d--;)Ie(a[d]);u||(d="value",m=="progress"&&w==null?e.removeAttribute("value"):w!=null&&(w!==e[d]||m=="progress"&&!w||m=="option"&&w!=y[d])&&ce(e,d,w,y[d],o),d="checked",x!=null&&x!=e[d]&&ce(e,d,x,y[d],o))}return e}function De(e,t,r){try{if(typeof e=="function"){var l=typeof e.__u=="function";l&&e.__u(),l&&t==null||(e.__u=e(t))}else e.current=t}catch(o){k.__e(o,r)}}function ft(e,t,r){var l,o;if(k.unmount&&k.unmount(e),(l=e.ref)&&(l.current&&l.current!=e.__e||De(l,null,t)),(l=e.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(a){k.__e(a,t)}l.base=l.__P=null}if(l=e.__k)for(o=0;o<l.length;o++)l[o]&&ft(l[o],t,r||typeof e.type!="function");r||Ie(e.__e),e.__c=e.__=e.__e=void 0}function Dt(e,t,r){return this.constructor(e,r)}function Tt(e,t,r){var l,o,a,s;t==document&&(t=document.documentElement),k.__&&k.__(e,t),o=(l=!1)?null:t.__k,a=[],s=[],Ae(t,e=t.__k=st(Q,null,[e]),o||re,re,t.namespaceURI,o?null:t.firstChild?ae.call(t.childNodes):null,a,o?o.__e:t.firstChild,l,s),ht(a,e,s)}function Pt(e,t,r){var l,o,a,s,u=R({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)a=="key"?l=t[a]:a=="ref"?o=t[a]:u[a]=t[a]===void 0&&s!=null?s[a]:t[a];return arguments.length>2&&(u.children=arguments.length>3?ae.call(arguments,2):r),te(e.type,u,l||e.key,o||e.ref,null)}function Bt(e){function t(r){var l,o;return this.getChildContext||(l=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){l=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&l.forEach(function(s){s.__e=!0,be(s)})},this.sub=function(a){l.add(a);var s=a.componentWillUnmount;a.componentWillUnmount=function(){l&&l.delete(a),s&&s.call(a)}}),r.children}return t.__c="__cC"+ot++,t.__=e,t.Provider=t.__l=(t.Consumer=function(r,l){return r.children(l)}).contextType=t,t}ae=it.slice,k={__e:function(e,t,r,l){for(var o,a,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,l||{}),s=o.__d),s)return o.__E=o}catch(u){e=u}throw e}},nt=0,ne.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=R({},this.state),typeof e=="function"&&(e=e(R({},r),this.props)),e&&R(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),be(this))},ne.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),be(this))},ne.prototype.render=Q,G=[],rt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,lt=function(e,t){return e.__v.__b-t.__v.__b},he.__r=0,at=/(PointerCapture)$|Capture$/i,$e=0,me=Me(!1),ye=Me(!0),ot=0;var Lt=0;function n(e,t,r,l,o,a){t||(t={});var s,u,c=t;if("ref"in c)for(u in c={},t)u=="ref"?s=t[u]:c[u]=t[u];var d={type:e,props:c,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Lt,__i:-1,__u:0,__source:o,__self:a};if(typeof e=="function"&&(s=e.defaultProps))for(u in s)c[u]===void 0&&(c[u]=s[u]);return k.vnode&&k.vnode(d),d}var le,S,fe,Ne,ke=0,_t=[],I=k,Oe=I.__b,Ue=I.__r,Re=I.diffed,He=I.__c,We=I.unmount,ze=I.__;function Te(e,t){I.__h&&I.__h(S,e,ke||t),ke=0;var r=S.__H||(S.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function b(e){return ke=1,Et(vt,e)}function Et(e,t,r){var l=Te(le++,2);if(l.t=e,!l.__c&&(l.__=[vt(void 0,t),function(u){var c=l.__N?l.__N[0]:l.__[0],d=l.t(c,u);c!==d&&(l.__N=[d,l.__[1]],l.__c.setState({}))}],l.__c=S,!S.__f)){var o=function(u,c,d){if(!l.__c.__H)return!0;var f=l.__c.__H.__.filter(function(g){return!!g.__c});if(f.every(function(g){return!g.__N}))return!a||a.call(this,u,c,d);var i=l.__c.props!==u;return f.forEach(function(g){if(g.__N){var p=g.__[0];g.__=g.__N,g.__N=void 0,p!==g.__[0]&&(i=!0)}}),a&&a.call(this,u,c,d)||i};S.__f=!0;var a=S.shouldComponentUpdate,s=S.componentWillUpdate;S.componentWillUpdate=function(u,c,d){if(this.__e){var f=a;a=void 0,o(u,c,d),a=f}s&&s.call(this,u,c,d)},S.shouldComponentUpdate=o}return l.__N||l.__}function Pe(e,t){var r=Te(le++,3);!I.__s&&gt(r.__H,t)&&(r.__=e,r.u=t,S.__H.__h.push(r))}function je(e,t){var r=Te(le++,7);return gt(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function Ft(){for(var e;e=_t.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ue),e.__H.__h.forEach(Ce),e.__H.__h=[]}catch(t){e.__H.__h=[],I.__e(t,e.__v)}}I.__b=function(e){S=null,Oe&&Oe(e)},I.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ze&&ze(e,t)},I.__r=function(e){Ue&&Ue(e),le=0;var t=(S=e.__c).__H;t&&(fe===S?(t.__h=[],S.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(ue),t.__h.forEach(Ce),t.__h=[],le=0)),fe=S},I.diffed=function(e){Re&&Re(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(_t.push(t)!==1&&Ne===I.requestAnimationFrame||((Ne=I.requestAnimationFrame)||Mt)(Ft)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),fe=S=null},I.__c=function(e,t){t.some(function(r){try{r.__h.forEach(ue),r.__h=r.__h.filter(function(l){return!l.__||Ce(l)})}catch(l){t.some(function(o){o.__h&&(o.__h=[])}),t=[],I.__e(l,r.__v)}}),He&&He(e,t)},I.unmount=function(e){We&&We(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(l){try{ue(l)}catch(o){t=o}}),r.__H=void 0,t&&I.__e(t,r.__v))};var Ve=typeof requestAnimationFrame=="function";function Mt(e){var t,r=function(){clearTimeout(l),Ve&&cancelAnimationFrame(t),setTimeout(e)},l=setTimeout(r,35);Ve&&(t=requestAnimationFrame(r))}function ue(e){var t=S,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),S=t}function Ce(e){var t=S;e.__c=e.__(),S=t}function gt(e,t){return!e||e.length!==t.length||t.some(function(r,l){return r!==e[l]})}function vt(e,t){return typeof t=="function"?t(e):t}var Nt={};function de(e,t){for(var r in t)e[r]=t[r];return e}function Ot(e,t,r){var l,o=/(?:\?([^#]*))?(#.*)?$/,a=e.match(o),s={};if(a&&a[1])for(var u=a[1].split("&"),c=0;c<u.length;c++){var d=u[c].split("=");s[decodeURIComponent(d[0])]=decodeURIComponent(d.slice(1).join("="))}e=Se(e.replace(o,"")),t=Se(t||"");for(var f=Math.max(e.length,t.length),i=0;i<f;i++)if(t[i]&&t[i].charAt(0)===":"){var g=t[i].replace(/(^:|[+*?]+$)/g,""),p=(t[i].match(/[+*?]+$/)||Nt)[0]||"",w=~p.indexOf("+"),x=~p.indexOf("*"),y=e[i]||"";if(!y&&!x&&(p.indexOf("?")<0||w)){l=!1;break}if(s[g]=decodeURIComponent(y),w||x){s[g]=e.slice(i).map(decodeURIComponent).join("/");break}}else if(t[i]!==e[i]){l=!1;break}return(r.default===!0||l!==!1)&&s}function Ut(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function Rt(e,t){return e.index=t,e.rank=function(r){return r.props.default?0:Se(r.props.path).map(Ht).join("")}(e),e.props}function Se(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Ht(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Wt={},K=[],qe=[],F=null,mt={url:Be()},zt=Bt(mt);function Be(){var e;return""+((e=F&&F.location?F.location:F&&F.getCurrentLocation?F.getCurrentLocation():typeof location<"u"?location:Wt).pathname||"")+(e.search||"")}function q(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(r){for(var l=K.length;l--;)if(K[l].canRoute(r))return!0;return!1}(e)&&function(r,l){l===void 0&&(l="push"),F&&F[l]?F[l](r):typeof history<"u"&&history[l+"State"]&&history[l+"State"](null,null,r)}(e,t?"replace":"push"),yt(e)}function yt(e){for(var t=!1,r=0;r<K.length;r++)K[r].routeTo(e)&&(t=!0);return t}function jt(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),r=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return q(t)}}function Vt(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function qt(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(jt(t))return Vt(e)}while(t=t.parentNode)}}var Ge=!1;function bt(e){e.history&&(F=e.history),this.state={url:e.url||Be()}}de(bt.prototype=new ne,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=we(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Ge||(Ge=!0,F||addEventListener("popstate",function(){yt(Be())}),addEventListener("click",qt)),K.push(this),F&&(this.u=F.listen(function(t){var r=t.location||t;e.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),K.splice(K.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(Rt).sort(Ut);for(var r=0;r<e.length;r++){var l=e[r],o=Ot(t,l.props.path,l.props);if(o)return[l,o]}},render:function(e,t){var r,l,o=e.onChange,a=t.url,s=this.c,u=this.g(we(e.children),a);if(u&&(l=Pt(u[0],de(de({url:a,matches:r=u[1]},r),{key:void 0,ref:void 0}))),a!==(s&&s.url)){de(mt,s=this.c={url:a,previous:s&&s.url,current:l,path:l?l.props.path:null,matches:r}),s.router=this,s.active=l?[l]:[];for(var c=qe.length;c--;)qe[c]({});typeof o=="function"&&o(s)}return st(zt.Provider,{value:s},l)}});const Gt="v0.3.3",Qt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})]}),Kt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Zt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[n("circle",{cx:"12",cy:"12",r:"3"}),n("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),Jt=()=>n("svg",{viewBox:"0 0 100 100",width:"28",height:"28",children:[n("rect",{x:"10",y:"70",width:"80",height:"20",fill:"#58a6ff",rx:"4"}),n("rect",{x:"20",y:"45",width:"60",height:"20",fill:"#58a6ff",rx:"4"}),n("rect",{x:"30",y:"20",width:"40",height:"20",fill:"#58a6ff",rx:"4"})]});function Yt({children:e,url:t}){const r=[{path:"/",icon:Qt,label:"Search"},{path:"/downloads",icon:Kt,label:"Downloads"},{path:"/settings",icon:Zt,label:"Settings"}],l=o=>o==="/"?t==="/"||t==="/search"||(t==null?void 0:t.startsWith("/item/")):t==null?void 0:t.startsWith(o);return n("div",{class:"layout",children:[n("aside",{class:"sidebar",children:[n("div",{class:"sidebar-header",children:n("div",{class:"sidebar-logo",children:[n(Jt,{}),n("span",{children:"IA Docker"})]})}),n("nav",{class:"sidebar-nav",children:r.map(o=>n("a",{class:`nav-item ${l(o.path)?"active":""}`,href:o.path,children:[n(o.icon,{}),n("span",{children:o.label})]},o.path))}),n("div",{class:"sidebar-footer",children:n("span",{class:"version-badge",children:["IADocker ",Gt]})})]}),n("main",{class:"main-content",children:e})]})}const wt="/api";async function z(e,t={}){const r=await fetch(`${wt}${e}`,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok){const l=await r.json().catch(()=>({detail:"Request failed"}));throw new Error(l.detail||"Request failed")}return r.json()}const T={getAuthStatus:()=>z("/auth/status"),configure:(e,t)=>z("/auth/configure",{method:"POST",body:JSON.stringify({email:e,password:t})}),search:(e,t={})=>{const r=new URLSearchParams({q:e,...t});return z(`/search?${r}`)},getItem:e=>z(`/items/${e}`),getItemFiles:e=>z(`/items/${e}/files`),startDownload:(e,t,r,l)=>z("/downloads",{method:"POST",body:JSON.stringify({identifier:e,files:t,glob:r,format:l})}),getDownloads:()=>z("/downloads"),cancelDownload:e=>z(`/downloads/${e}`,{method:"DELETE"}),clearDownloads:()=>z("/downloads",{method:"DELETE"})};function Xt(e){const t=new EventSource(`${wt}/downloads/events`);return t.addEventListener("progress",r=>{e(JSON.parse(r.data))}),t.onerror=()=>{t.close()},()=>t.close()}const _e=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})]}),en=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",children:n("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),Qe=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",children:[n("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),n("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),tn=({open:e})=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",style:{transform:e?"rotate(180deg)":"none",transition:"transform 0.2s"},children:n("polyline",{points:"6 9 12 15 18 9"})}),nn=[{value:"",label:"All Types"},{value:"texts",label:"ðŸ“š Texts"},{value:"movies",label:"ðŸŽ¬ Movies"},{value:"audio",label:"ðŸŽµ Audio"},{value:"software",label:"ðŸ’¿ Software"},{value:"image",label:"ðŸ–¼ï¸ Images"},{value:"data",label:"ðŸ“Š Data"},{value:"web",label:"ðŸŒ Web Archives"},{value:"etree",label:"ðŸŽ¸ Live Music"},{value:"collection",label:"ðŸ“ Collections"}],Ke=[{value:"",label:"All Collections"},{value:"opensource_movies",label:"Open Source Movies"},{value:"opensource_audio",label:"Open Source Audio"},{value:"prelinger",label:"Prelinger Archives"},{value:"internetarchivebooks",label:"Internet Archive Books"},{value:"oldtimeradio",label:"Old Time Radio"},{value:"computerphotos",label:"Computer Photos"},{value:"librivoxaudio",label:"LibriVox Audiobooks"},{value:"tvnews",label:"TV News Archive"},{value:"softwarelibrary",label:"Software Library"},{value:"classicpcgames",label:"Classic PC Games"},{value:"msdos_games",label:"MS-DOS Games"},{value:"consolelivingroom",label:"Console Living Room"}],rn=[{value:"",label:"Relevance"},{value:"-downloads",label:"Most Downloaded"},{value:"-week",label:"Trending This Week"},{value:"-publicdate",label:"Newest First"},{value:"publicdate",label:"Oldest First"},{value:"titleSorter",label:"Title A-Z"},{value:"-titleSorter",label:"Title Z-A"}];function ee(e){const t=e.trim(),r=/archive\.org\/download\/([^\/\?\#\s]+)\/(.+?)(?:\?|#|$)/,l=t.match(r);if(l)return{identifier:l[1],filename:decodeURIComponent(l[2])};const o=[/archive\.org\/details\/([^\/\?\#\s]+)/,/archive\.org\/download\/([^\/\?\#\s]+)\/?$/,/archive\.org\/metadata\/([^\/\?\#\s]+)/,/archive\.org\/embed\/([^\/\?\#\s]+)/];for(const a of o){const s=t.match(a);if(s)return{identifier:s[1],filename:null}}return/^[a-zA-Z0-9_\-\.]+$/.test(t)&&t.length>2&&t.length<200?{identifier:t,filename:null}:null}function Ze(e){const t=e.split(/[\n\r]+/).map(l=>l.trim()).filter(l=>l.length>0),r=[];for(const l of t){const o=ee(l);o&&r.push(o)}return r}function Je(){const[e,t]=b(""),[r,l]=b([]),[o,a]=b(!1),[s,u]=b(0),[c,d]=b(1),[f,i]=b(!1),[g,p]=b(!1),[w,x]=b(""),[y,_]=b(!1),[m,$]=b(""),[A,H]=b(""),[L,W]=b(""),[M,O]=b(""),[U,P]=b(""),[B,Y]=b(""),E=Ze(w),N=e.includes(`
`)||e.includes("archive.org")?Ze(e):[],v=N.length>1,C=async(h,D=1)=>{h==null||h.preventDefault();const j=e.trim();if(v){await ie();return}const X=ee(j);if(X&&j.includes("archive.org"))if(X.filename){_(!0);try{await T.startDownload(X.identifier,[X.filename]),q("/downloads")}catch(V){console.error("Download failed:",V),_(!1)}return}else{q(`/item/${X.identifier}`);return}if(!(!j&&!L&&!A&&!B)){a(!0),d(D);try{const V={page:D,rows:24};A&&(V.mediatype=A),L&&(V.collection=L),M&&(V.sort=M);let pe=j||"*";U&&(pe+=` AND year:${U}`),B&&(pe+=` AND creator:"${B}"`);const Le=await T.search(pe,V);l(Le.results),u(Le.total)}catch(V){console.error("Search failed:",V)}finally{a(!1)}}},ie=async()=>{if(N.length===0)return;_(!0),$(`Queuing 0/${N.length}...`);let h=0;for(const D of N)try{D.filename?await T.startDownload(D.identifier,[D.filename]):await T.startDownload(D.identifier),h++,$(`Queuing ${h}/${N.length}...`)}catch(j){console.error(`Failed to queue ${D.identifier}:`,j)}$(""),_(!1),q("/downloads")},xt=h=>{q(`/item/${h}`)},kt=async()=>{const h=ee(e.trim());if(h)if(h.filename){_(!0);try{await T.startDownload(h.identifier,[h.filename]),q("/downloads")}catch(D){console.error("Download failed:",D),_(!1)}}else q(`/item/${h.identifier}`)},Ct=()=>{H(""),W(""),O(""),P(""),Y("")},se=A||L||M||U||B,Z=Math.ceil(s/24);return n("div",{children:[n("div",{class:"page-header",children:[n("h1",{class:"page-title",children:"Search Archive.org"}),n("p",{class:"page-subtitle",children:"Explore millions of items in the Internet Archive"})]}),n("form",{onSubmit:C,class:"search-bar",style:{flexWrap:"wrap",gap:"var(--space-sm)"},children:[n("div",{class:"search-input-wrapper",style:{flex:"1 1 300px"},children:[n(_e,{}),n("input",{type:"text",class:"search-input",placeholder:"Search, paste URL, or enter identifier...",value:e,onInput:h=>t(h.target.value)})]}),n("button",{type:"button",class:`btn ${f||se?"btn-primary":"btn-secondary"}`,onClick:()=>i(!f),style:{display:"flex",alignItems:"center",gap:"6px"},children:[n(en,{}),"Filters",se&&n("span",{style:{background:"rgba(255,255,255,0.3)",borderRadius:"50%",width:"18px",height:"18px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center"},children:"!"}),n(tn,{open:f})]}),n("button",{type:"button",class:`btn ${g?"btn-primary":"btn-secondary"}`,onClick:()=>p(!g),style:{display:"flex",alignItems:"center",gap:"6px"},children:"ðŸ“¥ Bulk"}),n("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:o,children:o?"Searching...":"Search"})]}),g&&n("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:[n("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n("strong",{children:"ðŸ“¥ Bulk Download"}),E.length>0&&n("span",{class:"result-badge",children:[E.length," items detected"]})]}),n("div",{class:"card-body",children:[n("div",{class:"form-group",style:{marginBottom:"var(--space-md)"},children:[n("label",{class:"form-label",children:"Paste archive.org URLs (one per line)"}),n("textarea",{class:"form-input",rows:"6",placeholder:`https://archive.org/download/item1/file.zip
https://archive.org/details/item2
https://archive.org/download/item3/folder/file.mp4`,value:w,onInput:h=>x(h.target.value),style:{fontFamily:"var(--font-mono)",fontSize:"0.875rem"}})]}),E.length>0&&n("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)",marginBottom:"var(--space-md)"},children:[E.filter(h=>h.filename).length," specific files, ",E.filter(h=>!h.filename).length," full items"]}),n("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[n("button",{class:"btn btn-primary",onClick:async()=>{if(E.length===0)return;_(!0),$(`Queuing 0/${E.length}...`);let h=0;for(const D of E)try{D.filename?await T.startDownload(D.identifier,[D.filename]):await T.startDownload(D.identifier),h++,$(`Queuing ${h}/${E.length}...`)}catch(j){console.error(`Failed to queue ${D.identifier}:`,j)}$(""),_(!1),x(""),p(!1),q("/downloads")},disabled:y||E.length===0,children:y?m||"Queuing...":`Download ${E.length} Items`}),n("button",{class:"btn btn-secondary",onClick:()=>x(""),children:"Clear"})]})]})]}),v&&n("div",{style:{marginTop:"var(--space-sm)",marginBottom:"var(--space-md)",padding:"var(--space-md)",background:"rgba(88, 166, 255, 0.15)",borderRadius:"var(--radius-md)",border:"1px solid rgba(88, 166, 255, 0.3)"},children:[n("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",marginBottom:"var(--space-sm)"},children:[n(Qe,{}),n("strong",{children:"Bulk Download Mode"}),n("span",{class:"result-badge",style:{marginLeft:"auto"},children:[N.length," items"]})]}),n("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)",marginBottom:"var(--space-md)"},children:[N.filter(h=>h.filename).length," specific files, ",N.filter(h=>!h.filename).length," full items"]}),n("div",{style:{display:"flex",gap:"var(--space-sm)",flexWrap:"wrap"},children:[n("button",{class:"btn btn-primary",onClick:ie,disabled:y,children:y?m||"Queuing...":`ðŸ“¥ Download All ${N.length} Items`}),n("button",{class:"btn btn-secondary",onClick:()=>t(""),children:"Clear"})]})]}),!v&&e.trim()&&ee(e.trim())&&(()=>{const h=ee(e.trim());return n("div",{style:{marginTop:"var(--space-sm)",marginBottom:"var(--space-md)",padding:"var(--space-sm) var(--space-md)",background:h.filename?"rgba(63, 185, 80, 0.15)":"var(--color-accent-muted)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"var(--space-sm)",border:h.filename?"1px solid rgba(63, 185, 80, 0.3)":"none"},children:[n(Qe,{}),n("span",{style:{flex:1},children:h.filename?n(Q,{children:["Download file: ",n("strong",{children:h.filename})," from ",n("strong",{children:h.identifier})]}):n(Q,{children:["Go directly to item: ",n("strong",{children:h.identifier})]})}),n("button",{class:"btn btn-primary",onClick:kt,disabled:y,children:y?"Starting...":h.filename?"ðŸ“¥ Download":"Open Item"})]})})(),f&&n("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:n("div",{class:"card-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"var(--space-md)"},children:[n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Media Type"}),n("select",{class:"form-input",value:A,onChange:h=>H(h.target.value),children:nn.map(h=>n("option",{value:h.value,children:h.label},h.value))})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Collection"}),n("select",{class:"form-input",value:L,onChange:h=>W(h.target.value),children:Ke.map(h=>n("option",{value:h.value,children:h.label},h.value))})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Sort By"}),n("select",{class:"form-input",value:M,onChange:h=>O(h.target.value),children:rn.map(h=>n("option",{value:h.value,children:h.label},h.value))})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Year"}),n("input",{type:"text",class:"form-input",placeholder:"e.g. 2020 or 1990-2000",value:U,onInput:h=>P(h.target.value)})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Creator"}),n("input",{type:"text",class:"form-input",placeholder:"Author or creator",value:B,onInput:h=>Y(h.target.value)})]}),n("div",{class:"form-group",style:{margin:0,display:"flex",alignItems:"flex-end"},children:n("button",{type:"button",class:"btn btn-secondary",onClick:Ct,disabled:!se,children:"Clear Filters"})})]})}),r.length>0&&n("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-md)"},children:[n("p",{class:"text-secondary",children:["Found ",s.toLocaleString()," results",se&&" (filtered)"]}),Z>1&&n("div",{style:{display:"flex",gap:"var(--space-sm)",alignItems:"center"},children:[n("button",{class:"btn btn-secondary",disabled:c<=1,onClick:()=>C(null,c-1),children:"â† Prev"}),n("span",{class:"text-secondary",children:["Page ",c," of ",Z]}),n("button",{class:"btn btn-secondary",disabled:c>=Z,onClick:()=>C(null,c+1),children:"Next â†’"})]})]}),o?n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})}):r.length>0?n(Q,{children:[n("div",{class:"results-grid",children:r.map(h=>n("div",{class:"result-card",onClick:()=>xt(h.identifier),children:[n("img",{class:"result-thumbnail",src:`https://archive.org/services/img/${h.identifier}`,alt:h.title,loading:"lazy",onError:D=>{D.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%2321262d" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%236e7681" font-size="12">No Image</text></svg>'}}),n("div",{class:"result-info",children:[n("h3",{class:"result-title",children:h.title||h.identifier}),n("div",{class:"result-meta",children:[h.mediatype&&n("span",{class:"result-badge",children:h.mediatype}),h.date&&n("span",{children:h.date.substring(0,10)})]}),h.creator&&n("div",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:typeof h.creator=="string"?h.creator:h.creator[0]})]})]},h.identifier))}),Z>1&&n("div",{style:{display:"flex",justifyContent:"center",gap:"var(--space-sm)",marginTop:"var(--space-xl)"},children:[n("button",{class:"btn btn-secondary",disabled:c<=1,onClick:()=>C(null,c-1),children:"â† Previous"}),n("span",{class:"text-secondary",style:{padding:"8px 16px"},children:["Page ",c," of ",Z]}),n("button",{class:"btn btn-secondary",disabled:c>=Z,onClick:()=>C(null,c+1),children:"Next â†’"})]})]}):e&&!o?n("div",{class:"empty-state",children:[n(_e,{}),n("h3",{children:"No results found"}),n("p",{children:"Try different keywords or adjust filters"})]}):n("div",{class:"empty-state",children:[n(_e,{}),n("h3",{children:"Start Your Search"}),n("p",{children:"Enter a query, paste an archive.org URL, or browse by collection"}),n("div",{style:{marginTop:"var(--space-lg)",display:"flex",flexWrap:"wrap",gap:"var(--space-sm)",justifyContent:"center"},children:Ke.slice(1,7).map(h=>n("button",{class:"btn btn-secondary",onClick:()=>{W(h.value),i(!0),setTimeout(()=>C(null,1),100)},children:h.label},h.value))})]})]})}const ge=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),ln=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n("polyline",{points:"14 2 14 8 20 8"})]}),Ye=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),n("polyline",{points:"12 19 5 12 12 5"})]}),an=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})]}),on=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[n("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),n("polyline",{points:"15 3 21 3 21 9"}),n("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]});function Xe(e){if(!e)return"Unknown size";const t=parseInt(e);if(isNaN(t))return"Unknown size";const r=["B","KB","MB","GB","TB"];let l=0,o=t;for(;o>=1024&&l<r.length-1;)o/=1024,l++;return`${o.toFixed(1)} ${r[l]}`}function ve(e){const t=e.split(".");return t.length>1?t.pop().toUpperCase():"?"}const sn={Video:["MP4","WEBM","OGV","AVI","MKV","MOV","MPEG"],Audio:["MP3","OGG","FLAC","WAV","M4A","AAC"],Image:["JPG","JPEG","PNG","GIF","WEBP","BMP","TIFF"],Document:["PDF","TXT","DOC","DOCX","EPUB","MOBI"],Archive:["ZIP","RAR","7Z","TAR","GZ","BZ2"],Data:["XML","JSON","CSV","SQL","SQLITE"]};function et(e){for(const[t,r]of Object.entries(sn))if(r.includes(e))return t;return"Other"}function cn({identifier:e}){var L,W,M,O,U,P,B,Y,E,N;const[t,r]=b(null),[l,o]=b(!0),[a,s]=b(null),[u,c]=b({}),[d,f]=b(""),[i,g]=b(""),[p,w]=b(!1);Pe(()=>{async function v(){o(!0);try{const C=await T.getItem(e);r(C)}catch(C){s(C.message)}finally{o(!1)}}v()},[e]);const x=je(()=>t!=null&&t.files?t.files.filter(v=>{if(d&&!v.name.toLowerCase().includes(d.toLowerCase()))return!1;if(i){const C=ve(v.name);if(et(C)!==i)return!1}return!(p&&v.source!=="original")}):[],[t==null?void 0:t.files,d,i,p]),y=je(()=>{if(!(t!=null&&t.files))return[];const v=new Set;return t.files.forEach(C=>v.add(et(ve(C.name)))),Array.from(v).sort()},[t==null?void 0:t.files]),_=async v=>{c(C=>({...C,[v]:!0}));try{await T.startDownload(e,[v]),window.location.href="/downloads"}catch(C){console.error("Download failed:",C),c(ie=>({...ie,[v]:!1}))}},m=async()=>{c(v=>({...v,__all__:!0}));try{await T.startDownload(e),window.location.href="/downloads"}catch(v){console.error("Download failed:",v),c(C=>({...C,__all__:!1}))}},$=async()=>{c(v=>({...v,__filtered__:!0}));try{const v=x.map(C=>C.name);await T.startDownload(e,v),window.location.href="/downloads"}catch(v){console.error("Download failed:",v),c(C=>({...C,__filtered__:!1}))}};if(l)return n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})});if(a)return n("div",{class:"empty-state",children:[n("h3",{children:"Error loading item"}),n("p",{children:a}),n("a",{href:"/",class:"btn btn-secondary mt-md",children:[n(Ye,{})," Back to Search"]})]});const A=d||i||p,H=x.reduce((v,C)=>v+(parseInt(C.size)||0),0);return n("div",{children:[n("div",{style:{display:"flex",gap:"var(--space-md)",marginBottom:"var(--space-lg)"},children:[n("a",{href:"/",class:"btn btn-secondary",children:[n(Ye,{})," Back to Search"]}),n("a",{href:`https://archive.org/details/${e}`,target:"_blank",rel:"noopener",class:"btn btn-secondary",children:[n(on,{})," View on Archive.org"]})]}),n("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:n("div",{class:"card-body",style:{display:"flex",gap:"var(--space-lg)",flexWrap:"wrap"},children:[n("img",{src:`https://archive.org/services/img/${e}`,alt:((L=t==null?void 0:t.metadata)==null?void 0:L.title)||e,style:{width:"200px",height:"150px",objectFit:"cover",borderRadius:"var(--radius-md)",flexShrink:0}}),n("div",{style:{flex:1,minWidth:"250px"},children:[n("h1",{class:"page-title",style:{marginBottom:"var(--space-sm)"},children:((W=t==null?void 0:t.metadata)==null?void 0:W.title)||e}),n("p",{class:"text-secondary",style:{fontFamily:"monospace",fontSize:"0.85rem"},children:e}),((M=t==null?void 0:t.metadata)==null?void 0:M.creator)&&n("p",{style:{marginTop:"var(--space-sm)"},children:["By ",n("strong",{children:t.metadata.creator})]}),((O=t==null?void 0:t.metadata)==null?void 0:O.date)&&n("p",{class:"text-secondary",children:t.metadata.date}),((U=t==null?void 0:t.metadata)==null?void 0:U.description)&&n("p",{style:{marginTop:"var(--space-md)",color:"var(--color-text-secondary)"},children:[t.metadata.description.substring(0,400),t.metadata.description.length>400?"...":""]}),n("div",{style:{marginTop:"var(--space-md)",display:"flex",gap:"var(--space-sm)",flexWrap:"wrap"},children:[((P=t==null?void 0:t.metadata)==null?void 0:P.mediatype)&&n("span",{class:"result-badge",children:t.metadata.mediatype}),((B=t==null?void 0:t.metadata)==null?void 0:B.collection)&&n("span",{class:"result-badge",style:{background:"var(--color-accent-muted)"},children:Array.isArray(t.metadata.collection)?t.metadata.collection[0]:t.metadata.collection})]}),n("div",{style:{marginTop:"var(--space-lg)"},children:n("button",{class:"btn btn-primary btn-lg",onClick:m,disabled:u.__all__,children:[n(ge,{}),u.__all__?"Starting...":"Download All Files"]})})]})]})}),n("div",{class:"card",children:[n("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"var(--space-md)"},children:[n("span",{children:["Files (",((Y=t==null?void 0:t.files)==null?void 0:Y.length)||0,")"]}),A&&x.length>0&&x.length<(((E=t==null?void 0:t.files)==null?void 0:E.length)||0)&&n("button",{class:"btn btn-primary",onClick:$,disabled:u.__filtered__,style:{fontSize:"0.85rem"},children:[n(ge,{}),"Download ",x.length," Filtered (",Xe(H),")"]})]}),n("div",{style:{padding:"var(--space-md)",borderBottom:"1px solid var(--color-border)",display:"flex",gap:"var(--space-md)",flexWrap:"wrap",alignItems:"center"},children:[n("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",flex:"1 1 200px"},children:[n(an,{}),n("input",{type:"text",class:"form-input",placeholder:"Search files...",value:d,onInput:v=>f(v.target.value),style:{margin:0}})]}),n("select",{class:"form-input",value:i,onChange:v=>g(v.target.value),style:{margin:0,width:"auto"},children:[n("option",{value:"",children:"All Types"}),y.map(v=>n("option",{value:v,children:v},v))]}),n("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:p,onChange:v=>w(v.target.checked)}),"Original files only"]}),A&&n("span",{class:"text-secondary",children:["Showing ",x.length," of ",(N=t==null?void 0:t.files)==null?void 0:N.length]})]}),n("div",{class:"card-body",style:{padding:0},children:n("div",{class:"job-list",children:x.length===0?n("div",{class:"empty-state",style:{padding:"var(--space-xl)"},children:n("p",{children:"No files match your filters"})}):x.map(v=>n("div",{class:"job-item",children:[n("div",{class:"job-icon",children:n(ln,{})}),n("div",{class:"job-info",style:{minWidth:0},children:[n("div",{class:"job-title",style:{wordBreak:"break-all"},children:v.name}),n("div",{class:"job-subtitle",children:[Xe(v.size)," â€¢ ",v.format||ve(v.name),v.source&&n("span",{style:{marginLeft:"8px",opacity:.7},children:["(",v.source,")"]})]})]}),n("button",{class:"btn btn-secondary btn-icon",onClick:()=>_(v.name),disabled:u[v.name],title:"Download",children:n(ge,{})})]},v.name))})})]})]})}const tt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),dn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),un=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:n("polyline",{points:"20 6 9 17 4 12"})});function hn(){const[e,t]=b([]),[r,l]=b(!0);Pe(()=>{async function c(){try{const f=await T.getDownloads();t(f)}catch(f){console.error("Failed to load downloads:",f)}finally{l(!1)}}return c(),Xt(f=>{t(i=>{const g=i.findIndex(p=>p.id===f.id);if(g>=0){const p=[...i];return p[g]=f,p}return[f,...i]})})},[]);const o=async c=>{try{await T.cancelDownload(c)}catch(d){console.error("Failed to cancel:",d)}},a=c=>({pending:"status-pending",running:"status-running",completed:"status-completed",failed:"status-failed",cancelled:"status-failed"})[c]||"status-pending",s=async()=>{try{await T.clearDownloads(),t(c=>c.filter(d=>d.status==="pending"||d.status==="running"))}catch(c){console.error("Failed to clear downloads:",c)}},u=e.some(c=>c.status==="completed"||c.status==="failed"||c.status==="cancelled");return n("div",{children:[n("div",{class:"page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[n("div",{children:[n("h1",{class:"page-title",children:"Downloads"}),n("p",{class:"page-subtitle",children:"Manage your download queue"})]}),u&&n("button",{class:"btn btn-secondary",onClick:s,children:"ðŸ—‘ï¸ Clear History"})]}),r?n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})}):e.length>0?n("div",{class:"job-list",children:e.map(c=>n("div",{class:"job-item",children:[n("div",{class:"job-icon",children:c.status==="completed"?n(un,{}):n(tt,{})}),n("div",{class:"job-info",style:{flex:1},children:[n("div",{class:"job-title",children:c.filename||"All files"}),n("div",{class:"job-subtitle",children:[c.identifier,c.error&&` â€¢ ${c.error}`]}),c.status==="running"&&n("div",{class:"progress-bar",style:{marginTop:"var(--space-sm)"},children:n("div",{class:"progress-fill",style:{width:`${c.progress}%`}})})]}),n("div",{class:"job-status",children:[n("span",{class:`status-badge ${a(c.status)}`,children:c.status}),(c.status==="pending"||c.status==="running")&&n("button",{class:"btn btn-secondary btn-icon",onClick:()=>o(c.id),title:"Cancel",children:n(dn,{})})]})]},c.id))}):n("div",{class:"empty-state",children:[n(tt,{}),n("h3",{children:"No Downloads"}),n("p",{children:"Start by searching for items and downloading files"}),n("a",{href:"/",class:"btn btn-primary mt-md",children:"Search Archive"})]})]})}const pn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:n("polyline",{points:"20 6 9 17 4 12"})}),fn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),_n=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[n("polyline",{points:"23 4 23 10 17 10"}),n("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),gn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:n("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})});function vn(){const[e,t]=b(null),[r,l]=b(!0),[o,a]=b(""),[s,u]=b(""),[c,d]=b(!1),[f,i]=b(null),[g,p]=b(!1),w=async()=>{l(!0),i(null);try{const _=await T.getAuthStatus();t(_),_.email&&!o&&a(_.email)}catch(_){console.error("Failed to load status:",_),i({type:"error",text:"Failed to check configuration status"})}finally{l(!1)}};Pe(()=>{w()},[]);const x=async _=>{if(_.preventDefault(),!o||!s){i({type:"error",text:"Email and password are required"});return}d(!0),i(null);try{const m=await T.configure(o,s);if(m.success){u(""),i({type:"success",text:"Configuration saved! Verifying..."}),p(!0),await new Promise(A=>setTimeout(A,1e3));const $=await T.getAuthStatus();$.configured?(t($),i({type:"success",text:"âœ“ Login successful! Configuration verified."})):i({type:"warning",text:"Configuration saved but could not verify. Check credentials."}),p(!1)}else throw new Error(m.message||"Configuration failed")}catch(m){i({type:"error",text:m.message||"Login failed. Check your credentials."}),d(!1),p(!1);return}d(!1)},y=async()=>{p(!0),i(null);try{const _=await T.getAuthStatus();_.configured?(t(_),i({type:"success",text:"âœ“ Configuration is valid!"})):i({type:"error",text:"Not configured or credentials invalid"})}catch{i({type:"error",text:"Failed to verify configuration"})}p(!1)};return r?n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})}):n("div",{children:[n("div",{class:"page-header",children:[n("h1",{class:"page-title",children:"Settings"}),n("p",{class:"page-subtitle",children:"Configure your Internet Archive account"})]}),n("div",{class:"card",children:[n("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n("span",{children:"Account Configuration"}),n("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[n("button",{class:"btn btn-secondary",onClick:y,disabled:g,style:{padding:"4px 12px",fontSize:"0.85rem"},children:[n(gn,{})," ",g?"Verifying...":"Test Login"]}),n("button",{class:"btn btn-secondary btn-icon",onClick:w,title:"Refresh status",style:{padding:"4px 8px"},children:n(_n,{})})]})]}),n("div",{class:"card-body",children:[n("div",{class:"flex items-center gap-md",style:{marginBottom:"var(--space-lg)",padding:"var(--space-md)",background:e!=null&&e.configured?"rgba(63, 185, 80, 0.1)":"rgba(248, 81, 73, 0.1)",borderRadius:"var(--radius-md)",border:`1px solid ${e!=null&&e.configured?"rgba(63, 185, 80, 0.3)":"rgba(248, 81, 73, 0.3)"}`},children:[n("div",{style:{width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:e!=null&&e.configured?"rgba(63, 185, 80, 0.2)":"rgba(248, 81, 73, 0.2)",color:e!=null&&e.configured?"var(--color-success)":"var(--color-error)"},children:e!=null&&e.configured?n(pn,{}):n(fn,{})}),n("div",{style:{flex:1},children:[n("div",{style:{fontWeight:600,fontSize:"1.1rem"},children:e!=null&&e.configured?"âœ“ Connected to Archive.org":"âœ— Not Configured"}),e!=null&&e.email?n("div",{class:"text-secondary",children:["Logged in as: ",e.email]}):e!=null&&e.configured?n("div",{class:"text-secondary",style:{fontStyle:"italic"},children:"API keys saved"}):n("div",{class:"text-secondary",children:"Enter your archive.org credentials below"})]})]}),f&&n("div",{style:{padding:"var(--space-md)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-lg)",background:f.type==="success"?"rgba(63, 185, 80, 0.2)":f.type==="warning"?"rgba(210, 153, 34, 0.2)":"rgba(248, 81, 73, 0.2)",color:f.type==="success"?"var(--color-success)":f.type==="warning"?"var(--color-warning)":"var(--color-error)",border:`1px solid ${f.type==="success"?"rgba(63, 185, 80, 0.3)":f.type==="warning"?"rgba(210, 153, 34, 0.3)":"rgba(248, 81, 73, 0.3)"}`},children:f.text}),n("form",{onSubmit:x,children:[n("div",{class:"form-group",children:[n("label",{class:"form-label",children:"Archive.org Email *"}),n("input",{type:"email",class:"form-input",placeholder:"your@email.com",value:o,onInput:_=>a(_.target.value),required:!0,autoComplete:"email"})]}),n("div",{class:"form-group",children:[n("label",{class:"form-label",children:"Password *"}),n("input",{type:"password",class:"form-input",placeholder:e!=null&&e.configured?"Enter password to update":"Your archive.org password",value:s,onInput:_=>u(_.target.value),required:!0,autoComplete:"current-password"}),n("p",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:"Your password is sent directly to archive.org and stored locally in /config/ia.ini"})]}),n("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:c||g||!o||!s,style:{width:"100%"},children:c?"Saving...":g?"Verifying...":e!=null&&e.configured?"ðŸ”„ Update Configuration":"ðŸ” Login & Save"})]})]})]}),n("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"var(--space-lg)",marginTop:"var(--space-lg)"},children:[n("div",{class:"card",children:[n("div",{class:"card-header",children:"ðŸ“¥ Downloads"}),n("div",{class:"card-body",children:n("p",{class:"text-secondary",children:["Downloads are saved to the ",n("code",{children:"/data"})," volume, which maps to your local ",n("code",{children:"./data"})," directory."]})})]}),n("div",{class:"card",children:[n("div",{class:"card-header",children:"ðŸ” Configuration"}),n("div",{class:"card-body",children:n("p",{class:"text-secondary",children:["Credentials are stored in ",n("code",{children:"/config/ia.ini"}),". This file persists across container restarts."]})})]})]})]})}function mn(){return n(Yt,{children:n(bt,{children:[n(Je,{path:"/"}),n(Je,{path:"/search"}),n(cn,{path:"/item/:identifier"}),n(hn,{path:"/downloads"}),n(vn,{path:"/settings"})]})})}Tt(n(mn,{}),document.getElementById("app"));
