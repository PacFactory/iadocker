(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var he,I,ht,te,Ve,pt,ft,_t,Oe,Be,Te,gt,ue={},mt=[],Nt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pe=Array.isArray;function K(e,t){for(var r in t)e[r]=t[r];return e}function Ne(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function vt(e,t,r){var l,i,o,s={};for(o in t)o=="key"?l=t[o]:o=="ref"?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?he.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]===void 0&&(s[o]=e.defaultProps[o]);return ae(e,s,l,i,null)}function ae(e,t,r,l,i){var o={type:e,props:t,key:r,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++ht,__i:-1,__u:0};return i==null&&I.vnode!=null&&I.vnode(o),o}function Z(e){return e.children}function se(e,t){this.props=e,this.context=t}function le(e,t){if(t==null)return e.__?le(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?le(e):null}function yt(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return yt(e)}}function De(e){(!e.__d&&(e.__d=!0)&&te.push(e)&&!xe.__r++||Ve!=I.debounceRendering)&&((Ve=I.debounceRendering)||pt)(xe)}function xe(){for(var e,t,r,l,i,o,s,u=1;te.length;)te.length>u&&te.sort(ft),e=te.shift(),u=te.length,e.__d&&(r=void 0,l=void 0,i=(l=(t=e).__v).__e,o=[],s=[],t.__P&&((r=K({},l)).__v=l.__v+1,I.vnode&&I.vnode(r),Ue(t.__P,r,l,t.__n,t.__P.namespaceURI,32&l.__u?[i]:null,o,i??le(l),!!(32&l.__u),s),r.__v=l.__v,r.__.__k[r.__i]=r,wt(o,r,s),l.__e=l.__=null,r.__e!=i&&yt(r)));xe.__r=0}function bt(e,t,r,l,i,o,s,u,p,c,_){var a,d,f,v,C,w,y,m=l&&l.__k||mt,E=t.length;for(p=Ut(r,t,m,p,E),a=0;a<E;a++)(f=r.__k[a])!=null&&(d=f.__i==-1?ue:m[f.__i]||ue,f.__i=a,w=Ue(e,f,d,i,o,s,u,p,c,_),v=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&Re(d.ref,null,f),_.push(f.ref,f.__c||v,f)),C==null&&v!=null&&(C=v),(y=!!(4&f.__u))||d.__k===f.__k?p=xt(f,p,e,y):typeof f.type=="function"&&w!==void 0?p=w:v&&(p=v.nextSibling),f.__u&=-7);return r.__e=C,p}function Ut(e,t,r,l,i){var o,s,u,p,c,_=r.length,a=_,d=0;for(e.__k=new Array(i),o=0;o<i;o++)(s=t[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[o]=ae(null,s,null,null,null):pe(s)?s=e.__k[o]=ae(Z,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[o]=ae(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[o]=s,p=o+d,s.__=e,s.__b=e.__b+1,u=null,(c=s.__i=Rt(s,r,p,a))!=-1&&(a--,(u=r[c])&&(u.__u|=2)),u==null||u.__v==null?(c==-1&&(i>_?d--:i<_&&d++),typeof s.type!="function"&&(s.__u|=4)):c!=p&&(c==p-1?d--:c==p+1?d++:(c>p?d--:d++,s.__u|=4))):e.__k[o]=null;if(a)for(o=0;o<_;o++)(u=r[o])!=null&&!(2&u.__u)&&(u.__e==l&&(l=le(u)),Ct(u,u));return l}function xt(e,t,r,l){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=xt(i[o],t,r,l));return t}e.__e!=t&&(l&&(t&&e.type&&!t.parentNode&&(t=le(e)),r.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ae(e,t){return t=t||[],e==null||typeof e=="boolean"||(pe(e)?e.some(function(r){Ae(r,t)}):t.push(e)),t}function Rt(e,t,r,l){var i,o,s,u=e.key,p=e.type,c=t[r],_=c!=null&&(2&c.__u)==0;if(c===null&&u==null||_&&u==c.key&&p==c.type)return r;if(l>(_?1:0)){for(i=r-1,o=r+1;i>=0||o<t.length;)if((c=t[s=i>=0?i--:o++])!=null&&!(2&c.__u)&&u==c.key&&p==c.type)return s}return-1}function je(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||Nt.test(t)?r:r+"px"}function me(e,t,r,l,i){var o,s;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof l=="string"&&(e.style.cssText=l=""),l)for(t in l)r&&t in r||je(e.style,t,"");if(r)for(t in r)l&&r[t]==l[t]||je(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(_t,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=r,r?l?r.u=l.u:(r.u=Oe,e.addEventListener(t,o?Te:Be,o)):e.removeEventListener(t,o?Te:Be,o);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function Ge(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=Oe++;else if(t.t<r.u)return;return r(I.event?I.event(t):t)}}}function Ue(e,t,r,l,i,o,s,u,p,c){var _,a,d,f,v,C,w,y,m,E,$,O,L,N,q,M,W,T=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(p=!!(32&r.__u),o=[u=t.__e=r.__e]),(_=I.__b)&&_(t);e:if(typeof T=="function")try{if(y=t.props,m="prototype"in T&&T.prototype.render,E=(_=T.contextType)&&l[_.__c],$=_?E?E.props.value:_.__:l,r.__c?w=(a=t.__c=r.__c).__=a.__E:(m?t.__c=a=new T(y,$):(t.__c=a=new se(y,$),a.constructor=T,a.render=Ht),E&&E.sub(a),a.state||(a.state={}),a.__n=l,d=a.__d=!0,a.__h=[],a._sb=[]),m&&a.__s==null&&(a.__s=a.state),m&&T.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=K({},a.__s)),K(a.__s,T.getDerivedStateFromProps(y,a.__s))),f=a.props,v=a.state,a.__v=t,d)m&&T.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),m&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(m&&T.getDerivedStateFromProps==null&&y!==f&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(y,$),t.__v==r.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(y,a.__s,$)===!1){for(t.__v!=r.__v&&(a.props=y,a.state=a.__s,a.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(U){U&&(U.__=t)}),O=0;O<a._sb.length;O++)a.__h.push(a._sb[O]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(y,a.__s,$),m&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(f,v,C)})}if(a.context=$,a.props=y,a.__P=e,a.__e=!1,L=I.__r,N=0,m){for(a.state=a.__s,a.__d=!1,L&&L(t),_=a.render(a.props,a.state,a.context),q=0;q<a._sb.length;q++)a.__h.push(a._sb[q]);a._sb=[]}else do a.__d=!1,L&&L(t),_=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++N<25);a.state=a.__s,a.getChildContext!=null&&(l=K(K({},l),a.getChildContext())),m&&!d&&a.getSnapshotBeforeUpdate!=null&&(C=a.getSnapshotBeforeUpdate(f,v)),M=_,_!=null&&_.type===Z&&_.key==null&&(M=kt(_.props.children)),u=bt(e,pe(M)?M:[M],t,r,l,i,o,s,u,p,c),a.base=t.__e,t.__u&=-161,a.__h.length&&s.push(a),w&&(a.__E=a.__=null)}catch(U){if(t.__v=null,p||o!=null)if(U.then){for(t.__u|=p?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;o[o.indexOf(u)]=null,t.__e=u}else{for(W=o.length;W--;)Ne(o[W]);Pe(t)}else t.__e=r.__e,t.__k=r.__k,U.then||Pe(t);I.__e(U,t,r)}else o==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):u=t.__e=Wt(r.__e,t,r,l,i,o,s,p,c);return(_=I.diffed)&&_(t),128&t.__u?void 0:u}function Pe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Pe)}function wt(e,t,r){for(var l=0;l<r.length;l++)Re(r[l],r[++l],r[++l]);I.__c&&I.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){I.__e(o,i.__v)}})}function kt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:pe(e)?e.map(kt):K({},e)}function Wt(e,t,r,l,i,o,s,u,p){var c,_,a,d,f,v,C,w=r.props||ue,y=t.props,m=t.type;if(m=="svg"?i="http://www.w3.org/2000/svg":m=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((f=o[c])&&"setAttribute"in f==!!m&&(m?f.localName==m:f.nodeType==3)){e=f,o[c]=null;break}}if(e==null){if(m==null)return document.createTextNode(y);e=document.createElementNS(i,m,y.is&&y),u&&(I.__m&&I.__m(t,o),u=!1),o=null}if(m==null)w===y||u&&e.data==y||(e.data=y);else{if(o=o&&he.call(e.childNodes),!u&&o!=null)for(w={},c=0;c<e.attributes.length;c++)w[(f=e.attributes[c]).name]=f.value;for(c in w)if(f=w[c],c!="children"){if(c=="dangerouslySetInnerHTML")a=f;else if(!(c in y)){if(c=="value"&&"defaultValue"in y||c=="checked"&&"defaultChecked"in y)continue;me(e,c,null,f,i)}}for(c in y)f=y[c],c=="children"?d=f:c=="dangerouslySetInnerHTML"?_=f:c=="value"?v=f:c=="checked"?C=f:u&&typeof f!="function"||w[c]===f||me(e,c,f,w[c],i);if(_)u||a&&(_.__html==a.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(a&&(e.innerHTML=""),bt(t.type=="template"?e.content:e,pe(d)?d:[d],t,r,l,m=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,s,o?o[0]:r.__k&&le(r,0),u,p),o!=null)for(c=o.length;c--;)Ne(o[c]);u||(c="value",m=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[c]||m=="progress"&&!v||m=="option"&&v!=w[c])&&me(e,c,v,w[c],i),c="checked",C!=null&&C!=e[c]&&me(e,c,C,w[c],i))}return e}function Re(e,t,r){try{if(typeof e=="function"){var l=typeof e.__u=="function";l&&e.__u(),l&&t==null||(e.__u=e(t))}else e.current=t}catch(i){I.__e(i,r)}}function Ct(e,t,r){var l,i;if(I.unmount&&I.unmount(e),(l=e.ref)&&(l.current&&l.current!=e.__e||Re(l,null,t)),(l=e.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(o){I.__e(o,t)}l.base=l.__P=null}if(l=e.__k)for(i=0;i<l.length;i++)l[i]&&Ct(l[i],t,r||typeof e.type!="function");r||Ne(e.__e),e.__c=e.__=e.__e=void 0}function Ht(e,t,r){return this.constructor(e,r)}function zt(e,t,r){var l,i,o,s;t==document&&(t=document.documentElement),I.__&&I.__(e,t),i=(l=!1)?null:t.__k,o=[],s=[],Ue(t,e=t.__k=vt(Z,null,[e]),i||ue,ue,t.namespaceURI,i?null:t.firstChild?he.call(t.childNodes):null,o,i?i.__e:t.firstChild,l,s),wt(o,e,s)}function qt(e,t,r){var l,i,o,s,u=K({},e.props);for(o in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)o=="key"?l=t[o]:o=="ref"?i=t[o]:u[o]=t[o]===void 0&&s!=null?s[o]:t[o];return arguments.length>2&&(u.children=arguments.length>3?he.call(arguments,2):r),ae(e.type,u,l||e.key,i||e.ref,null)}function St(e){function t(r){var l,i;return this.getChildContext||(l=new Set,(i={})[t.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){l=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&l.forEach(function(s){s.__e=!0,De(s)})},this.sub=function(o){l.add(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){l&&l.delete(o),s&&s.call(o)}}),r.children}return t.__c="__cC"+gt++,t.__=e,t.Provider=t.__l=(t.Consumer=function(r,l){return r.children(l)}).contextType=t,t}he=mt.slice,I={__e:function(e,t,r,l){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,l||{}),s=i.__d),s)return i.__E=i}catch(u){e=u}throw e}},ht=0,se.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=K({},this.state),typeof e=="function"&&(e=e(K({},r),this.props)),e&&K(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),De(this))},se.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),De(this))},se.prototype.render=Z,te=[],pt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ft=function(e,t){return e.__v.__b-t.__v.__b},xe.__r=0,_t=/(PointerCapture)$|Capture$/i,Oe=0,Be=Ge(!1),Te=Ge(!0),gt=0;var Vt=0;function n(e,t,r,l,i,o){t||(t={});var s,u,p=t;if("ref"in p)for(u in p={},t)u=="ref"?s=t[u]:p[u]=t[u];var c={type:e,props:p,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Vt,__i:-1,__u:0,__source:i,__self:o};if(typeof e=="function"&&(s=e.defaultProps))for(u in s)p[u]===void 0&&(p[u]=s[u]);return I.vnode&&I.vnode(c),c}var oe,P,Se,Qe,we=0,$t=[],F=I,Ke=F.__b,Je=F.__r,Ye=F.diffed,Ze=F.__c,Xe=F.unmount,et=F.__;function ke(e,t){F.__h&&F.__h(P,e,we||t),we=0;var r=P.__H||(P.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function g(e){return we=1,jt(Tt,e)}function jt(e,t,r){var l=ke(oe++,2);if(l.t=e,!l.__c&&(l.__=[Tt(void 0,t),function(u){var p=l.__N?l.__N[0]:l.__[0],c=l.t(p,u);p!==c&&(l.__N=[c,l.__[1]],l.__c.setState({}))}],l.__c=P,!P.__f)){var i=function(u,p,c){if(!l.__c.__H)return!0;var _=l.__c.__H.__.filter(function(d){return!!d.__c});if(_.every(function(d){return!d.__N}))return!o||o.call(this,u,p,c);var a=l.__c.props!==u;return _.forEach(function(d){if(d.__N){var f=d.__[0];d.__=d.__N,d.__N=void 0,f!==d.__[0]&&(a=!0)}}),o&&o.call(this,u,p,c)||a};P.__f=!0;var o=P.shouldComponentUpdate,s=P.componentWillUpdate;P.componentWillUpdate=function(u,p,c){if(this.__e){var _=o;o=void 0,i(u,p,c),o=_}s&&s.call(this,u,p,c)},P.shouldComponentUpdate=i}return l.__N||l.__}function X(e,t){var r=ke(oe++,3);!F.__s&&Bt(r.__H,t)&&(r.__=e,r.u=t,P.__H.__h.push(r))}function Fe(e,t){var r=ke(oe++,7);return Bt(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function tt(e,t){return we=8,Fe(function(){return e},t)}function It(e){var t=P.context[e.__c],r=ke(oe++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(P)),t.props.value):e.__}function Gt(){for(var e;e=$t.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ye),e.__H.__h.forEach(Ee),e.__H.__h=[]}catch(t){e.__H.__h=[],F.__e(t,e.__v)}}F.__b=function(e){P=null,Ke&&Ke(e)},F.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),et&&et(e,t)},F.__r=function(e){Je&&Je(e),oe=0;var t=(P=e.__c).__H;t&&(Se===P?(t.__h=[],P.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(ye),t.__h.forEach(Ee),t.__h=[],oe=0)),Se=P},F.diffed=function(e){Ye&&Ye(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&($t.push(t)!==1&&Qe===F.requestAnimationFrame||((Qe=F.requestAnimationFrame)||Qt)(Gt)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Se=P=null},F.__c=function(e,t){t.some(function(r){try{r.__h.forEach(ye),r.__h=r.__h.filter(function(l){return!l.__||Ee(l)})}catch(l){t.some(function(i){i.__h&&(i.__h=[])}),t=[],F.__e(l,r.__v)}}),Ze&&Ze(e,t)},F.unmount=function(e){Xe&&Xe(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(l){try{ye(l)}catch(i){t=i}}),r.__H=void 0,t&&F.__e(t,r.__v))};var nt=typeof requestAnimationFrame=="function";function Qt(e){var t,r=function(){clearTimeout(l),nt&&cancelAnimationFrame(t),setTimeout(e)},l=setTimeout(r,35);nt&&(t=requestAnimationFrame(r))}function ye(e){var t=P,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),P=t}function Ee(e){var t=P;e.__c=e.__(),P=t}function Bt(e,t){return!e||e.length!==t.length||t.some(function(r,l){return r!==e[l]})}function Tt(e,t){return typeof t=="function"?t(e):t}var Kt={};function ve(e,t){for(var r in t)e[r]=t[r];return e}function Dt(e,t,r){var l,i=/(?:\?([^#]*))?(#.*)?$/,o=e.match(i),s={};if(o&&o[1])for(var u=o[1].split("&"),p=0;p<u.length;p++){var c=u[p].split("=");s[decodeURIComponent(c[0])]=decodeURIComponent(c.slice(1).join("="))}e=Me(e.replace(i,"")),t=Me(t||"");for(var _=Math.max(e.length,t.length),a=0;a<_;a++)if(t[a]&&t[a].charAt(0)===":"){var d=t[a].replace(/(^:|[+*?]+$)/g,""),f=(t[a].match(/[+*?]+$/)||Kt)[0]||"",v=~f.indexOf("+"),C=~f.indexOf("*"),w=e[a]||"";if(!w&&!C&&(f.indexOf("?")<0||v)){l=!1;break}if(s[d]=decodeURIComponent(w),v||C){s[d]=e.slice(a).map(decodeURIComponent).join("/");break}}else if(t[a]!==e[a]){l=!1;break}return(r.default===!0||l!==!1)&&s}function Jt(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function Yt(e,t){return e.index=t,e.rank=function(r){return r.props.default?0:Me(r.props.path).map(Zt).join("")}(e),e.props}function Me(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Zt(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Xt={},ne=[],ce=[],V=null,We={url:He()},At=St(We);function en(){var e=It(At);if(e===We){var t=g()[1];X(function(){return ce.push(t),function(){return ce.splice(ce.indexOf(t),1)}},[])}return[e,de]}function He(){var e;return""+((e=V&&V.location?V.location:V&&V.getCurrentLocation?V.getCurrentLocation():typeof location<"u"?location:Xt).pathname||"")+(e.search||"")}function de(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(r){for(var l=ne.length;l--;)if(ne[l].canRoute(r))return!0;return!1}(e)&&function(r,l){l===void 0&&(l="push"),V&&V[l]?V[l](r):typeof history<"u"&&history[l+"State"]&&history[l+"State"](null,null,r)}(e,t?"replace":"push"),Pt(e)}function Pt(e){for(var t=!1,r=0;r<ne.length;r++)ne[r].routeTo(e)&&(t=!0);return t}function tn(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),r=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return de(t)}}function nn(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function rn(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(tn(t))return nn(e)}while(t=t.parentNode)}}var rt=!1;function Ft(e){e.history&&(V=e.history),this.state={url:e.url||He()}}ve(Ft.prototype=new se,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=Ae(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;rt||(rt=!0,V||addEventListener("popstate",function(){Pt(He())}),addEventListener("click",rn)),ne.push(this),V&&(this.u=V.listen(function(t){var r=t.location||t;e.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),ne.splice(ne.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(Yt).sort(Jt);for(var r=0;r<e.length;r++){var l=e[r],i=Dt(t,l.props.path,l.props);if(i)return[l,i]}},render:function(e,t){var r,l,i=e.onChange,o=t.url,s=this.c,u=this.g(Ae(e.children),o);if(u&&(l=qt(u[0],ve(ve({url:o,matches:r=u[1]},r),{key:void 0,ref:void 0}))),o!==(s&&s.url)){ve(We,s=this.c={url:o,previous:s&&s.url,current:l,path:l?l.props.path:null,matches:r}),s.router=this,s.active=l?[l]:[];for(var p=ce.length;p--;)ce[p]({});typeof i=="function"&&i(s)}return vt(At.Provider,{value:s},l)}});function ln(e){var t=en()[0];return e.children({url:t.url,path:t.path,matches:Dt(t.path||t.url,e.path,{})!==!1})}const on="v1.1.1",an=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})]}),sn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),cn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("circle",{cx:"12",cy:"12",r:"3"}),n("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),dn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),n("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),n("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),un=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),hn=()=>n("svg",{viewBox:"0 0 100 100",width:"28",height:"28",children:[n("rect",{x:"10",y:"70",width:"80",height:"20",fill:"#58a6ff",rx:"4"}),n("rect",{x:"20",y:"45",width:"60",height:"20",fill:"#58a6ff",rx:"4"}),n("rect",{x:"30",y:"20",width:"40",height:"20",fill:"#58a6ff",rx:"4"})]}),pn=(e,t)=>e==="/"?t==="/"||t==="/search"||(t==null?void 0:t.startsWith("/item/")):t==null?void 0:t.startsWith(e);function fn({children:e}){const[t,r]=g(!1),[l,i]=g(!1);X(()=>{const p=()=>{i(window.innerWidth<1024)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const o=()=>{r(!t)},s=()=>{l&&r(!1)},u=[{path:"/",icon:an,label:"Search"},{path:"/downloads",icon:sn,label:"Downloads"},{path:"/settings",icon:cn,label:"Settings"}];return n("div",{class:"layout",children:[n("button",{class:"mobile-menu-btn",onClick:o,"aria-label":"Toggle menu",children:t?n(un,{}):n(dn,{})}),l&&t&&n("div",{class:"sidebar-overlay",onClick:s}),n("aside",{class:`sidebar ${t?"sidebar-open":""}`,children:[n("div",{class:"sidebar-header",children:n("div",{class:"sidebar-logo",children:[n(hn,{}),n("span",{children:"IA Docker"})]})}),n("nav",{class:"sidebar-nav",children:n(ln,{children:({url:p})=>u.map(c=>n("a",{class:`nav-item ${pn(c.path,p)?"active":""}`,href:c.path,onClick:s,children:[n(c.icon,{}),n("span",{children:c.label})]},c.path))})}),n("div",{class:"sidebar-footer",children:n("span",{class:"version-badge",children:["IADocker ",on]})})]}),n("main",{class:"main-content",children:e})]})}const Et=St();let _n=0;function gn({children:e}){const[t,r]=g([]),l=tt((o,s="info",u=5e3)=>{const p=++_n;return r(c=>[...c,{id:p,message:o,type:s}]),u>0&&setTimeout(()=>{r(c=>c.filter(_=>_.id!==p))},u),p},[]),i=tt(o=>{r(s=>s.filter(u=>u.id!==o))},[]);return n(Et.Provider,{value:{addToast:l,removeToast:i},children:[e,n(mn,{toasts:t,onClose:i})]})}function Mt(){const e=It(Et);if(!e)throw new Error("useToast must be used within ToastProvider");return e}function mn({toasts:e,onClose:t}){return e.length===0?null:n("div",{class:"toast-container",children:e.map(r=>n("div",{class:`toast toast-${r.type}`,children:[n("span",{class:"toast-message",children:r.message}),n("button",{class:"toast-close",onClick:()=>t(r.id),children:"Ã—"})]},r.id))})}const Lt="/api";async function Q(e,t={}){const r=await fetch(`${Lt}${e}`,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok){const l=await r.json().catch(()=>({detail:"Request failed"}));throw new Error(l.detail||"Request failed")}return r.json()}const A={getAuthStatus:()=>Q("/auth/status"),configure:(e,t)=>Q("/auth/configure",{method:"POST",body:JSON.stringify({email:e,password:t})}),search:(e,t={})=>{const r=new URLSearchParams({q:e,...t});return Q(`/search?${r}`)},getItem:e=>Q(`/items/${e}`),getItemFiles:e=>Q(`/items/${e}/files`),startDownload:(e,t={})=>Q("/downloads",{method:"POST",body:JSON.stringify({identifier:e,files:t.files||null,glob:t.glob||null,format:t.format||null,destdir:t.destdir||null,ignore_existing:t.ignoreExisting,checksum:t.checksum,retries:t.retries,timeout:t.timeout,no_directories:t.noDirectories,no_change_timestamp:t.noChangeTimestamp,source:t.source,exclude_source:t.excludeSource,on_the_fly:t.onTheFly,exclude:t.exclude})}),getDownloads:()=>Q("/downloads"),cancelDownload:e=>Q(`/downloads/${e}`,{method:"DELETE"}),clearDownloads:()=>Q("/downloads",{method:"DELETE"}),getSettings:()=>Q("/settings"),updateSettings:e=>Q("/settings",{method:"PUT",body:JSON.stringify(e)}),getDirectories:(e="")=>{const t=e?`?path=${encodeURIComponent(e)}`:"";return Q(`/settings/directories${t}`)}};function vn(e){const t=new EventSource(`${Lt}/downloads/events`);return t.addEventListener("progress",r=>{e(JSON.parse(r.data))}),t.onerror=()=>{t.close()},()=>t.close()}const $e=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})]}),yn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",children:n("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),lt=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",children:[n("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),n("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),bn=({open:e})=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"18",height:"18",style:{transform:e?"rotate(180deg)":"none",transition:"transform 0.2s"},children:n("polyline",{points:"6 9 12 15 18 9"})}),xn=[{value:"",label:"All Types"},{value:"texts",label:"ðŸ“š Texts"},{value:"movies",label:"ðŸŽ¬ Movies"},{value:"audio",label:"ðŸŽµ Audio"},{value:"software",label:"ðŸ’¿ Software"},{value:"image",label:"ðŸ–¼ï¸ Images"},{value:"data",label:"ðŸ“Š Data"},{value:"web",label:"ðŸŒ Web Archives"},{value:"etree",label:"ðŸŽ¸ Live Music"},{value:"collection",label:"ðŸ“ Collections"}],ot=[{value:"",label:"All Collections"},{value:"opensource_movies",label:"Open Source Movies"},{value:"opensource_audio",label:"Open Source Audio"},{value:"prelinger",label:"Prelinger Archives"},{value:"internetarchivebooks",label:"Internet Archive Books"},{value:"oldtimeradio",label:"Old Time Radio"},{value:"computerphotos",label:"Computer Photos"},{value:"librivoxaudio",label:"LibriVox Audiobooks"},{value:"tvnews",label:"TV News Archive"},{value:"softwarelibrary",label:"Software Library"},{value:"classicpcgames",label:"Classic PC Games"},{value:"msdos_games",label:"MS-DOS Games"},{value:"consolelivingroom",label:"Console Living Room"}],wn=[{value:"",label:"Relevance"},{value:"-downloads",label:"Most Downloaded"},{value:"-week",label:"Trending This Week"},{value:"-publicdate",label:"Newest First"},{value:"publicdate",label:"Oldest First"},{value:"titleSorter",label:"Title A-Z"},{value:"-titleSorter",label:"Title Z-A"}];function re(e){const t=e.trim(),r=/archive\.org\/download\/([^\/\?\#\s]+)\/(.+?)(?:\?|#|$)/,l=t.match(r);if(l)return{identifier:l[1],filename:decodeURIComponent(l[2])};const i=[/archive\.org\/details\/([^\/\?\#\s]+)/,/archive\.org\/download\/([^\/\?\#\s]+)\/?$/,/archive\.org\/metadata\/([^\/\?\#\s]+)/,/archive\.org\/embed\/([^\/\?\#\s]+)/];for(const o of i){const s=t.match(o);if(s)return{identifier:s[1],filename:null}}return/^[a-zA-Z0-9_\-\.]+$/.test(t)&&t.length>2&&t.length<200?{identifier:t,filename:null}:null}function it(e){const t=e.split(/[\n\r]+/).map(l=>l.trim()).filter(l=>l.length>0),r=[];for(const l of t){const i=re(l);i&&r.push(i)}return r}function at(){const{addToast:e}=Mt(),[t,r]=g(""),[l,i]=g([]),[o,s]=g(!1),[u,p]=g(0),[c,_]=g(1),[a,d]=g(!1),[f,v]=g(!1),[C,w]=g(""),[y,m]=g(!1),[E,$]=g(""),[O,L]=g([]);X(()=>{A.getSettings().then(h=>{h.search_history&&L(h.search_history)}).catch(()=>{})},[]);const[N,q]=g(""),[M,W]=g(""),[T,U]=g(""),[k,H]=g(""),[j,ee]=g(""),b=it(C),S=t.includes(`
`)||t.includes("archive.org")?it(t):[],J=S.length>1,G=async(h,B=1)=>{h==null||h.preventDefault();const R=t.trim();if(J){await ie();return}const z=re(R);if(z&&R.includes("archive.org"))if(z.filename){m(!0);try{await A.startDownload(z.identifier,{files:[z.filename]}),e(`ðŸ“¥ Added ${z.filename} to queue`,"success"),m(!1)}catch(Y){console.error("Download failed:",Y),e("Failed to start download","error"),m(!1)}return}else{de(`/item/${z.identifier}`);return}if(!(!R&&!M&&!N&&!j)){s(!0),_(B);try{const Y={page:B,rows:24};N&&(Y.mediatype=N),M&&(Y.collection=M),T&&(Y.sort=T);let Ce=R||"*";k&&(Ce+=` AND year:${k}`),j&&(Ce+=` AND creator:"${j}"`);const ze=await A.search(Ce,Y);if(i(ze.results),p(ze.total),R&&!re(R)){const qe=[R,...O.filter(Ot=>Ot!==R)].slice(0,10);L(qe),A.updateSettings({search_history:qe}).catch(()=>{})}}catch(Y){console.error("Search failed:",Y)}finally{s(!1)}}},ie=async()=>{if(S.length===0)return;m(!0),$(`Queuing 0/${S.length}...`);let h=0;for(const B of S)try{B.filename?await A.startDownload(B.identifier,{files:[B.filename]}):await A.startDownload(B.identifier),h++,$(`Queuing ${h}/${S.length}...`)}catch(R){console.error(`Failed to queue ${B.identifier}:`,R)}e(`ðŸ“¥ Added ${S.length} items to queue`,"success"),m(!1)},fe=h=>{de(`/item/${h}`)},_e=async()=>{const h=re(t.trim());if(h)if(h.filename){m(!0);try{await A.startDownload(h.identifier,{files:[h.filename]}),e(`ðŸ“¥ Added ${h.filename} to queue`,"success"),m(!1)}catch(B){console.error("Download failed:",B),e("Failed to start download","error"),m(!1)}}else de(`/item/${h.identifier}`)},ge=()=>{q(""),W(""),U(""),H(""),ee("")},x=N||M||T||k||j,D=Math.ceil(u/24);return n("div",{children:[n("div",{class:"page-header",children:[n("h1",{class:"page-title",children:"Search Archive.org"}),n("p",{class:"page-subtitle",children:"Explore millions of items in the Internet Archive"})]}),n("form",{onSubmit:G,class:"search-bar",style:{flexWrap:"wrap",gap:"var(--space-sm)"},children:[n("div",{class:"search-input-wrapper",style:{flex:"1 1 300px"},children:[n($e,{}),n("input",{type:"text",class:"search-input",placeholder:"Search, paste URL, or enter identifier...",value:t,onInput:h=>r(h.target.value)})]}),n("button",{type:"button",class:`btn ${a||x?"btn-primary":"btn-secondary"}`,onClick:()=>d(!a),style:{display:"flex",alignItems:"center",gap:"6px"},children:[n(yn,{}),"Filters",x&&n("span",{style:{background:"rgba(255,255,255,0.3)",borderRadius:"50%",width:"18px",height:"18px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center"},children:"!"}),n(bn,{open:a})]}),n("button",{type:"button",class:`btn ${f?"btn-primary":"btn-secondary"}`,onClick:()=>v(!f),style:{display:"flex",alignItems:"center",gap:"6px"},children:"ðŸ“¥ Bulk"}),n("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:o,children:o?"Searching...":"Search"})]}),f&&n("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:[n("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n("strong",{children:"ðŸ“¥ Bulk Download"}),b.length>0&&n("span",{class:"result-badge",children:[b.length," items detected"]})]}),n("div",{class:"card-body",children:[n("div",{class:"form-group",style:{marginBottom:"var(--space-md)"},children:[n("label",{class:"form-label",children:"Paste archive.org URLs (one per line)"}),n("textarea",{class:"form-input",rows:"6",placeholder:`https://archive.org/download/item1/file.zip
https://archive.org/details/item2
https://archive.org/download/item3/folder/file.mp4`,value:C,onInput:h=>w(h.target.value),style:{fontFamily:"var(--font-mono)",fontSize:"0.875rem"}})]}),b.length>0&&n("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)",marginBottom:"var(--space-md)"},children:[b.filter(h=>h.filename).length," specific files, ",b.filter(h=>!h.filename).length," full items"]}),n("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[n("button",{class:"btn btn-primary",onClick:async()=>{if(b.length===0)return;m(!0),$(`Queuing 0/${b.length}...`);let h=0;for(const B of b)try{B.filename?await A.startDownload(B.identifier,{files:[B.filename]}):await A.startDownload(B.identifier),h++,$(`Queuing ${h}/${b.length}...`)}catch(R){console.error(`Failed to queue ${B.identifier}:`,R)}e(`ðŸ“¥ Added ${b.length} items to queue`,"success"),m(!1),w(""),v(!1)},disabled:y||b.length===0,children:y?"Queuing...":`Download ${b.length} Items`}),n("button",{class:"btn btn-secondary",onClick:()=>w(""),children:"Clear"})]})]})]}),J&&n("div",{style:{marginTop:"var(--space-sm)",marginBottom:"var(--space-md)",padding:"var(--space-md)",background:"rgba(88, 166, 255, 0.15)",borderRadius:"var(--radius-md)",border:"1px solid rgba(88, 166, 255, 0.3)"},children:[n("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",marginBottom:"var(--space-sm)"},children:[n(lt,{}),n("strong",{children:"Bulk Download Mode"}),n("span",{class:"result-badge",style:{marginLeft:"auto"},children:[S.length," items"]})]}),n("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)",marginBottom:"var(--space-md)"},children:[S.filter(h=>h.filename).length," specific files, ",S.filter(h=>!h.filename).length," full items"]}),n("div",{style:{display:"flex",gap:"var(--space-sm)",flexWrap:"wrap"},children:[n("button",{class:"btn btn-primary",onClick:ie,disabled:y,children:y?E||"Queuing...":`ðŸ“¥ Download All ${S.length} Items`}),n("button",{class:"btn btn-secondary",onClick:()=>r(""),children:"Clear"})]})]}),!J&&t.trim()&&re(t.trim())&&(()=>{const h=re(t.trim());return n("div",{style:{marginTop:"var(--space-sm)",marginBottom:"var(--space-md)",padding:"var(--space-sm) var(--space-md)",background:h.filename?"rgba(63, 185, 80, 0.15)":"var(--color-accent-muted)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",gap:"var(--space-sm)",border:h.filename?"1px solid rgba(63, 185, 80, 0.3)":"none"},children:[n(lt,{}),n("span",{style:{flex:1},children:h.filename?n(Z,{children:["Download file: ",n("strong",{children:h.filename})," from ",n("strong",{children:h.identifier})]}):n(Z,{children:["Go directly to item: ",n("strong",{children:h.identifier})]})}),n("button",{class:"btn btn-primary",onClick:_e,disabled:y,children:y?"Starting...":h.filename?"ðŸ“¥ Download":"Open Item"})]})})(),a&&n("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:n("div",{class:"card-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"var(--space-md)"},children:[n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Media Type"}),n("select",{class:"form-input",value:N,onChange:h=>q(h.target.value),children:xn.map(h=>n("option",{value:h.value,children:h.label},h.value))})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Collection"}),n("select",{class:"form-input",value:M,onChange:h=>W(h.target.value),children:ot.map(h=>n("option",{value:h.value,children:h.label},h.value))})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Sort By"}),n("select",{class:"form-input",value:T,onChange:h=>U(h.target.value),children:wn.map(h=>n("option",{value:h.value,children:h.label},h.value))})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Year"}),n("input",{type:"text",class:"form-input",placeholder:"e.g. 2020 or 1990-2000",value:k,onInput:h=>H(h.target.value)})]}),n("div",{class:"form-group",style:{margin:0},children:[n("label",{class:"form-label",children:"Creator"}),n("input",{type:"text",class:"form-input",placeholder:"Author or creator",value:j,onInput:h=>ee(h.target.value)})]}),n("div",{class:"form-group",style:{margin:0,display:"flex",alignItems:"flex-end"},children:n("button",{type:"button",class:"btn btn-secondary",onClick:ge,disabled:!x,children:"Clear Filters"})})]})}),l.length>0&&n("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-md)"},children:[n("p",{class:"text-secondary",children:["Found ",u.toLocaleString()," results",x&&" (filtered)"]}),D>1&&n("div",{style:{display:"flex",gap:"var(--space-sm)",alignItems:"center"},children:[n("button",{class:"btn btn-secondary",disabled:c<=1,onClick:()=>G(null,c-1),children:"â† Prev"}),n("span",{class:"text-secondary",children:["Page ",c," of ",D]}),n("button",{class:"btn btn-secondary",disabled:c>=D,onClick:()=>G(null,c+1),children:"Next â†’"})]})]}),o?n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})}):l.length>0?n(Z,{children:[n("div",{class:"results-grid",children:l.map(h=>n("div",{class:"result-card",onClick:()=>fe(h.identifier),children:[n("img",{class:"result-thumbnail",src:`https://archive.org/services/img/${h.identifier}`,alt:h.title,loading:"lazy",onError:B=>{B.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%2321262d" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%236e7681" font-size="12">No Image</text></svg>'}}),n("div",{class:"result-info",children:[n("h3",{class:"result-title",children:h.title||h.identifier}),n("div",{class:"result-meta",children:[h.mediatype&&n("span",{class:"result-badge",children:h.mediatype}),h.date&&n("span",{children:h.date.substring(0,10)})]}),h.creator&&n("div",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:typeof h.creator=="string"?h.creator:h.creator[0]})]})]},h.identifier))}),D>1&&n("div",{style:{display:"flex",justifyContent:"center",gap:"var(--space-sm)",marginTop:"var(--space-xl)"},children:[n("button",{class:"btn btn-secondary",disabled:c<=1,onClick:()=>G(null,c-1),children:"â† Previous"}),n("span",{class:"text-secondary",style:{padding:"8px 16px"},children:["Page ",c," of ",D]}),n("button",{class:"btn btn-secondary",disabled:c>=D,onClick:()=>G(null,c+1),children:"Next â†’"})]})]}):t&&!o?n("div",{class:"empty-state",children:[n($e,{}),n("h3",{children:"No results found"}),n("p",{children:"Try different keywords or adjust filters"})]}):n("div",{class:"empty-state",children:[n($e,{}),n("h3",{children:"Start Your Search"}),n("p",{children:"Enter a query, paste an archive.org URL, or browse by collection"}),O.length>0&&n("div",{style:{marginTop:"var(--space-lg)",width:"100%",maxWidth:"400px"},children:[n("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)",marginBottom:"var(--space-sm)"},children:"Recent searches"}),n("div",{style:{display:"flex",flexWrap:"wrap",gap:"var(--space-xs)",justifyContent:"center"},children:O.slice(0,5).map((h,B)=>n("button",{class:"btn btn-secondary",style:{fontSize:"0.85rem",padding:"4px 12px"},onClick:()=>{r(h),setTimeout(()=>G(null,1),100)},children:h.length>25?h.substring(0,25)+"...":h},B))})]}),n("div",{style:{marginTop:"var(--space-lg)",display:"flex",flexWrap:"wrap",gap:"var(--space-sm)",justifyContent:"center"},children:ot.slice(1,7).map(h=>n("button",{class:"btn btn-secondary",onClick:()=>{W(h.value),d(!0),setTimeout(()=>G(null,1),100)},children:h.label},h.value))})]})]})}const be=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),kn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),n("polyline",{points:"14 2 14 8 20 8"})]}),st=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),n("polyline",{points:"12 19 5 12 12 5"})]}),Cn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"m21 21-4.35-4.35"})]}),Sn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[n("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),n("polyline",{points:"15 3 21 3 21 9"}),n("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),$n=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:n("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})});function ct(e){if(!e)return"Unknown size";const t=parseInt(e);if(isNaN(t))return"Unknown size";const r=["B","KB","MB","GB","TB"];let l=0,i=t;for(;i>=1024&&l<r.length-1;)i/=1024,l++;return`${i.toFixed(1)} ${r[l]}`}function Ie(e){const t=e.split(".");return t.length>1?t.pop().toUpperCase():"?"}const In={Video:["MP4","WEBM","OGV","AVI","MKV","MOV","MPEG"],Audio:["MP3","OGG","FLAC","WAV","M4A","AAC"],Image:["JPG","JPEG","PNG","GIF","WEBP","BMP","TIFF"],Document:["PDF","TXT","DOC","DOCX","EPUB","MOBI"],Archive:["ZIP","RAR","7Z","TAR","GZ","BZ2"],Data:["XML","JSON","CSV","SQL","SQLITE"]};function dt(e){for(const[t,r]of Object.entries(In))if(r.includes(e))return t;return"Other"}function Bn({isOpen:e,onClose:t,onConfirm:r,identifier:l,filename:i,fileCount:o}){const[s,u]=g(""),[p,c]=g(!0),[_,a]=g(!1),[d,f]=g(!0),[v,C]=g(""),[w,y]=g(!1),[m,E]=g(""),[$,O]=g([]),[L,N]=g(!1);if(X(()=>{e&&A.getSettings().then(k=>{k.last_destdir&&u(k.last_destdir)}).catch(()=>{})},[e]),X(()=>{w&&(N(!0),A.getDirectories(m).then(k=>O(k.directories||[])).catch(()=>O([])).finally(()=>N(!1)))},[w,m]),!e)return null;const q=()=>{const k={destdir:s.trim()||null,ignoreExisting:p,checksum:_,noDirectories:d};v&&(k.source=[v]),s.trim()&&A.updateSettings({last_destdir:s.trim()}).catch(()=>{}),r(k),y(!1)},M=()=>{y(!1),t()},W=k=>{const H=m?`${m}/${k}`:k;u(H),E(H)},T=i||`${o} files`,U=s?`/data/${s.replace(/^\/+/,"")}/`:"/data/";return n("div",{class:"modal-overlay",onClick:M,children:n("div",{class:"modal-content",onClick:k=>k.stopPropagation(),style:{maxWidth:"520px"},children:[n("div",{class:"modal-header",children:n("h3",{style:{margin:0},children:"ðŸ“¥ Download Options"})}),n("div",{class:"modal-body",children:[n("p",{style:{marginBottom:"var(--space-md)",color:"var(--color-text-secondary)"},children:["Downloading: ",n("strong",{children:T})," from ",n("code",{children:l})]}),n("label",{class:"form-label",children:[n($n,{})," Download Location"]}),n("div",{style:{display:"flex",gap:"8px",marginBottom:"4px"},children:[n("input",{type:"text",class:"form-input",placeholder:"Leave empty for /data root",value:s,onInput:k=>u(k.target.value),style:{flex:1,margin:0}}),n("button",{class:"btn btn-secondary",onClick:()=>y(!w),title:"Browse directories",style:{padding:"8px 12px"},children:"ðŸ“"})]}),w&&n("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-sm)",background:"var(--color-bg-secondary)",maxHeight:"150px",overflow:"auto"},children:[n("div",{style:{padding:"6px 10px",borderBottom:"1px solid var(--color-border)",fontSize:"0.8rem",display:"flex",gap:"4px",flexWrap:"wrap"},children:[n("button",{onClick:()=>E(""),class:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"0.75rem"},children:"/data"}),m&&m.split("/").map((k,H,j)=>n("span",{children:[n("span",{style:{opacity:.5},children:"/"}),n("button",{onClick:()=>E(j.slice(0,H+1).join("/")),class:"btn btn-secondary",style:{padding:"2px 6px",fontSize:"0.75rem"},children:k})]},H))]}),n("div",{style:{padding:"4px"},children:L?n("div",{style:{padding:"8px",opacity:.6,fontSize:"0.8rem"},children:"Loading..."}):$.length===0?n("div",{style:{padding:"8px",opacity:.6,fontSize:"0.8rem"},children:"No subdirectories"}):$.map(k=>n("button",{onClick:()=>W(k),style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",border:"none",background:"transparent",cursor:"pointer",borderRadius:"var(--radius-sm)",fontSize:"0.85rem",color:"var(--color-text)"},children:["ðŸ“ ",k]},k))})]}),n("p",{class:"text-secondary",style:{fontSize:"0.8rem",marginBottom:"var(--space-lg)"},children:["Files will be saved to: ",n("code",{children:U})]}),n("div",{style:{borderTop:"1px solid var(--color-border)",paddingTop:"var(--space-md)",marginBottom:"var(--space-md)"},children:[n("label",{class:"form-label",style:{marginBottom:"var(--space-sm)"},children:"Options (override global defaults)"}),n("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"var(--space-sm)",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:p,onChange:k=>c(k.target.checked)}),n("span",{children:"Skip existing files"})]}),n("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"var(--space-sm)",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:_,onChange:k=>a(k.target.checked)}),n("span",{children:"Verify checksums"})]}),n("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"var(--space-md)",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:d,onChange:k=>f(k.target.checked)}),n("span",{children:"Flatten directory structure"})]})]}),n("label",{class:"form-label",children:"Source Filter (optional)"}),n("select",{class:"form-input",value:v,onChange:k=>C(k.target.value),style:{marginBottom:0},children:[n("option",{value:"",children:"All sources"}),n("option",{value:"original",children:"Original files only"}),n("option",{value:"derivative",children:"Derivatives only"}),n("option",{value:"metadata",children:"Metadata only"})]})]}),n("div",{class:"modal-footer",children:[n("button",{class:"btn btn-secondary",onClick:M,children:"Cancel"}),n("button",{class:"btn btn-primary",onClick:q,children:[n(be,{})," Start Download"]})]})]})})}function Tn({identifier:e}){var k,H,j,ee,b,S,J,G,ie,fe,_e,ge;const{addToast:t}=Mt(),[r,l]=g(null),[i,o]=g(!0),[s,u]=g(null),[p,c]=g({}),[_,a]=g(!1),[d,f]=g(null),[v,C]=g(""),[w,y]=g(""),[m,E]=g(!1);X(()=>{async function x(){o(!0);try{const D=await A.getItem(e);l(D)}catch(D){u(D.message)}finally{o(!1)}}x()},[e]);const $=Fe(()=>r!=null&&r.files?r.files.filter(x=>{if(v&&!x.name.toLowerCase().includes(v.toLowerCase()))return!1;if(w){const D=Ie(x.name);if(dt(D)!==w)return!1}return!(m&&x.source!=="original")}):[],[r==null?void 0:r.files,v,w,m]),O=Fe(()=>{if(!(r!=null&&r.files))return[];const x=new Set;return r.files.forEach(D=>x.add(dt(Ie(D.name)))),Array.from(x).sort()},[r==null?void 0:r.files]),L=(x,D=null,h=null)=>{f({type:x,files:D,filename:h}),a(!0)},N=async x=>{if(!d)return;const{type:D,files:h,filename:B}=d,R=B||(D==="all"?"__all__":"__filtered__");a(!1),c(z=>({...z,[R]:!0}));try{await A.startDownload(e,{files:h,...x});const z=B?`ðŸ“¥ Added ${B} to queue`:D==="all"?`ðŸ“¥ Added all files from ${e} to queue`:`ðŸ“¥ Added ${h.length} files to queue`;t(z,"success")}catch(z){console.error("Download failed:",z),t("Failed to start download","error")}finally{c(z=>({...z,[R]:!1})),f(null)}},q=x=>{L("single",[x],x)},M=()=>{L("all",null,null)},W=()=>{const x=$.map(D=>D.name);L("filtered",x,null)};if(i)return n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})});if(s)return n("div",{class:"empty-state",children:[n("h3",{children:"Error loading item"}),n("p",{children:s}),n("a",{href:"/",class:"btn btn-secondary mt-md",children:[n(st,{})," Back to Search"]})]});const T=v||w||m,U=$.reduce((x,D)=>x+(parseInt(D.size)||0),0);return n("div",{children:[n("div",{style:{display:"flex",gap:"var(--space-md)",marginBottom:"var(--space-lg)"},children:[n("a",{href:"/",class:"btn btn-secondary",children:[n(st,{})," Back to Search"]}),n("a",{href:`https://archive.org/details/${e}`,target:"_blank",rel:"noopener",class:"btn btn-secondary",children:[n(Sn,{})," View on Archive.org"]})]}),n("div",{class:"card",style:{marginBottom:"var(--space-lg)"},children:n("div",{class:"card-body",style:{display:"flex",gap:"var(--space-lg)",flexWrap:"wrap"},children:[n("img",{src:`https://archive.org/services/img/${e}`,alt:((k=r==null?void 0:r.metadata)==null?void 0:k.title)||e,style:{width:"200px",height:"150px",objectFit:"cover",borderRadius:"var(--radius-md)",flexShrink:0}}),n("div",{style:{flex:1,minWidth:"250px"},children:[n("h1",{class:"page-title",style:{marginBottom:"var(--space-sm)"},children:((H=r==null?void 0:r.metadata)==null?void 0:H.title)||e}),n("p",{class:"text-secondary",style:{fontFamily:"monospace",fontSize:"0.85rem"},children:e}),((j=r==null?void 0:r.metadata)==null?void 0:j.creator)&&n("p",{style:{marginTop:"var(--space-sm)"},children:["By ",n("strong",{children:r.metadata.creator})]}),((ee=r==null?void 0:r.metadata)==null?void 0:ee.date)&&n("p",{class:"text-secondary",children:r.metadata.date}),((b=r==null?void 0:r.metadata)==null?void 0:b.description)&&n("p",{style:{marginTop:"var(--space-md)",color:"var(--color-text-secondary)"},children:[r.metadata.description.substring(0,400),r.metadata.description.length>400?"...":""]}),n("div",{style:{marginTop:"var(--space-md)",display:"flex",gap:"var(--space-sm)",flexWrap:"wrap"},children:[((S=r==null?void 0:r.metadata)==null?void 0:S.mediatype)&&n("span",{class:"result-badge",children:r.metadata.mediatype}),((J=r==null?void 0:r.metadata)==null?void 0:J.collection)&&n("span",{class:"result-badge",style:{background:"var(--color-accent-muted)"},children:Array.isArray(r.metadata.collection)?r.metadata.collection[0]:r.metadata.collection})]}),n("div",{style:{marginTop:"var(--space-lg)"},children:n("button",{class:"btn btn-primary btn-lg",onClick:M,disabled:p.__all__,children:[n(be,{}),p.__all__?"Starting...":"Download All Files"]})})]})]})}),n("div",{class:"card",children:[n("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"var(--space-md)"},children:[n("span",{children:["Files (",((G=r==null?void 0:r.files)==null?void 0:G.length)||0,")"]}),T&&$.length>0&&$.length<(((ie=r==null?void 0:r.files)==null?void 0:ie.length)||0)&&n("button",{class:"btn btn-primary",onClick:W,disabled:p.__filtered__,style:{fontSize:"0.85rem"},children:[n(be,{}),"Download ",$.length," Filtered (",ct(U),")"]})]}),n("div",{style:{padding:"var(--space-md)",borderBottom:"1px solid var(--color-border)",display:"flex",gap:"var(--space-md)",flexWrap:"wrap",alignItems:"center"},children:[n("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",flex:"1 1 200px"},children:[n(Cn,{}),n("input",{type:"text",class:"form-input",placeholder:"Search files...",value:v,onInput:x=>C(x.target.value),style:{margin:0}})]}),n("select",{class:"form-input",value:w,onChange:x=>y(x.target.value),style:{margin:0,width:"auto"},children:[n("option",{value:"",children:"All Types"}),O.map(x=>n("option",{value:x,children:x},x))]}),n("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:m,onChange:x=>E(x.target.checked)}),"Original files only"]}),T&&n("span",{class:"text-secondary",children:["Showing ",$.length," of ",(fe=r==null?void 0:r.files)==null?void 0:fe.length]})]}),n("div",{class:"card-body",style:{padding:0},children:n("div",{class:"job-list",children:$.length===0?n("div",{class:"empty-state",style:{padding:"var(--space-xl)"},children:n("p",{children:"No files match your filters"})}):$.map(x=>n("div",{class:"job-item",children:[n("div",{class:"job-icon",children:n(kn,{})}),n("div",{class:"job-info",style:{minWidth:0},children:[n("div",{class:"job-title",style:{wordBreak:"break-all"},children:x.name}),n("div",{class:"job-subtitle",children:[ct(x.size)," â€¢ ",x.format||Ie(x.name),x.source&&n("span",{style:{marginLeft:"8px",opacity:.7},children:["(",x.source,")"]})]})]}),n("button",{class:"btn btn-secondary btn-icon",onClick:()=>q(x.name),disabled:p[x.name],title:"Download",children:n(be,{})})]},x.name))})})]}),n(Bn,{isOpen:_,onClose:()=>{a(!1),f(null)},onConfirm:N,identifier:e,filename:d==null?void 0:d.filename,fileCount:((_e=d==null?void 0:d.files)==null?void 0:_e.length)||((ge=r==null?void 0:r.files)==null?void 0:ge.length)||0})]})}const ut=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Dn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),An=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:n("polyline",{points:"20 6 9 17 4 12"})});function Le(e){if(!e&&e!==0)return"";const t=["B","KB","MB","GB","TB"];let r=0,l=e;for(;l>=1024&&r<t.length-1;)l/=1024,r++;return`${l.toFixed(1)} ${t[r]}`}function Pn(e){return!e||e<=0?"":`${Le(e)}/s`}function Fn(){const[e,t]=g([]),[r,l]=g(!0);X(()=>{async function d(){try{const v=await A.getDownloads();t(v)}catch(v){console.error("Failed to load downloads:",v)}finally{l(!1)}}return d(),vn(v=>{t(C=>{const w=C.findIndex(y=>y.id===v.id);if(w>=0){const y=[...C];return y[w]=v,y}return[v,...C]})})},[]);const i=async d=>{try{await A.cancelDownload(d)}catch(f){console.error("Failed to cancel:",f)}},o=d=>({pending:"status-pending",running:"status-running",completed:"status-completed",failed:"status-failed",cancelled:"status-failed"})[d]||"status-pending",s=async()=>{try{await A.clearDownloads(),t(d=>d.filter(f=>f.status==="pending"||f.status==="running"))}catch(d){console.error("Failed to clear downloads:",d)}},u=e.some(d=>d.status==="completed"||d.status==="failed"||d.status==="cancelled"),p={running:0,pending:1,completed:2,failed:3,cancelled:4},c=[...e].sort((d,f)=>{const v=(p[d.status]||5)-(p[f.status]||5);return v!==0?v:new Date(f.created_at)-new Date(d.created_at)}),_=e.filter(d=>d.status==="running").length,a=e.filter(d=>d.status==="pending").length;return n("div",{children:[n("div",{class:"page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[n("div",{children:[n("h1",{class:"page-title",children:"Downloads"}),n("p",{class:"page-subtitle",children:[_>0&&`${_} running`,_>0&&a>0&&", ",a>0&&`${a} pending`,_===0&&a===0&&"Manage your download queue"]})]}),u&&n("button",{class:"btn btn-secondary",onClick:s,children:"ðŸ—‘ï¸ Clear History"})]}),r?n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})}):c.length>0?n("div",{class:"job-list",children:c.map(d=>n("div",{class:"job-item",children:[n("div",{class:"job-icon",children:d.status==="completed"?n(An,{}):n(ut,{})}),n("div",{class:"job-info",style:{flex:1},children:[n("div",{class:"job-title",children:d.filename||"All files"}),n("div",{class:"job-subtitle",children:[d.identifier,d.error&&` â€¢ ${d.error}`]}),d.status==="running"&&n("div",{style:{marginTop:"var(--space-sm)"},children:[n("div",{class:"progress-bar",children:n("div",{class:"progress-fill",style:{width:`${d.progress}%`}})}),n("div",{style:{marginTop:"4px",fontSize:"0.75rem",color:"var(--color-text-secondary)",display:"flex",justifyContent:"space-between",gap:"var(--space-md)"},children:[n("span",{children:[d.progress.toFixed(1),"%",d.downloaded_bytes&&d.total_bytes&&n(Z,{children:[" â€¢ ",Le(d.downloaded_bytes)," / ",Le(d.total_bytes)]})]}),d.speed>0&&n("span",{children:Pn(d.speed)})]})]})]}),n("div",{class:"job-status",children:[n("span",{class:`status-badge ${o(d.status)}`,children:d.status}),(d.status==="pending"||d.status==="running")&&n("button",{class:"btn btn-secondary btn-icon",onClick:()=>i(d.id),title:"Cancel",children:n(Dn,{})})]})]},d.id))}):n("div",{class:"empty-state",children:[n(ut,{}),n("h3",{children:"No Downloads"}),n("p",{children:"Start by searching for items and downloading files"}),n("a",{href:"/",class:"btn btn-primary mt-md",children:"Search Archive"})]})]})}const En=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:n("polyline",{points:"20 6 9 17 4 12"})}),Mn=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"20",height:"20",children:[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Ln=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:[n("polyline",{points:"23 4 23 10 17 10"}),n("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),On=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",width:"16",height:"16",children:n("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})});function Nn(){const[e,t]=g(null),[r,l]=g(!0),[i,o]=g(""),[s,u]=g(""),[p,c]=g(!1),[_,a]=g(null),[d,f]=g(!1),[v,C]=g(3),[w,y]=g(!1),[m,E]=g(!0),[$,O]=g(!1),[L,N]=g(5),[q,M]=g(null),[W,T]=g(!1),[U,k]=g(!1),H=async()=>{l(!0),a(null);try{const b=await A.getAuthStatus();t(b),b.email&&!i&&o(b.email);try{const S=await A.getSettings();C(S.max_concurrent_downloads),E(S.ignore_existing??!0),O(S.checksum??!1),N(S.retries??5),M(S.timeout??null),T(S.no_change_timestamp??!1),k(S.on_the_fly??!1)}catch(S){console.error("Failed to load settings:",S)}}catch(b){console.error("Failed to load status:",b),a({type:"error",text:"Failed to check configuration status"})}finally{l(!1)}};X(()=>{H()},[]);const j=async b=>{if(b.preventDefault(),!i||!s){a({type:"error",text:"Email and password are required"});return}c(!0),a(null);try{const S=await A.configure(i,s);if(S.success){u(""),a({type:"success",text:"Configuration saved! Verifying..."}),f(!0),await new Promise(G=>M(G,1e3));const J=await A.getAuthStatus();J.configured?(t(J),a({type:"success",text:"âœ“ Login successful! Configuration verified."})):a({type:"warning",text:"Configuration saved but could not verify. Check credentials."}),f(!1)}else throw new Error(S.message||"Configuration failed")}catch(S){a({type:"error",text:S.message||"Login failed. Check your credentials."}),c(!1),f(!1);return}c(!1)},ee=async()=>{f(!0),a(null);try{const b=await A.getAuthStatus();b.configured?(t(b),a({type:"success",text:"âœ“ Configuration is valid!"})):a({type:"error",text:"Not configured or credentials invalid"})}catch{a({type:"error",text:"Failed to verify configuration"})}f(!1)};return r?n("div",{class:"loading-container",children:n("div",{class:"loading-spinner"})}):n("div",{children:[n("div",{class:"page-header",children:[n("h1",{class:"page-title",children:"Settings"}),n("p",{class:"page-subtitle",children:"Configure your Internet Archive account"})]}),n("div",{class:"card",children:[n("div",{class:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n("span",{children:"Account Configuration"}),n("div",{style:{display:"flex",gap:"var(--space-sm)"},children:[n("button",{class:"btn btn-secondary",onClick:ee,disabled:d,style:{padding:"4px 12px",fontSize:"0.85rem"},children:[n(On,{})," ",d?"Verifying...":"Test Login"]}),n("button",{class:"btn btn-secondary btn-icon",onClick:H,title:"Refresh status",style:{padding:"4px 8px"},children:n(Ln,{})})]})]}),n("div",{class:"card-body",children:[n("div",{class:"flex items-center gap-md",style:{marginBottom:"var(--space-lg)",padding:"var(--space-md)",background:e!=null&&e.configured?"rgba(63, 185, 80, 0.1)":"rgba(248, 81, 73, 0.1)",borderRadius:"var(--radius-md)",border:`1px solid ${e!=null&&e.configured?"rgba(63, 185, 80, 0.3)":"rgba(248, 81, 73, 0.3)"}`},children:[n("div",{style:{width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:e!=null&&e.configured?"rgba(63, 185, 80, 0.2)":"rgba(248, 81, 73, 0.2)",color:e!=null&&e.configured?"var(--color-success)":"var(--color-error)"},children:e!=null&&e.configured?n(En,{}):n(Mn,{})}),n("div",{style:{flex:1},children:[n("div",{style:{fontWeight:600,fontSize:"1.1rem"},children:e!=null&&e.configured?"âœ“ Connected to Archive.org":"âœ— Not Configured"}),e!=null&&e.email?n("div",{class:"text-secondary",children:["Logged in as: ",e.email]}):e!=null&&e.configured?n("div",{class:"text-secondary",style:{fontStyle:"italic"},children:"API keys saved"}):n("div",{class:"text-secondary",children:"Enter your archive.org credentials below"})]})]}),_&&n("div",{style:{padding:"var(--space-md)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-lg)",background:_.type==="success"?"rgba(63, 185, 80, 0.2)":_.type==="warning"?"rgba(210, 153, 34, 0.2)":"rgba(248, 81, 73, 0.2)",color:_.type==="success"?"var(--color-success)":_.type==="warning"?"var(--color-warning)":"var(--color-error)",border:`1px solid ${_.type==="success"?"rgba(63, 185, 80, 0.3)":_.type==="warning"?"rgba(210, 153, 34, 0.3)":"rgba(248, 81, 73, 0.3)"}`},children:_.text}),n("form",{onSubmit:j,children:[n("div",{class:"form-group",children:[n("label",{class:"form-label",children:"Archive.org Email *"}),n("input",{type:"email",class:"form-input",placeholder:"your@email.com",value:i,onInput:b=>o(b.target.value),required:!0,autoComplete:"email"})]}),n("div",{class:"form-group",children:[n("label",{class:"form-label",children:"Password *"}),n("input",{type:"password",class:"form-input",placeholder:e!=null&&e.configured?"Enter password to update":"Your archive.org password",value:s,onInput:b=>u(b.target.value),required:!0,autoComplete:"current-password"}),n("p",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:"Your password is sent directly to archive.org and stored locally in /config/ia.ini"})]}),n("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:p||d||!i||!s,style:{width:"100%"},children:p?"Saving...":d?"Verifying...":e!=null&&e.configured?"ðŸ”„ Update Configuration":"ðŸ” Login & Save"})]})]})]}),n("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"var(--space-lg)",marginTop:"var(--space-lg)"},children:[n("div",{class:"card",children:[n("div",{class:"card-header",children:"âš™ï¸ Download Settings"}),n("div",{class:"card-body",children:[n("div",{class:"form-group",children:[n("label",{class:"form-label",children:"Max Concurrent Downloads"}),n("input",{type:"number",class:"form-input",value:v,min:"1",max:"10",style:{width:"100px"},onInput:b=>C(parseInt(b.target.value)||1)}),n("p",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:"Simultaneous downloads (1-10)"})]}),n("div",{class:"form-group",children:[n("label",{class:"form-label",children:"Retry Attempts"}),n("input",{type:"number",class:"form-input",value:L,min:"0",max:"20",style:{width:"100px"},onInput:b=>N(parseInt(b.target.value)||5)}),n("p",{class:"text-secondary",style:{fontSize:"0.8rem",marginTop:"4px"},children:"Retries for failed downloads"})]}),n("div",{class:"form-group",style:{borderTop:"1px solid var(--color-border)",paddingTop:"var(--space-md)"},children:[n("label",{class:"form-label",children:"Default Behavior"}),n("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"var(--space-sm)",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:m,onChange:b=>E(b.target.checked)}),n("span",{children:"Skip existing files"})]}),n("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"var(--space-sm)",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:$,onChange:b=>O(b.target.checked)}),n("span",{children:"Verify checksums"})]}),n("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"var(--space-sm)",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:W,onChange:b=>T(b.target.checked)}),n("span",{children:"Preserve local timestamps"})]}),n("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"var(--space-md)",cursor:"pointer"},children:[n("input",{type:"checkbox",checked:U,onChange:b=>k(b.target.checked)}),n("span",{children:"Include derivative formats (EPUB, MOBI, DAISY)"})]})]}),n("button",{class:"btn btn-primary",disabled:w,style:{width:"100%"},onClick:async()=>{y(!0);try{await A.updateSettings({max_concurrent_downloads:v,ignore_existing:m,checksum:$,retries:L,timeout:q,no_change_timestamp:W,on_the_fly:U}),a({type:"success",text:"Settings saved!"})}catch{a({type:"error",text:"Failed to save settings"})}y(!1)},children:w?"Saving...":"Save Download Settings"})]})]}),n("div",{class:"card",children:[n("div",{class:"card-header",children:"ðŸ“ Storage"}),n("div",{class:"card-body",children:[n("p",{class:"text-secondary",style:{marginBottom:"var(--space-md)"},children:["Downloads are saved to the ",n("code",{children:"/data"})," volume, which maps to your local ",n("code",{children:"./data"})," directory."]}),n("p",{class:"text-secondary",children:["Credentials are stored in ",n("code",{children:"/config/ia.ini"})," and persist across container restarts."]})]})]})]})]})}function Un(){return n(gn,{children:n(fn,{children:n(Ft,{children:[n(at,{path:"/"}),n(at,{path:"/search"}),n(Tn,{path:"/item/:identifier"}),n(Fn,{path:"/downloads"}),n(Nn,{path:"/settings"})]})})})}zt(n(Un,{}),document.getElementById("app"));
